(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    526200,      12867]
NotebookOptionsPosition[    456948,      11756]
NotebookOutlinePosition[    503316,      12611]
CellTagsIndexPosition[    503273,      12608]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"Quit", "[", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.889964198656839*^9, 3.889964203363894*^9}},
 CellLabel->
  "In[139]:=",ExpressionUUID->"2d530782-807c-4677-ac15-0a1524d3eb66"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"testFileName", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"DirectoryName", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "1"}], "]"}], ",", 
      RowBox[{
       RowBox[{"FileBaseName", "[", 
        RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", 
       "\"\<.wlt\>\""}]}], "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pacletDir", "=", 
   RowBox[{"DirectoryName", "[", 
    RowBox[{"testFileName", ",", "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PacletDirectoryLoad", "[", "pacletDir", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"testContextBase", "=", 
   RowBox[{"FileBaseName", "[", "testFileName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$ContextPath", "=", 
   RowBox[{"Cases", "[", 
    RowBox[{"$ContextPath", ",", 
     RowBox[{"Except", "[", "\"\<PacletizedResourceFunctions`\>\"", "]"}]}], 
    "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.8890661685133457`*^9, 3.889066220685074*^9}, {
   3.8890662555512333`*^9, 3.889066299901951*^9}, {3.889066581166473*^9, 
   3.8890665847967653`*^9}, {3.889066731765956*^9, 3.889066745674687*^9}, {
   3.889431410824514*^9, 3.88943144002302*^9}, 3.889502968269744*^9, {
   3.889998928469849*^9, 3.889998928670561*^9}, {3.890676553021196*^9, 
   3.890676564028514*^9}, 3.890676636594749*^9, {3.890679618620262*^9, 
   3.89067961902995*^9}, {3.8908254134370813`*^9, 3.890825413876319*^9}, {
   3.890825459205497*^9, 3.890825473041605*^9}, {3.890825503118348*^9, 
   3.8908255374530487`*^9}, {3.891021675325671*^9, 3.891021675545487*^9}, {
   3.8911588731924877`*^9, 3.891158877904397*^9}, {3.8911592499395514`*^9, 
   3.8911592502376633`*^9}, {3.891250905264741*^9, 3.891250915510642*^9}},
 CellLabel->"In[10]:=",ExpressionUUID->"0360f784-d335-43f3-8e4d-2bba830763e2"],

Cell[CellGroupData[{

Cell["CI Tests", "Subsection",
 CellChangeTimes->{{3.8895791922306013`*^9, 3.889579196409403*^9}, {
  3.889905620469079*^9, 3.8899056207707977`*^9}, {3.889967624152501*^9, 
  3.889967626012704*^9}},ExpressionUUID->"31e1b2df-6c38-4738-ae7d-\
157759dc5a90"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"FileNames", "[", "testFileName", "]"}], "===", 
     RowBox[{"{", "}"}]}], ",", "Nothing", ",", 
    RowBox[{"DeleteFile", "[", "testFileName", "]"}]}], "]"}], ";"}]], "Input",\

 CellLabel->"In[6]:=",ExpressionUUID->"464119fe-5b46-4abb-930f-1de6d0c0c7ec"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"confirm", "=", "False"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"testContext", "=", 
  RowBox[{
  "\"\<FernandoDuarte`LongRunRisk`Model`\>\"", "<>", "testContextBase", "<>", 
   "\"\<`\>\""}]}]}], "Input",
 CellChangeTimes->{{3.8906795325443907`*^9, 3.8906795357982817`*^9}, 
   3.890679566064293*^9, {3.8906796081672497`*^9, 3.8906796258061447`*^9}, {
   3.890679757679096*^9, 3.890679766260743*^9}, 3.890679874010334*^9, {
   3.89115778716877*^9, 3.8911577875972347`*^9}, {3.891158046655726*^9, 
   3.8911580470847473`*^9}, {3.8912509099668617`*^9, 
   3.8912509132288647`*^9}, {3.89164129470868*^9, 3.891641295139255*^9}, {
   3.8917057583850603`*^9, 3.891705758834621*^9}, {3.8917059158307037`*^9, 
   3.891705917269414*^9}, {3.8917066708409977`*^9, 3.8917066712983313`*^9}},
 CellLabel->"In[7]:=",ExpressionUUID->"c66ba99e-d8d1-4f03-a4ff-e02a4a612fbe"],

Cell[BoxData[
 RowBox[{"Begin", "[", "\"\<ProcessModels`\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.890680288696157*^9, 3.8906802887021513`*^9}, 
   3.891157128406151*^9},
 CellLabel->"In[9]:=",ExpressionUUID->"e0c56802-23a4-4683-930d-2f72f95927a4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
    "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{
    "Needs", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
     "]"}], ";"}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.8899652151465197`*^9, 3.889965235350771*^9}, 
   3.8899652808817787`*^9, {3.889967731242805*^9, 3.8899677356636972`*^9}, {
   3.889967971867523*^9, 3.889967975146998*^9}, {3.889968339451161*^9, 
   3.88996834001075*^9}, 3.889968619774049*^9, {3.8899688826075077`*^9, 
   3.88996888992594*^9}, {3.88996899475625*^9, 3.8899690018858624`*^9}, {
   3.8899691256166267`*^9, 3.8899691257757883`*^9}, {3.889969207667478*^9, 
   3.8899692141700287`*^9}, {3.8899692798779783`*^9, 3.889969288274632*^9}, 
   3.889969387087708*^9, 3.889969585993528*^9, {3.8899702972149563`*^9, 
   3.889970314454108*^9}, {3.890603045806611*^9, 3.890603046578224*^9}, 
   3.890603139674321*^9, {3.890676572733183*^9, 3.890676585108572*^9}, {
   3.890679071059198*^9, 3.890679121055434*^9}, {3.89067917308251*^9, 
   3.890679177122958*^9}, 3.890679328121275*^9, {3.8906795122187853`*^9, 
   3.890679514391316*^9}, {3.890679606901452*^9, 3.8906796293121653`*^9}, {
   3.890679668768669*^9, 3.890679669902752*^9}, {3.8906797200186*^9, 
   3.890679786626452*^9}, {3.890679828108779*^9, 3.890679882954316*^9}, {
   3.8911571592686443`*^9, 3.8911571682982073`*^9}, 3.891157792145975*^9, {
   3.891173222845828*^9, 3.8911732231089373`*^9}, {3.891173275033695*^9, 
   3.891173275304864*^9}, {3.891316564754774*^9, 3.8913166100337257`*^9}, {
   3.891852279447442*^9, 3.891852279736619*^9}, {3.893027061900147*^9, 
   3.89302706219648*^9}},
 CellLabel->"In[10]:=",ExpressionUUID->"df3441c2-82a3-4dc6-ae55-72fe028a7826"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", "\t", 
   RowBox[{"And", "@@", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"MemberQ", "[", 
       RowBox[{
       "$ContextPath", ",", 
        "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\""}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"MemberQ", "[", 
       RowBox[{
       "$ContextPath", ",", 
        "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\""}], "]"}]}], 
     "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{
  3.889901579125684*^9, {3.889965035911569*^9, 3.889965039550325*^9}, {
   3.889965296152458*^9, 3.889965305191854*^9}, 3.8899653858152437`*^9, 
   3.889967740469187*^9, {3.889968345370779*^9, 3.889968347169169*^9}, {
   3.889968526692542*^9, 3.8899685355316963`*^9}, {3.889968649261517*^9, 
   3.889968660343141*^9}, 3.889969395693264*^9, {3.88996958684683*^9, 
   3.8899695947482367`*^9}, {3.889970300225127*^9, 3.889970329366473*^9}, {
   3.890603050754869*^9, 3.8906030512673264`*^9}, 3.890603142316881*^9, 
   3.89067659639168*^9, {3.890679255090239*^9, 3.890679318737549*^9}, 
   3.890679634337233*^9, 3.890679895680545*^9, {3.891157174045011*^9, 
   3.891157185913196*^9}, 3.8911577932659283`*^9},
 CellLabel->"In[11]:=",ExpressionUUID->"37a69960-4a4b-47f2-bed8-e68905e00bd9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{
     "should", " ", "be", " ", "True", " ", "if", " ", "processModels"}], ",",
      " ", 
     RowBox[{"models", " ", "can", " ", "be", " ", "found"}]}], "*)"}], 
   "\[IndentingNewLine]", "\t", 
   RowBox[{"And", "@@", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Not", "[", 
       RowBox[{
        RowBox[{"Names", "[", "\"\<*processModels\>\"", "]"}], "===", 
        RowBox[{"{", "}"}]}], "]"}], ",", 
      RowBox[{"Not", "[", 
       RowBox[{
        RowBox[{"Names", "[", "\"\<*models\>\"", "]"}], "===", 
        RowBox[{"{", "}"}]}], "]"}]}], "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.8899706175264597`*^9, 3.889970628972746*^9}, 
   3.889972029349813*^9, {3.890016004516365*^9, 3.890016008058874*^9}, {
   3.890679266281045*^9, 3.8906792665642843`*^9}, {3.89067933542416*^9, 
   3.890679337313949*^9}, {3.8911571916035423`*^9, 3.891157220658489*^9}, {
   3.891157734825952*^9, 3.891157748683607*^9}, 3.891157795291888*^9},
 CellLabel->"In[12]:=",ExpressionUUID->"78efcfa0-e9fa-47a2-9b51-782cbea2e41b"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"models", "=", " ", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"$ContextPath", " ", "=", " ", 
        RowBox[{"{", "}"}]}], "}"}], ",", " ", 
      RowBox[{"SetSymbolsContext", "[", "models", "]"}]}], "]"}]}], ";"}], 
  "*)"}]], "Input",
 CellChangeTimes->{3.8913169005664043`*^9},
 CellLabel->"In[13]:=",ExpressionUUID->"cb607e00-5967-477a-8aac-14f80aff48c4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"modelsP", "=", 
      RowBox[{"processModels", "[", "models", "]"}]}], ";"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ms", "=", 
     RowBox[{"KeySelect", "[", 
      RowBox[{"models", ",", 
       RowBox[{
        RowBox[{"MatchQ", "[", 
         RowBox[{"#", ",", 
          RowBox[{
          "\"\<BKY\>\"", "|", "\"\<NRC\>\"", " ", "|", " ", "\"\<BY\>\""}]}], 
         " ", "]"}], "&"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"modelsP", "=", 
     RowBox[{"processModels", "[", "ms", "]"}]}], ";"}], 
   "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.893003987314953*^9, 3.893004026425699*^9}, {
  3.8930271154371367`*^9, 3.893027117019199*^9}, {3.893027228841988*^9, 
  3.893027229065291*^9}, {3.8931053429292316`*^9, 3.893105351371242*^9}, {
  3.8931452041797323`*^9, 3.8931452049130917`*^9}},
 CellLabel->"In[14]:=",ExpressionUUID->"0c1d9ae2-0329-4b69-96aa-5f6aff9fa9f6"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Keys", " ", "are", " ", "strings"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"(", 
     RowBox[{"StringQ", "/@", 
      RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], "\[IndentingNewLine]",
    ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{
  3.89000889839254*^9, {3.890016339728188*^9, 3.890016342139681*^9}, 
   3.891251908164126*^9, {3.8930041333335657`*^9, 3.8930041384325933`*^9}, {
   3.893027123262117*^9, 3.893027123521834*^9}, {3.8930272322165318`*^9, 
   3.8930272325266247`*^9}},
 CellLabel->"In[15]:=",ExpressionUUID->"d64570f0-6c89-4079-b190-d3b7918e15ff"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"string", " ", "fields"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"(", 
     RowBox[{"StringQ", "/@", 
      RowBox[{"Flatten", "@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<name\>\"", "]"}], 
            ",", 
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<shortname\>\"", 
             "]"}], ",", 
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<bibRef\>\"", "]"}],
             ",", 
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<desc\>\"", "]"}], 
            ",", 
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<exogenousVars\>\"",
              "]"}], ",", 
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", 
             "\"\<endogenousVars\>\"", "]"}]}], "}"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], ")"}]}], 
   "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.890008770382118*^9, 3.890008858894733*^9}, {
   3.890016345133547*^9, 3.8900163569166937`*^9}, {3.891251925999875*^9, 
   3.891251929267716*^9}, {3.89300415697269*^9, 3.893004157463492*^9}, {
   3.8930148354335337`*^9, 3.893014849329674*^9}, {3.893027125239276*^9, 
   3.893027125482437*^9}, 3.893027240252756*^9},
 CellLabel->"In[16]:=",ExpressionUUID->"2c5d8084-fdbc-4107-ac9f-d8d95c9c2236"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"parameters", " ", "evaluate", " ", "to", " ", "numbers"}], 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{"NumberQ", "/@", 
         RowBox[{"Flatten", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Values", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"Association", "@", 
                RowBox[{
                 RowBox[{"models", "[", "#", "]"}], "[", "\"\<parameters\>\"",
                  "]"}]}], "//.", 
               RowBox[{
                RowBox[{"models", "[", "#", "]"}], "[", "\"\<parameters\>\"", 
                "]"}]}], "//", "N"}], "]"}], "&"}], "/@", 
           RowBox[{"(", 
            RowBox[{"Keys", "@", "models"}], ")"}]}], "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{"NumberQ", "/@", 
         RowBox[{"Flatten", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Values", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"Association", "@", 
                RowBox[{
                 RowBox[{"modelsP", "[", "#", "]"}], "[", 
                 "\"\<parameters\>\"", "]"}]}], "//.", 
               RowBox[{
                RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<parameters\>\"",
                 "]"}]}], "//", "N"}], "]"}], "&"}], "/@", 
           RowBox[{"(", 
            RowBox[{"Keys", "@", "modelsP"}], ")"}]}], "]"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.890008965671461*^9, 3.8900089726778793`*^9}, {
   3.8900090147612762`*^9, 3.890009193827691*^9}, 3.8900101461421833`*^9, 
   3.890015540563738*^9, {3.8900156352184877`*^9, 3.89001567714233*^9}, 
   3.8912519303524723`*^9, {3.891640840825358*^9, 3.8916408678776903`*^9}, {
   3.89164090174683*^9, 3.8916409201814632`*^9}, 3.892974136542371*^9, {
   3.89300417575723*^9, 3.893004176318849*^9}, {3.8930271288709583`*^9, 
   3.893027132853774*^9}, {3.893027244975909*^9, 3.8930272548041477`*^9}},
 CellLabel->"In[17]:=",ExpressionUUID->"ce8ab224-5505-4d6e-9748-27f603f00530"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"can", " ", "find", " ", "some", " ", "models"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MemberQ", "[", 
           RowBox[{
            RowBox[{"Keys", "[", "models", "]"}], ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"{", 
          RowBox[{"\"\<BY\>\"", ",", "\"\<BKY\>\""}], "}"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MemberQ", "[", 
           RowBox[{
            RowBox[{"Keys", "[", "modelsP", "]"}], ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Keys", "@", "modelsP"}], ")"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.8900087062162313`*^9, 3.890008740193614*^9}, {
   3.89001637048425*^9, 3.890016372993977*^9}, 3.8912519320207787`*^9, {
   3.891640927230764*^9, 3.891640929613118*^9}, 3.892974170435498*^9, {
   3.893004184988491*^9, 3.8930041852126703`*^9}, 3.8930271448468523`*^9, {
   3.893027262255954*^9, 3.893027282450307*^9}},
 CellLabel->"In[18]:=",ExpressionUUID->"2b15a034-f304-4f7e-9d25-63e3f1ab5487"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"models", ",", " ", 
       RowBox[{"modelsP", " ", "are", " ", "associations"}]}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"AllTrue", "[", 
       RowBox[{"models", ",", "AssociationQ"}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"AllTrue", "[", 
       RowBox[{"modelsP", ",", "AssociationQ"}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"each", " ", "model", " ", "inside", " ", "models"}], ",", 
        " ", 
        RowBox[{
        "modelsP", " ", "are", " ", "themselves", " ", "an", " ", 
         "association"}]}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"AllTrue", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"models", "[", "#", "]"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "models", "]"}]}], ",", "AssociationQ"}], "]"}],
       ",", "\[IndentingNewLine]", 
      RowBox[{"AllTrue", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"modelsP", "[", "#", "]"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ",", "AssociationQ"}], 
       "]"}]}], "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.8900086430073547`*^9, 3.890008684982678*^9}, {
   3.890010177349143*^9, 3.890010179091837*^9}, {3.8900163791247263`*^9, 
   3.890016449580503*^9}, {3.891251933188879*^9, 3.891251935189865*^9}, {
   3.891640937075639*^9, 3.891640945348556*^9}, {3.893004194158003*^9, 
   3.893004229582778*^9}, 3.89302714797476*^9, {3.893027270984724*^9, 
   3.893027285376198*^9}},
 CellLabel->"In[19]:=",ExpressionUUID->"19926fe5-c4d1-4650-9995-919a3c44044f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "all", " ", "exogenous", " ", "variables", " ", "are", " ", "in", " ", 
     "context", " ", 
     "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<stateVars\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\
\""}], ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<stateVars\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                  "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<modelAssumptions\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\
\""}], ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<modelAssumptions\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                  "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<exogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\
\""}], ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<exogenousEq\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                  "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<endogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\
\""}], ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                  "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.893001201934902*^9, 3.893001214021667*^9}, {
   3.893001245798745*^9, 3.8930012743606873`*^9}, {3.893001352341578*^9, 
   3.893001386197197*^9}, {3.893001448430169*^9, 3.893001448726687*^9}, 
   3.8930026482885447`*^9, {3.8930042711283293`*^9, 3.8930042721384*^9}, {
   3.89301215129099*^9, 3.893012163688088*^9}, {3.893014370482971*^9, 
   3.893014438233089*^9}, {3.893014486322825*^9, 3.893014499135116*^9}, {
   3.893014551885273*^9, 3.893014565016636*^9}, 3.893016122561097*^9, 
   3.893027149143408*^9, {3.893027292962989*^9, 3.893027295449093*^9}},
 CellLabel->"In[20]:=",ExpressionUUID->"1e140797-a692-49c2-9b2b-5f4c15874357"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "all", " ", "shocks", " ", "are", " ", "in", " ", "context", " ", 
     "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<stateVars\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], ")"}], 
               "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<stateVars\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                    "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
                 "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<modelAssumptions\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], ")"}], 
               "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<modelAssumptions\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                    "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
                 "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<exogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], ")"}], 
               "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<exogenousEq\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                    "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
                 "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<endogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], ")"}], 
               "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                    "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
                 "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{
  3.893001499960679*^9, {3.893002667440094*^9, 3.89300269939427*^9}, {
   3.893003083367228*^9, 3.893003083692607*^9}, {3.8930042730060863`*^9, 
   3.893004273989354*^9}, {3.893012064247108*^9, 3.8930120867411222`*^9}, {
   3.893014419748905*^9, 3.893014445806767*^9}, {3.893014573318915*^9, 
   3.893014592005512*^9}, 3.893027154979233*^9, 3.893027301110894*^9},
 CellLabel->"In[21]:=",ExpressionUUID->"87988790-43a9-4e61-8178-c645affb741e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "all", " ", "parameters", " ", "are", " ", "in", " ", "context", " ", 
     "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<parameters\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
                ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<parameters\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
               ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<stateVars\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
                ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<stateVars\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
               ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<modelAssumptions\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
                ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<modelAssumptions\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
               ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<exogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
                ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<exogenousEq\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
               ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<endogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
                ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
               ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{
  3.893001501399847*^9, {3.893002703969759*^9, 3.893002740019191*^9}, {
   3.893003056880762*^9, 3.893003109272599*^9}, {3.893003787588058*^9, 
   3.893003788104986*^9}, {3.893004274886281*^9, 3.893004277331174*^9}, {
   3.893012058196281*^9, 3.893012058639546*^9}, {3.8930144234979*^9, 
   3.8930144532880163`*^9}, {3.8930146005691023`*^9, 3.893014621517111*^9}, 
   3.893016128067835*^9, 3.893027157544302*^9, 3.893027305757145*^9},
 CellLabel->"In[22]:=",ExpressionUUID->"5ba1a080-37af-4559-8675-5356610aa871"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "all", " ", "endogenous", " ", "variables", " ", "are", " ", "in", " ", 
     "context", " ", 
     "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\""}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\"\<modelAssumptions\>\"", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\
\""}], ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<modelAssumptions\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                  "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<endogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                "#", "===", 
                 "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\
\""}], ")"}], "&"}], "/@", 
              RowBox[{"(", 
               RowBox[{"Context", "/@", 
                RowBox[{"Cases", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                  "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.8930122537493258`*^9, 3.893012300221422*^9}, {
   3.893014429011052*^9, 3.893014460982974*^9}, {3.893014634019079*^9, 
   3.893014636342099*^9}, {3.893014692448086*^9, 3.89301469383664*^9}, {
   3.893014770636636*^9, 3.893014779588964*^9}, 3.893027162806097*^9, 
   3.8930273091238203`*^9},
 CellLabel->"In[23]:=",ExpressionUUID->"ef80abef-2c56-4f05-b149-7ef948f31da2"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"all", " ", "coefficients", " ", "of", " ", "wc"}], ",", " ", 
     "pd", ",", " ", 
     RowBox[{
     "bond", " ", "ratios", " ", "are", " ", "in", " ", "context", " ", 
      "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\""}]}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"coefs", "=", 
     RowBox[{"Alternatives", "@@", 
      RowBox[{"SymbolName", "/@", 
       RowBox[{"{", 
        RowBox[{
        "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`coefwc", ",", 
         RowBox[{
         "Head", "@", 
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`coefpd"}], 
         ",", 
         RowBox[{
         "Head", "@", 
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`coefb"}], 
         ",", 
         RowBox[{
         "Head", "@", 
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`coefnb"}]}], 
        "}"}]}]}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"And", "@@", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
         "#", "===", 
          "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\""}], 
         ")"}], "&"}], "/@", 
       RowBox[{"Flatten", "@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"Cases", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"modelsP", "[", "#", "]"}], "[", 
              "\"\<modelAssumptions\>\"", "]"}], ",", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"var_Symbol", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", "coefs"}], 
                    "]"}], "&"}], ")"}]}], "|", 
                RowBox[{
                 RowBox[{"var_Symbol", "?", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", "coefs"}], 
                    "]"}], "&"}], ")"}]}], "[", "__", "]"}]}], ")"}], ":>", 
              RowBox[{"Context", "[", "var", "]"}]}], ",", "Infinity"}], 
            "]"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], ")"}]}]}], 
   "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.893012389695546*^9, 3.893012429793953*^9}, {
   3.893012999712995*^9, 3.893013013257292*^9}, 3.893027168767529*^9, 
   3.89302731516646*^9},
 CellLabel->"In[24]:=",ExpressionUUID->"81f0314f-983a-4f35-94ac-9304a10f36a3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "should", " ", "not", " ", "have", " ", "any", " ", "endogenous", " ", 
     "variables"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\"\<stateVars\>\"", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
            RowBox[{"{", "}"}], ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"Cases", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
               "]"}], ",", 
              RowBox[{
               RowBox[{
                RowBox[{"var_Symbol", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                  ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}],
              "]"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", "\"\<exogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
            RowBox[{"{", "}"}], ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"Cases", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<exogenousEq\>\"",
                "]"}], ",", 
              RowBox[{
               RowBox[{
                RowBox[{"var_Symbol", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                  ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}],
              "]"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.89300111387222*^9, 3.8930011727459707`*^9}, {
   3.893001247830225*^9, 3.893001299678648*^9}, {3.893001353751255*^9, 
   3.8930015072417727`*^9}, {3.893002707727394*^9, 3.893002708411419*^9}, {
   3.893002748062245*^9, 3.893002826831513*^9}, 3.89300297523416*^9, {
   3.893003086535989*^9, 3.893003086763905*^9}, {3.8930042788551702`*^9, 
   3.893004279626916*^9}, {3.8930147061742983`*^9, 3.8930147624521227`*^9}, 
   3.893027171825409*^9, 3.893027320855521*^9},
 CellLabel->"In[25]:=",ExpressionUUID->"725929c0-e672-42a1-adf0-1f1427f6f63b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "keys", " ", "and", " ", "shortname", " ", "are", " ", "preserved"}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", "\[IndentingNewLine]", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"SubsetQ", "[", 
       RowBox[{
        RowBox[{"Keys", "[", "models", "]"}], ",", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"SubsetQ", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"models", "[", "#", "]"}], "[", "\"\<shortname\>\"", "]"}],
           "&"}], "/@", 
         RowBox[{"Keys", "[", "models", "]"}]}], ",", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<shortname\>\"", 
           "]"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}]}], "]"}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.89301161589116*^9, 3.893011697195755*^9}, 
   3.8930271750973*^9, 3.893027322877461*^9, 3.893144799365404*^9},
 CellLabel->"In[26]:=",ExpressionUUID->"a20999be-298b-4767-9b2b-66ebc0f4bed8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "stateVars", " ", "are", " ", "functions", " ", "of", " ", "one", " ", 
     "variable", " ", 
     RowBox[{"(", "time", ")"}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"Function", ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Head", "/@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
                "]"}], ")"}], "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"List", ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Head", "/@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{
                 RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"",
                  "]"}], "[", "t", "]"}], ")"}], "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"1", ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Length", "/@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{
                 RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"",
                  "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}], ")"}], "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"\"\<t\>\"", ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{"SymbolName", "@@", 
              RowBox[{
               RowBox[{
                RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
                "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}]}], ")"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "evaluating", " ", "the", " ", "function", " ", "at", " ", 
        "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`t", " ", 
        "gives", " ", "the", " ", "same", " ", "as", " ", "\"\<stateVars\>\"",
         " ", "in", " ", "models"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
             "]"}], "[", 
            "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`t", "]"}], 
           ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}], "===", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"models", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
            "]"}], ")"}], "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.893011149678734*^9, 3.893011151120873*^9}, {
   3.893011197672791*^9, 3.893011393092401*^9}, {3.8930114244175577`*^9, 
   3.893011594633165*^9}, {3.893011701053651*^9, 3.89301170872368*^9}, {
   3.8930117913212442`*^9, 3.893011831744893*^9}, 3.893013045538563*^9, 
   3.893027177302371*^9, 3.89302732535247*^9, 3.893144899211803*^9},
 CellLabel->"In[27]:=",ExpressionUUID->"a3f64af9-a0ab-44c4-b3b2-109b0dd55536"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"numStocks", " ", "is", " ", "a", " ", "number"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"(", 
     RowBox[{"NumberQ", "/@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<numStocks\>\"", "]"}],
          "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Keys", "@", "modelsP"}], ")"}]}], ")"}]}], ")"}]}], 
   "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.893011853833601*^9, 3.893011940133402*^9}, 
   3.893027178823254*^9, 3.893027328757538*^9},
 CellLabel->"In[28]:=",ExpressionUUID->"d936375e-497e-40de-957c-ccbe13fec420"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"compare", " ", "to", " ", "some", " ", "hand"}], "-", 
     RowBox[{
     "written", " ", "expressions", " ", "known", " ", "to", " ", "be", " ", 
      "correct"}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"model", "=", 
     RowBox[{"modelsP", "[", "\"\<NRC\>\"", "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"And", "@@", 
     RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"pi", "[", "myContext`t", "]"}], "/.", 
          RowBox[{"Normal", "@", 
           RowBox[{"model", "[", "\"\<exogenousEq\>\"", "]"}]}]}], ")"}], "===", 
        RowBox[{"(", 
         RowBox[{"FernandoDuarte`LongRunRisk`Model`Parameters`mup", "+", 
          RowBox[{"FernandoDuarte`LongRunRisk`Model`Parameters`rhop", " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`mup"}],
              "+", 
             RowBox[{
             "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", 
              RowBox[{
               RowBox[{"-", "1"}], "+", "myContext`t"}], "]"}]}], ")"}]}], 
          "+", 
          RowBox[{"FernandoDuarte`LongRunRisk`Model`Parameters`xip", " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
             "]"}], "[", 
            RowBox[{
             RowBox[{"-", "1"}], "+", "myContext`t"}], "]"}]}], "+", 
          RowBox[{"FernandoDuarte`LongRunRisk`Model`Parameters`phip", " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
             "]"}], "[", "myContext`t", "]"}]}]}], ")"}]}], ",", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"eps", "[", "\"\<dc\>\"", "]"}], "[", "t", "]"}], "/.", 
          RowBox[{"model", "[", "\"\<exogenousEq\>\"", "]"}]}], ")"}], "===", 
        
        RowBox[{
         RowBox[{"eps", "[", "\"\<dc\>\"", "]"}], "[", "t", "]"}]}], ",", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"dd", "[", 
           RowBox[{"t", ",", "i"}], "]"}], "/.", 
          RowBox[{"Normal", "@", 
           RowBox[{"model", "[", "\"\<exogenousEq\>\"", "]"}]}]}], ")"}], "===", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`Parameters`mud", "[", "i", "]"}], 
          "+", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`mup"}],
              "+", 
             RowBox[{
             "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", 
              RowBox[{
               RowBox[{"-", "1"}], "+", "t"}], "]"}]}], ")"}], " ", 
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Parameters`rhodp", "[", "i", 
            "]"}]}], "+", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Parameters`phidc", "[", "i", 
            "]"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<dc\>\"", 
             "]"}], "[", "t", "]"}]}], "+", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
            RowBox[{
             RowBox[{"-", "2"}], "+", "t"}], "]"}], " ", 
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Parameters`xid", "[", "i", "]"}],
            " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
             "]"}], "[", 
            RowBox[{
             RowBox[{"-", "1"}], "+", "t"}], "]"}]}]}], ")"}]}], ",", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"wc", "[", "t", "]"}], "/.", 
          RowBox[{"Normal", "@", 
           RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], ")"}], "===", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", "0",
            "]"}], "+", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "1", "]"}], " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`mup"}],
              "+", 
             RowBox[{
             "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", 
              "t", "]"}]}], ")"}]}], "+", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "4", "]"}], " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`Esg"}],
              "+", 
             RowBox[{
             "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
              "t", "]"}]}], ")"}]}], "+", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "5", "]"}], " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", 
              
              SuperscriptBox[
               "FernandoDuarte`LongRunRisk`Model`Parameters`Esg", "2"]}], "-", 
             FractionBox[
              
              SuperscriptBox[
               "FernandoDuarte`LongRunRisk`Model`Parameters`phig", "2"], 
              RowBox[{"1", "-", 
               
               SuperscriptBox[
                "FernandoDuarte`LongRunRisk`Model`Parameters`rhog", "2"]}]], 
             "+", 
             SuperscriptBox[
              RowBox[{
              "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
               "t", "]"}], "2"]}], ")"}]}], "+", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "3", "]"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
             "]"}], "[", "t", "]"}]}], "+", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "2", "]"}], " ", 
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
            RowBox[{
             RowBox[{"-", "1"}], "+", "t"}], "]"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
             "]"}], "[", "t", "]"}]}]}], ")"}]}], ",", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"pd", "[", 
           RowBox[{"t", ",", "i"}], "]"}], "/.", 
          RowBox[{"Normal", "@", 
           RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], ")"}], "===", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
            "i", "]"}], "[", "0", "]"}], "+", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`mup"}],
              "+", 
             RowBox[{
             "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", 
              "t", "]"}]}], ")"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
             "i", "]"}], "[", "1", "]"}]}], "+", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`Esg"}],
              "+", 
             RowBox[{
             "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
              "t", "]"}]}], ")"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
             "i", "]"}], "[", "4", "]"}]}], "+", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", 
              SuperscriptBox[
               "FernandoDuarte`LongRunRisk`Model`Parameters`Esg", "2"]}], "-", 
             FractionBox[
              
              SuperscriptBox[
               "FernandoDuarte`LongRunRisk`Model`Parameters`phig", "2"], 
              RowBox[{"1", "-", 
               
               SuperscriptBox[
                "FernandoDuarte`LongRunRisk`Model`Parameters`rhog", "2"]}]], 
             "+", 
             SuperscriptBox[
              RowBox[{
              "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
               "t", "]"}], "2"]}], ")"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
             "i", "]"}], "[", "5", "]"}]}], "+", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
            RowBox[{
             RowBox[{"-", "1"}], "+", "t"}], "]"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
             "i", "]"}], "[", "2", "]"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
             "]"}], "[", "t", "]"}]}], "+", 
          RowBox[{
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
             "i", "]"}], "[", "3", "]"}], " ", 
           RowBox[{
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
             "]"}], "[", "t", "]"}]}]}], ")"}]}], ",", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"bondexcret", "[", 
           RowBox[{"t", ",", "i"}], "]"}], "/.", 
          RowBox[{"Normal", "@", 
           RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], ")"}], "===", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bondret", 
           "[", 
           RowBox[{"t", ",", "i", ",", "1"}], "]"}], "-", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bondyield", 
           "[", 
           RowBox[{
            RowBox[{
             RowBox[{"-", "1"}], "+", "t"}], ",", "1"}], "]"}]}], ")"}]}], 
       ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"bondexcret", "[", 
            RowBox[{"t", ",", "i"}], "]"}], "/.", 
           RowBox[{"Normal", "@", 
            RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], "/.", 
          RowBox[{"Normal", "@", 
           RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], ")"}], "===", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bond", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"-", "1"}], "+", "t"}], ",", "1"}], "]"}], "-", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bond", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"-", "1"}], "+", "t"}], ",", "i"}], "]"}], "+", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bond", "[", 
           RowBox[{"t", ",", 
            RowBox[{
             RowBox[{"-", "1"}], "+", "i"}]}], "]"}]}], ")"}]}]}], 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "}"}]}]}], 
   "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.893013112707829*^9, 3.8930131579451036`*^9}, {
   3.89301319949829*^9, 3.8930132312916937`*^9}, {3.893014937931109*^9, 
   3.893015014205209*^9}, {3.8930150778885803`*^9, 3.893015081667938*^9}, 
   3.8930161054031553`*^9, 3.893016326710898*^9, {3.893016391754463*^9, 
   3.893016409333332*^9}, 3.893027182376034*^9, 3.893027336541357*^9},
 CellLabel->"In[29]:=",ExpressionUUID->"140d7fd9-ef09-440e-be4b-3d323ff6adc5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
     "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "no", " ", 
     "endogenous", " ", "variables"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", " ", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
            RowBox[{"{", "}"}], ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"Cases", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"wc", "[", "t", "]"}], "//.", 
               RowBox[{"Normal", "@", 
                RowBox[{
                 RowBox[{"modelsP", "[", "#", "]"}], "[", 
                 "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
              RowBox[{
               RowBox[{
                RowBox[{"var_Symbol", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                  ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}],
              "]"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], 
        "\[IndentingNewLine]", ")"}]}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
        "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "exogenous", 
        " ", "variables", " ", "that", " ", "are", " ", "all", " ", "in", " ",
         "context", " ", 
        "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}], 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
           "#", ",", 
            "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}],
            "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"Cases", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"wc", "[", "t", "]"}], "//.", 
                 RowBox[{"Normal", "@", 
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
                RowBox[{
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", 
                 RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
              "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
        "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "parameters", 
        " ", "that", " ", "are", " ", "all", " ", "in", " ", "context", " ", 
        "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
           "#", ",", "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}],
            "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"Cases", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"wc", "[", "t", "]"}], "//.", 
                 RowBox[{"Normal", "@", 
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
                RowBox[{
                 RowBox[{"var_Symbol", "?", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                   ")"}]}], ":>", 
                 RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
              "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
        "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "shocks", " ", 
        "that", " ", "are", " ", "all", " ", "in", " ", "context", " ", 
        "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
           "#", ",", "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], 
           "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"Cases", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"wc", "[", "t", "]"}], "//.", 
                 RowBox[{"Normal", "@", 
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                  "[", "__", "]"}], ":>", 
                 RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
              "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}]}], "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.893013644050221*^9, 3.8930136594716587`*^9}, {
   3.893013788159135*^9, 3.8930139106431017`*^9}, {3.89301401209753*^9, 
   3.893014103933299*^9}, {3.893014148442313*^9, 3.8930142719501123`*^9}, 
   3.893027186585471*^9, 3.893027342828599*^9},
 CellLabel->"In[30]:=",ExpressionUUID->"48b7a866-608c-4752-acf2-21754b711ce9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
     "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "no", " ", 
     "endogenous", " ", "variables"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", " ", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
            RowBox[{"{", "}"}], ",", "#"}], "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"Cases", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"bondexcret", "[", 
                RowBox[{"t", ",", "i"}], "]"}], "//.", 
               RowBox[{"Normal", "@", 
                RowBox[{
                 RowBox[{"modelsP", "[", "#", "]"}], "[", 
                 "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
              RowBox[{
               RowBox[{
                RowBox[{"var_Symbol", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                  ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}],
              "]"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], 
        "\[IndentingNewLine]", ")"}]}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
        "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "exogenous", 
        " ", "variables", " ", "that", " ", "are", " ", "all", " ", "in", " ",
         "context", " ", 
        "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}], 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
           "#", ",", 
            "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}],
            "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"Cases", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"bondexcret", "[", 
                  RowBox[{"t", ",", "i"}], "]"}], "//.", 
                 RowBox[{"Normal", "@", 
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
                RowBox[{
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", 
                 RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
              "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
        "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "parameters", 
        " ", "that", " ", "are", " ", "all", " ", "in", " ", "context", " ", 
        "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
           "#", ",", "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}],
            "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"Cases", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"bondexcret", "[", 
                  RowBox[{"t", ",", "i"}], "]"}], "//.", 
                 RowBox[{"Normal", "@", 
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
                RowBox[{
                 RowBox[{"var_Symbol", "?", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                   ")"}]}], ":>", 
                 RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
              "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
        "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "shocks", " ", 
        "that", " ", "are", " ", "all", " ", "in", " ", "context", " ", 
        "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
           "#", ",", "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], 
           "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"Cases", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"bondexcret", "[", 
                  RowBox[{"t", ",", "i"}], "]"}], "//.", 
                 RowBox[{"Normal", "@", 
                  RowBox[{
                   RowBox[{"modelsP", "[", "#", "]"}], "[", 
                   "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                  "[", "__", "]"}], ":>", 
                 RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
              "&"}], "/@", 
             RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
        ")"}]}]}], "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.893013644050221*^9, 3.8930136594716587`*^9}, {
   3.893013788159135*^9, 3.8930139106431017`*^9}, {3.89301401209753*^9, 
   3.893014103933299*^9}, {3.893014148442313*^9, 3.893014235255294*^9}, 
   3.893027190207966*^9, 3.8930273500561934`*^9},
 CellLabel->"In[31]:=",ExpressionUUID->"3974f54a-f4f6-42cb-a52a-c3f69fc48e4c"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
   RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
    RowBox[{"And", "@@", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"Head", "/@", 
          RowBox[{"(", 
           RowBox[{"Keys", "@", 
            RowBox[{
             RowBox[{"modelsP", "[", "\"\<BKY\>\"", "]"}], "[", 
             "\"\<exogenousEq\>\"", "]"}]}], ")"}]}], ",", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"#", ",", "PatternTest"}], "]"}], "&"}]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"Head", "/@", 
          RowBox[{"(", 
           RowBox[{"Keys", "@", 
            RowBox[{
             RowBox[{"modelsP", "[", "\"\<BKY\>\"", "]"}], "[", 
             "\"\<endogenousEq\>\"", "]"}]}], ")"}]}], ",", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"#", ",", "PatternTest"}], "]"}], "&"}]}], "]"}]}], 
      "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
    RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}], 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.891157496969887*^9, 3.891157544107942*^9}, {
   3.8929829100824947`*^9, 3.89298291390197*^9}, {3.892982949507678*^9, 
   3.8929829531624527`*^9}, {3.893016267044709*^9, 3.8930162995723467`*^9}, {
   3.893027194352297*^9, 3.893027208252322*^9}, 3.8930273522329617`*^9},
 CellLabel->"In[32]:=",ExpressionUUID->"41b1f503-97ce-4425-bb64-d6b2f0385419"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "exogenousEq", " ", "and", " ", "endogenousEq", " ", "evaluate", " ", 
     "expressions", " ", "that", " ", "are", " ", "exogenous", " ", "or", " ",
      "endogenous", " ", "variables"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{"Not", "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"Head", "[", 
               RowBox[{"dc", "[", "t", "]"}], "]"}], "===", 
              RowBox[{"Head", "[", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"dc", "[", "t", "]"}], "/.", 
                 RowBox[{"Normal", "[", 
                  RowBox[{"Join", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
               "]"}]}], ")"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{"Not", "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"Head", "[", 
               RowBox[{"dd", "[", 
                RowBox[{"t", ",", "i"}], "]"}], "]"}], "===", 
              RowBox[{"Head", "[", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"dd", "[", 
                  RowBox[{"t", ",", "i"}], "]"}], "/.", 
                 RowBox[{"Normal", "[", 
                  RowBox[{"Join", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
               "]"}]}], ")"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{"Not", "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"Head", "[", 
               RowBox[{"wc", "[", "t", "]"}], "]"}], "===", 
              RowBox[{"Head", "[", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"wc", "[", "t", "]"}], "/.", 
                 RowBox[{"Normal", "[", 
                  RowBox[{"Join", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
               "]"}]}], ")"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{"Not", "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"Head", "[", 
               RowBox[{"sdf", "[", "t", "]"}], "]"}], "===", 
              RowBox[{"Head", "[", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"sdf", "[", "t", "]"}], "/.", 
                 RowBox[{"Normal", "[", 
                  RowBox[{"Join", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
               "]"}]}], ")"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"And", "@@", 
       RowBox[{"(", 
        RowBox[{"Not", "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"Head", "[", 
               RowBox[{"bondyield", "[", "t", "]"}], "]"}], "===", 
              RowBox[{"Head", "[", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"bondyield", "[", "t", "]"}], "/.", 
                 RowBox[{"Normal", "[", 
                  RowBox[{"Join", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                    RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
               "]"}]}], ")"}], "&"}], "/@", 
           RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.89301559217407*^9, 3.893015822830755*^9}, {
   3.89301600860408*^9, 3.893016031968368*^9}, 3.893016149396062*^9, 
   3.89302721181734*^9, 3.893027356773507*^9, {3.893144986859014*^9, 
   3.8931449876901093`*^9}},
 CellLabel->"In[33]:=",ExpressionUUID->"30c4d933-59ab-4c6f-ac91-fbe51a928bb5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "exogenousEq", " ", "and", " ", "endogenousEq", " ", "do", " ", "not", 
     " ", "evaluate", " ", "expressions", " ", "that", " ", "are", " ", 
     "neither", " ", "exogenous", " ", "nor", " ", "endogenous", " ", 
     "variables"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"Head", "[", 
            RowBox[{"notVar", "[", "t", "]"}], "]"}], "===", 
           RowBox[{"Head", "[", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"notVar", "[", "t", "]"}], "/.", 
              RowBox[{"Normal", "[", 
               RowBox[{"Join", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<exogenousEq\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
            "]"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], 
     "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.893015849081943*^9, 3.8930158504172277`*^9}, 
   3.893016091706109*^9, 3.893027215640544*^9, 3.893027359790337*^9},
 CellLabel->"In[34]:=",ExpressionUUID->"5c1e30d2-8195-4e5b-9a64-378acb156acd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResourceFunction", "[", "\"\<WriteUnitTest\>\"", "]"}], "[", 
  RowBox[{"testFileName", ",", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "shortname", " ", "different", " ", "from", " ", "model", " ", "key"}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"modelBY", "=", 
     RowBox[{"models", "[", "\"\<BY\>\"", "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"modelBKY", "=", 
     RowBox[{"models", "[", "\"\<BKY\>\"", "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"newModels", "=", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<myModel\>\"", "->", "modelBKY"}], ",", 
       RowBox[{"\"\<BY\>\"", "->", "modelBY"}]}], "|>"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"newModelsSameName", "=", 
     RowBox[{"<|", 
      RowBox[{"\"\<BY\>\"", "->", "modelBY"}], "|>"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"newModelsRename", "=", 
     RowBox[{"<|", 
      RowBox[{"\"\<myModel\>\"", "->", "modelBY"}], "|>"}]}], ";", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"newModelsP", "=", 
     RowBox[{"processModels", "[", "newModels", "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"newModelsSameNameP", "=", 
     RowBox[{"processModels", "[", "newModelsSameName", "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"newModelsRenameP", "=", 
     RowBox[{"processModels", "[", "newModelsRename", "]"}]}], ";", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"And", "@@", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"newModelsP", "[", "\"\<myModel\>\"", "]"}], "===", 
        RowBox[{"modelsP", "[", "\"\<BKY\>\"", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"newModelsP", "[", "\"\<BY\>\"", "]"}], "===", 
        RowBox[{"modelsP", "[", "\"\<BY\>\"", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"newModelsSameNameP", "[", "\"\<BY\>\"", "]"}], "===", 
        RowBox[{"modelsP", "[", "\"\<BY\>\"", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"newModelsRenameP", "[", "\"\<myModel\>\"", "]"}], "===", 
        RowBox[{"modelsP", "[", "\"\<BY\>\"", "]"}]}]}], 
      "\[IndentingNewLine]", "}"}]}]}], "\[IndentingNewLine]", ",", 
   RowBox[{"\"\<ConfirmResults\>\"", "\[Rule]", "confirm"}]}], "]"}]], "Input",\

 CellChangeTimes->{{3.8912512942103243`*^9, 3.8912513055502443`*^9}, {
   3.8912513517340593`*^9, 3.891251461543272*^9}, {3.891251500422112*^9, 
   3.891251525384585*^9}, 3.891251633145433*^9, {3.891251727184629*^9, 
   3.8912517398515368`*^9}, {3.89125184158985*^9, 3.891251848736774*^9}, {
   3.891252152348381*^9, 3.891252165553775*^9}, 3.892982996244417*^9, 
   3.893016163280417*^9, 3.893027217304699*^9, 3.89302736245364*^9},
 CellLabel->"In[35]:=",ExpressionUUID->"623eb9c8-8fa8-49b6-8326-e888251e5b62"],

Cell[BoxData[
 RowBox[{"End", "[", "]"}]], "Input",
 CellChangeTimes->{{3.890680295645965*^9, 3.89068029650622*^9}},
 CellLabel->"In[36]:=",ExpressionUUID->"33ebf65e-6034-462e-bfb9-1324117a5073"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"add", " ", 
    RowBox[{"Begin", "[", "\"\<Context`\>\"", "]"}], " ", "and", " ", 
    RowBox[{"End", "[", "]"}], " ", "to", " ", "wlt", " ", "file"}], "*)"}], 
  "\n", 
  RowBox[{"(*", 
   RowBox[{"helper", " ", "functions"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"ClearAll", "[", "countLines", "]"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"countLines", "[", "file_String", "]"}], ":=", 
    RowBox[{"Module", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"readStream", "=", 
         RowBox[{"OpenRead", "[", "file", "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"n", "=", "1"}], ",", "\[IndentingNewLine]", "temp"}], 
       "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"While", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"temp", "=!=", "EndOfFile"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"temp", "=", 
           RowBox[{"ReadLine", "[", "readStream", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"n", "=", 
           RowBox[{"n", "+", "1"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"Close", "/@", 
        RowBox[{"{", "readStream", "}"}]}], ";", "\[IndentingNewLine]", 
       "n"}]}], "\[IndentingNewLine]", "]"}]}], "\n", 
   RowBox[{"ClearAll", "[", "replaceNthRecord", "]"}], "\[IndentingNewLine]", 
   
   RowBox[{
    RowBox[{"replaceNthRecord", "[", 
     RowBox[{"file_String", ",", "n_Integer", ",", "replaceWith_"}], "]"}], ":=", 
    RowBox[{"Module", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"readStream", "=", 
         RowBox[{"OpenRead", "[", "file", "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"writeStream", "=", 
         RowBox[{"OpenWrite", "[", 
          RowBox[{"file", "<>", "\"\<temp\>\""}], "]"}]}], ",", 
        "\[IndentingNewLine]", "temp"}], "\[IndentingNewLine]", "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"WriteLine", "[", 
          RowBox[{"writeStream", ",", 
           RowBox[{"ReadLine", "[", "readStream", "]"}]}], "]"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"n", "-", "1"}], "}"}]}], "\[IndentingNewLine]", "]"}], ";",
        "\[IndentingNewLine]", 
       RowBox[{"WriteLine", "[", 
        RowBox[{"writeStream", ",", 
         RowBox[{
          RowBox[{"ReadLine", "[", "readStream", "]"}], "<>", 
          "\"\< \\r\\n\>\"", "<>", "replaceWith"}]}], "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"While", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"temp", "=!=", "EndOfFile"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"temp", "=", 
           RowBox[{"ReadLine", "[", "readStream", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"If", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"UnsameQ", "[", 
             RowBox[{"temp", ",", "EndOfFile"}], "]"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"WriteLine", "[", 
             RowBox[{"writeStream", ",", "temp"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
        "]"}], ";", 
       RowBox[{"Close", "/@", 
        RowBox[{"{", 
         RowBox[{"readStream", ",", "writeStream"}], "}"}]}]}]}], "]"}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"insert", " ", "into", " ", "wlt", " ", "file"}], "*)"}], "\n", 
   RowBox[{"replaceNthRecord", "[", 
    RowBox[{
    "testFileName", ",", "1", ",", "\"\<Begin[\\\"ProcessModels`\\\"]\>\""}], 
    "]"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"CopyFile", "[", 
     RowBox[{
      RowBox[{"testFileName", "<>", "\"\<temp\>\""}], ",", "testFileName", 
      ",", 
      RowBox[{"OverwriteTarget", "->", "True"}]}], "]"}], ";"}], "\n", 
   RowBox[{"DeleteFile", "[", 
    RowBox[{"testFileName", "<>", "\"\<temp\>\""}], "]"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"numLines", "=", 
    RowBox[{"countLines", "[", "testFileName", "]"}]}], "\[IndentingNewLine]", 
   RowBox[{"replaceNthRecord", "[", 
    RowBox[{"testFileName", ",", 
     RowBox[{"numLines", "-", "3"}], ",", " ", "\"\<End[]\>\""}], "]"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"CopyFile", "[", 
     RowBox[{
      RowBox[{"testFileName", "<>", "\"\<temp\>\""}], ",", "testFileName", 
      ",", 
      RowBox[{"OverwriteTarget", "->", "True"}]}], "]"}], ";"}], "\n", 
   RowBox[{"DeleteFile", "[", 
    RowBox[{"testFileName", "<>", "\"\<temp\>\""}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.890686194230386*^9, 3.890686228283702*^9}, 
   3.8911593195689373`*^9},
 CellLabel->"In[37]:=",ExpressionUUID->"54483af6-5a40-4f54-bac7-293214472e69"]
}, Closed]],

Cell[CellGroupData[{

Cell["Interactive Tests", "Subsection",
 CellChangeTimes->{{3.889905622471089*^9, 3.889905629759961*^9}, {
  3.889972063478182*^9, 
  3.889972065236586*^9}},ExpressionUUID->"2c4a83cf-8af5-4d19-89ae-\
a864a258310f"],

Cell[BoxData[{
 RowBox[{"packageFileName", "=", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"DirectoryName", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
     "\"\<Kernel\>\"", ",", "\"\<Model\>\"", ",", 
     RowBox[{
      RowBox[{"FileBaseName", "[", 
       RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", "\"\<.wl\>\""}]}],
     "}"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Needs", "[", 
  RowBox[{
   RowBox[{"\"\<FernandoDuarte`LongRunRisk`Model`\>\"", "<>", 
    RowBox[{"FileBaseName", "[", 
     RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", "\"\<`\>\""}], ",", 
   "packageFileName"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", 
  "]"}]}], "Input",
 CellChangeTimes->{{3.889968360919714*^9, 3.889968361169221*^9}, {
   3.889998753242611*^9, 3.8899987613556004`*^9}, 3.890825576987958*^9, {
   3.890987450098063*^9, 3.8909874502616673`*^9}, {3.8934756468185673`*^9, 
   3.893475650004422*^9}},
 CellLabel->"In[6]:=",ExpressionUUID->"f275bdc7-d1c5-4b14-9c2f-42b3fa65a747"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"modelsP", "=", 
     RowBox[{"processModels", "[", "models", "]"}]}], ";"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"mm", "=", "models"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"subset", " ", "=", " ", 
     RowBox[{
     "\"\<BY\>\"", "|", "\"\<BKY\>\"", "|", "\"\<NRC\>\"", "|", 
      "\"\<WCratio\>\"", "|", "\"\<hassel\>\"", "|", "\"\<BS\>\"", "|", 
      "\"\<DES\>\""}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ms", "=", 
     RowBox[{"KeySelect", "[", 
      RowBox[{"mm", ",", 
       RowBox[{
        RowBox[{"MatchQ", "[", 
         RowBox[{"#", ",", " ", "subset"}], "]"}], "&"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"mi", "=", 
     RowBox[{"KeySelect", "[", 
      RowBox[{"modelsExtraInfo", ",", 
       RowBox[{
        RowBox[{"MatchQ", "[", 
         RowBox[{"#", ",", "subset"}], " ", "]"}], "&"}]}], "]"}]}], 
    ";"}]}]}]], "Input",
 CellChangeTimes->{{3.893003987314953*^9, 3.893004026425699*^9}, {
   3.8930856211076393`*^9, 3.893085624075651*^9}, {3.8931451899537*^9, 
   3.8931451945216627`*^9}, {3.8934757109210987`*^9, 3.893475715416621*^9}, {
   3.894796208784259*^9, 3.8947962740673447`*^9}, 3.894796381812685*^9, 
   3.8947967283672667`*^9, 3.894796997365782*^9, {3.894801758792932*^9, 
   3.894801782365992*^9}},
 CellLabel->"In[15]:=",ExpressionUUID->"2ad7219b-0cf9-4a4f-82a4-9b5a76ca6e33"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Models", " ", "=", " ", 
   RowBox[{"processModels", "[", 
    RowBox[{"ms", ",", "mi"}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.894798379205834*^9, 3.894798410574834*^9}, {
  3.8948015481951513`*^9, 3.894801548491693*^9}, {3.89480158478799*^9, 
  3.894801619887068*^9}},
 CellLabel->"In[19]:=",ExpressionUUID->"2d6258ca-ae99-44db-b189-16e9533eadb5"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"tempfile", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"DirectoryName", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
      "\"\<Temp\>\"", ",", "\"\<Models.mx\>\""}], "}"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"DumpSave", "[", 
   RowBox[{"tempfile", ",", "Models"}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.894798379205834*^9, 3.894798410574834*^9}, {
  3.8948015481951513`*^9, 3.894801548491693*^9}, {3.89480158478799*^9, 
  3.894801627699708*^9}},
 CellLabel->"In[20]:=",ExpressionUUID->"f59b0dd0-467a-4ed9-ad45-f903dc1925e0"],

Cell[BoxData[
 RowBox[{"Models", "[", "\"\<NRC\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.894801908942288*^9, 3.894801911601321*^9}},
 CellLabel->"In[22]:=",ExpressionUUID->"2db9a6e7-7e97-45f5-bcdc-1f403091d556"],

Cell[BoxData[{
 RowBox[{"tempfile", "=", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"DirectoryName", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
     "\"\<Temp\>\"", ",", "\"\<Models.mx\>\""}], "}"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Get", "[", "tempfile", "]"}]}], "Input",
 CellChangeTimes->{{3.894797364776422*^9, 3.894797382494391*^9}, {
  3.894797466935896*^9, 3.894797467144679*^9}, {3.894801703778757*^9, 
  3.894801704178009*^9}},
 CellLabel->"In[9]:=",ExpressionUUID->"a8de0466-aece-4fa6-b2a1-e2234051bf73"],

Cell[BoxData[
 RowBox[{
  RowBox[{"modelsP", "=", "Models"}], ";"}]], "Input",
 CellChangeTimes->{{3.8948019481620083`*^9, 3.89480195378376*^9}},
 CellLabel->"In[11]:=",ExpressionUUID->"6e268e4a-1ab1-4fa4-abc9-bc85f3bb8fa1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"Keys", " ", "are", " ", "strings"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"(", 
    RowBox[{"StringQ", "/@", 
     RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}]], "Input",
 CellChangeTimes->{
  3.89000889839254*^9, {3.890016339728188*^9, 3.890016342139681*^9}, 
   3.891251908164126*^9, {3.8930041333335657`*^9, 3.8930041384325933`*^9}},
 CellLabel->"In[12]:=",ExpressionUUID->"78177850-499e-456b-b442-fad780dafdf0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"string", " ", "fields"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"(", 
    RowBox[{"StringQ", "/@", 
     RowBox[{"Flatten", "@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<name\>\"", "]"}], 
           ",", 
           RowBox[{
            RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<shortname\>\"", 
            "]"}], ",", 
           RowBox[{
            RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<bibRef\>\"", "]"}], 
           ",", 
           RowBox[{
            RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<desc\>\"", "]"}], 
           ",", 
           RowBox[{
            RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<exogenousVars\>\"", 
            "]"}], ",", 
           RowBox[{
            RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<endogenousVars\>\"",
             "]"}]}], "}"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
    ")"}]}]}]], "Input",
 CellChangeTimes->{{3.890008770382118*^9, 3.890008858894733*^9}, {
  3.890016345133547*^9, 3.8900163569166937`*^9}, {3.891251925999875*^9, 
  3.891251929267716*^9}, {3.89300415697269*^9, 3.893004157463492*^9}, {
  3.8930148354335337`*^9, 3.893014849329674*^9}},
 CellLabel->"In[91]:=",ExpressionUUID->"a17059c2-5416-45b1-b84e-0c2f842f7fb5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"parameters", " ", "evaluate", " ", "to", " ", "numbers"}], "*)"}],
   "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"And", "@@", 
    RowBox[{"(", 
     RowBox[{"NumberQ", "/@", 
      RowBox[{"Flatten", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Values", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Association", "@", 
             RowBox[{
              RowBox[{"models", "[", "#", "]"}], "[", "\"\<parameters\>\"", 
              "]"}]}], "//.", 
            RowBox[{
             RowBox[{"models", "[", "#", "]"}], "[", "\"\<parameters\>\"", 
             "]"}]}], "//", "N"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Keys", "@", "models"}], ")"}]}], "]"}]}], ")"}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"(", 
     RowBox[{"NumberQ", "/@", 
      RowBox[{"Flatten", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Values", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Association", "@", 
             RowBox[{
              RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<parameters\>\"", 
              "]"}]}], "//.", 
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<parameters\>\"", 
             "]"}]}], "//", "N"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Keys", "@", "modelsP"}], ")"}]}], "]"}]}], 
     ")"}]}]}]}]], "Input",
 CellChangeTimes->{{3.890008965671461*^9, 3.8900089726778793`*^9}, {
   3.8900090147612762`*^9, 3.890009193827691*^9}, 3.8900101461421833`*^9, 
   3.890015540563738*^9, {3.8900156352184877`*^9, 3.89001567714233*^9}, 
   3.8912519303524723`*^9, {3.891640840825358*^9, 3.8916408678776903`*^9}, {
   3.89164090174683*^9, 3.8916409201814632`*^9}, 3.892974136542371*^9, {
   3.89300417575723*^9, 3.893004176318849*^9}},
 CellLabel->"In[92]:=",ExpressionUUID->"61202b86-4708-4e03-aa51-3fcb0e388f46"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"can", " ", "find", " ", "some", " ", "models"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"And", "@@", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"MemberQ", "[", 
        RowBox[{
         RowBox[{"Keys", "[", "models", "]"}], ",", "#"}], "]"}], "&"}], "/@", 
      RowBox[{"{", 
       RowBox[{"\"\<BY\>\"", ",", "\"\<BKY\>\""}], "}"}]}], ")"}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"MemberQ", "[", 
        RowBox[{
         RowBox[{"Keys", "[", "modelsP", "]"}], ",", "#"}], "]"}], "&"}], "/@", 
      RowBox[{"(", 
       RowBox[{"Keys", "@", "modelsP"}], ")"}]}], ")"}]}]}]}]], "Input",
 CellChangeTimes->{{3.8900087062162313`*^9, 3.890008740193614*^9}, {
   3.89001637048425*^9, 3.890016372993977*^9}, 3.8912519320207787`*^9, {
   3.891640927230764*^9, 3.891640929613118*^9}, 3.892974170435498*^9, {
   3.893004184988491*^9, 3.8930041852126703`*^9}},
 CellLabel->"In[94]:=",ExpressionUUID->"78983d07-8f42-43d9-a50f-d26a03b2ee5c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"models", ",", " ", 
    RowBox[{"modelsP", " ", "are", " ", "associations"}]}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"AllTrue", "[", 
    RowBox[{"models", ",", "AssociationQ"}], "]"}], "\[IndentingNewLine]", 
   RowBox[{"AllTrue", "[", 
    RowBox[{"modelsP", ",", "AssociationQ"}], "]"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"each", " ", "model", " ", "inside", " ", "models"}], ",", " ", 
     RowBox[{
     "modelsP", " ", "are", " ", "themselves", " ", "an", " ", 
      "association"}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"AllTrue", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"models", "[", "#", "]"}], "&"}], "/@", 
      RowBox[{"Keys", "[", "models", "]"}]}], ",", "AssociationQ"}], "]"}], 
   "\[IndentingNewLine]", 
   RowBox[{"AllTrue", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"modelsP", "[", "#", "]"}], "&"}], "/@", 
      RowBox[{"Keys", "[", "modelsP", "]"}]}], ",", "AssociationQ"}], 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.8900086430073547`*^9, 3.890008684982678*^9}, {
  3.890010177349143*^9, 3.890010179091837*^9}, {3.8900163791247263`*^9, 
  3.890016449580503*^9}, {3.891251933188879*^9, 3.891251935189865*^9}, {
  3.891640937075639*^9, 3.891640945348556*^9}, {3.893004194158003*^9, 
  3.893004229582778*^9}},
 CellLabel->"In[96]:=",ExpressionUUID->"33533fdf-b808-460b-a76c-9a554476db8f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "all", " ", "exogenous", " ", "variables", " ", "are", " ", "in", " ", 
    "context", " ", 
    "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}], "*)"}],
   "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"(*", "\"\<stateVars\>\"", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\"\
"}], ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<stateVars\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                 "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<modelAssumptions\>\"", "*)"}], "\[IndentingNewLine]", 
     
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\"\
"}], ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<modelAssumptions\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                 "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<exogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\"\
"}], ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<exogenousEq\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                 "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<endogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\"\
"}], ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                 "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.893001201934902*^9, 3.893001214021667*^9}, {
   3.893001245798745*^9, 3.8930012743606873`*^9}, {3.893001352341578*^9, 
   3.893001386197197*^9}, {3.893001448430169*^9, 3.893001448726687*^9}, 
   3.8930026482885447`*^9, {3.8930042711283293`*^9, 3.8930042721384*^9}, {
   3.89301215129099*^9, 3.893012163688088*^9}, {3.893014370482971*^9, 
   3.893014438233089*^9}, {3.893014486322825*^9, 3.893014499135116*^9}, {
   3.893014551885273*^9, 3.893014565016636*^9}, 3.893016122561097*^9},
 CellLabel->
  "In[100]:=",ExpressionUUID->"534ec6f3-3445-4373-873f-bcdfb93d1e96"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "all", " ", "shocks", " ", "are", " ", "in", " ", "context", " ", 
    "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"(*", "\"\<stateVars\>\"", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], ")"}], 
              "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<stateVars\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                   "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
                "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<modelAssumptions\>\"", "*)"}], "\[IndentingNewLine]", 
     
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], ")"}], 
              "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<modelAssumptions\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                   "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
                "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<exogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], ")"}], 
              "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<exogenousEq\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                   "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
                "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<endogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], ")"}], 
              "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                   "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
                "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{
  3.893001499960679*^9, {3.893002667440094*^9, 3.89300269939427*^9}, {
   3.893003083367228*^9, 3.893003083692607*^9}, {3.8930042730060863`*^9, 
   3.893004273989354*^9}, {3.893012064247108*^9, 3.8930120867411222`*^9}, {
   3.893014419748905*^9, 3.893014445806767*^9}, {3.893014573318915*^9, 
   3.893014592005512*^9}},
 CellLabel->
  "In[101]:=",ExpressionUUID->"0345d276-1ede-4d49-bc84-8f6ffb7b45d1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "all", " ", "parameters", " ", "are", " ", "in", " ", "context", " ", 
    "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"(*", "\"\<parameters\>\"", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
               ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<parameters\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
              ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<stateVars\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
               ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<stateVars\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
              ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<modelAssumptions\>\"", "*)"}], "\[IndentingNewLine]", 
     
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
               ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<modelAssumptions\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
              ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<exogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
               ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<exogenousEq\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
              ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<endogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
               ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], ":>", "var"}], ",", "Infinity"}], "]"}]}], 
              ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{
  3.893001501399847*^9, {3.893002703969759*^9, 3.893002740019191*^9}, {
   3.893003056880762*^9, 3.893003109272599*^9}, {3.893003787588058*^9, 
   3.893003788104986*^9}, {3.893004274886281*^9, 3.893004277331174*^9}, {
   3.893012058196281*^9, 3.893012058639546*^9}, {3.8930144234979*^9, 
   3.8930144532880163`*^9}, {3.8930146005691023`*^9, 3.893014621517111*^9}, 
   3.893016128067835*^9},
 CellLabel->
  "In[102]:=",ExpressionUUID->"c15b2752-0fa5-4e0d-b1ab-0c8175dd4505"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "all", " ", "endogenous", " ", "variables", " ", "are", " ", "in", " ", 
    "context", " ", 
    "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\""}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\"\<modelAssumptions\>\"", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\
\""}], ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<modelAssumptions\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                 "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<endogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"And", "@@", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
               "#", "===", 
                "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\
\""}], ")"}], "&"}], "/@", 
             RowBox[{"(", 
              RowBox[{"Context", "/@", 
               RowBox[{"Cases", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"var_Symbol", "?", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                    ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", 
                 "Infinity"}], "]"}]}], ")"}]}], ")"}]}], ")"}], "&"}], "/@", 
        
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.8930122537493258`*^9, 3.893012300221422*^9}, {
  3.893014429011052*^9, 3.893014460982974*^9}, {3.893014634019079*^9, 
  3.893014636342099*^9}, {3.893014692448086*^9, 3.89301469383664*^9}, {
  3.893014770636636*^9, 3.893014779588964*^9}},
 CellLabel->
  "In[103]:=",ExpressionUUID->"7b9a7110-6fcf-4036-b444-4addeb8c2186"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"all", " ", "coefficients", " ", "of", " ", "wc"}], ",", " ", 
    "pd", ",", " ", 
    RowBox[{
    "bond", " ", "ratios", " ", "are", " ", "in", " ", "context", " ", 
     "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\""}]}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"coefs", "=", 
     RowBox[{"Alternatives", "@@", 
      RowBox[{"SymbolName", "/@", 
       RowBox[{"{", 
        RowBox[{
        "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`coefwc", ",", 
         RowBox[{
         "Head", "@", 
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`coefpd"}], 
         ",", 
         RowBox[{
         "Head", "@", 
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`coefb"}], 
         ",", 
         RowBox[{
         "Head", "@", 
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`coefnb"}]}], 
        "}"}]}]}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
        "#", "===", 
         "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`\>\""}], 
        ")"}], "&"}], "/@", 
      RowBox[{"Flatten", "@", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"Cases", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"modelsP", "[", "#", "]"}], "[", 
             "\"\<modelAssumptions\>\"", "]"}], ",", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"var_Symbol", "?", 
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"MatchQ", "[", 
                   RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", "coefs"}], 
                   "]"}], "&"}], ")"}]}], "|", 
               RowBox[{
                RowBox[{"var_Symbol", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", "coefs"}], 
                    "]"}], "&"}], ")"}]}], "[", "__", "]"}]}], ")"}], ":>", 
             RowBox[{"Context", "[", "var", "]"}]}], ",", "Infinity"}], "]"}],
           "&"}], "/@", 
         RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
     ")"}]}]}]}]], "Input",
 CellChangeTimes->{{3.893012389695546*^9, 3.893012429793953*^9}, {
  3.893012999712995*^9, 3.893013013257292*^9}},
 CellLabel->
  "In[104]:=",ExpressionUUID->"1ab266c5-0090-45e7-9943-52d59a261191"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "should", " ", "not", " ", "have", " ", "any", " ", "endogenous", " ", 
    "variables"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\"\<stateVars\>\"", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
           RowBox[{"{", "}"}], ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"Cases", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
              "]"}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"var_Symbol", "?", 
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"MemberQ", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                 ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
            "]"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", "\"\<exogenousEq\>\"", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
           RowBox[{"{", "}"}], ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"Cases", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<exogenousEq\>\"", 
              "]"}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"var_Symbol", "?", 
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"MemberQ", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                 ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
            "]"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.89300111387222*^9, 3.8930011727459707`*^9}, {
   3.893001247830225*^9, 3.893001299678648*^9}, {3.893001353751255*^9, 
   3.8930015072417727`*^9}, {3.893002707727394*^9, 3.893002708411419*^9}, {
   3.893002748062245*^9, 3.893002826831513*^9}, 3.89300297523416*^9, {
   3.893003086535989*^9, 3.893003086763905*^9}, {3.8930042788551702`*^9, 
   3.893004279626916*^9}, {3.8930147061742983`*^9, 3.8930147624521227`*^9}},
 CellLabel->
  "In[106]:=",ExpressionUUID->"15557545-9517-4d8e-be17-18fad593c1c8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "keys", " ", "and", " ", "shortname", " ", "are", " ", "preserved"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", "\[IndentingNewLine]", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"SubsetQ", "[", 
      RowBox[{
       RowBox[{"Keys", "[", "models", "]"}], ",", 
       RowBox[{"Keys", "[", "modelsP", "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"SubsetQ", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"models", "[", "#", "]"}], "[", "\"\<shortname\>\"", "]"}], 
         "&"}], "/@", 
        RowBox[{"Keys", "[", "models", "]"}]}], ",", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<shortname\>\"", "]"}],
          "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}]}], "]"}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.89301161589116*^9, 3.893011697195755*^9}, 
   3.893144709678164*^9, 3.893144758132229*^9},
 CellLabel->
  "In[107]:=",ExpressionUUID->"cd064082-f805-44ec-a045-aa1fa3aceeba"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "stateVars", " ", "are", " ", "functions", " ", "of", " ", "one", " ", 
    "variable", " ", 
    RowBox[{"(", "time", ")"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{"Function", ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Head", "/@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
               "]"}], ")"}], "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{"List", ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Head", "/@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{
                RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
                "]"}], "[", "t", "]"}], ")"}], "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{"1", ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Length", "/@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{
                RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
                "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], ")"}], "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{"\"\<t\>\"", ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{"SymbolName", "@@", 
             RowBox[{
              RowBox[{
               RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
               "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ")"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "evaluating", " ", "the", " ", "function", " ", "at", " ", 
       "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`t", " ", "gives",
        " ", "the", " ", "same", " ", "as", " ", "\"\<stateVars\>\"", " ", 
       "in", " ", "models"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<stateVars\>\"", 
            "]"}], "[", 
           "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`t", "]"}], 
          ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}], "===", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"models", "[", "#", "]"}], "[", "\"\<stateVars\>\"", "]"}],
           ")"}], "&"}], "/@", 
        RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.893011149678734*^9, 3.893011151120873*^9}, {
   3.893011197672791*^9, 3.893011393092401*^9}, {3.8930114244175577`*^9, 
   3.893011594633165*^9}, {3.893011701053651*^9, 3.89301170872368*^9}, {
   3.8930117913212442`*^9, 3.893011831744893*^9}, 3.893013045538563*^9, 
   3.893144850494865*^9},
 CellLabel->
  "In[108]:=",ExpressionUUID->"5ef11f51-f78f-4db1-8add-279c869573f2"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"numStocks", " ", "is", " ", "a", " ", "number"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"(", 
    RowBox[{"NumberQ", "/@", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"modelsP", "[", "#", "]"}], "[", "\"\<numStocks\>\"", "]"}], 
        "&"}], "/@", 
       RowBox[{"(", 
        RowBox[{"Keys", "@", "modelsP"}], ")"}]}], ")"}]}], 
    ")"}]}]}]], "Input",
 CellChangeTimes->{{3.893011853833601*^9, 3.893011940133402*^9}},
 CellLabel->
  "In[109]:=",ExpressionUUID->"488002c0-cddc-467b-bc55-ab11b4063392"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"compare", " ", "to", " ", "some", " ", "hand"}], "-", 
    RowBox[{
    "written", " ", "expressions", " ", "known", " ", "to", " ", "be", " ", 
     "correct"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"model", "=", 
     RowBox[{"modelsP", "[", "\"\<NRC\>\"", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"pi", "[", "myContext`t", "]"}], "/.", 
         RowBox[{"Normal", "@", 
          RowBox[{"model", "[", "\"\<exogenousEq\>\"", "]"}]}]}], ")"}], "===", 
       RowBox[{"(", 
        RowBox[{"FernandoDuarte`LongRunRisk`Model`Parameters`mup", "+", 
         RowBox[{"FernandoDuarte`LongRunRisk`Model`Parameters`rhop", " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`mup"}], 
            "+", 
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", 
             RowBox[{
              RowBox[{"-", "1"}], "+", "myContext`t"}], "]"}]}], ")"}]}], "+", 
         RowBox[{"FernandoDuarte`LongRunRisk`Model`Parameters`xip", " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
            "]"}], "[", 
           RowBox[{
            RowBox[{"-", "1"}], "+", "myContext`t"}], "]"}]}], "+", 
         RowBox[{"FernandoDuarte`LongRunRisk`Model`Parameters`phip", " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
            "]"}], "[", "myContext`t", "]"}]}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"eps", "[", "\"\<dc\>\"", "]"}], "[", "t", "]"}], "/.", 
         RowBox[{"model", "[", "\"\<exogenousEq\>\"", "]"}]}], ")"}], "===", 
       RowBox[{
        RowBox[{"eps", "[", "\"\<dc\>\"", "]"}], "[", "t", "]"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"dd", "[", 
          RowBox[{"t", ",", "i"}], "]"}], "/.", 
         RowBox[{"Normal", "@", 
          RowBox[{"model", "[", "\"\<exogenousEq\>\"", "]"}]}]}], ")"}], "===", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
         "FernandoDuarte`LongRunRisk`Model`Parameters`mud", "[", "i", "]"}], 
         "+", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`mup"}], 
            "+", 
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", 
             RowBox[{
              RowBox[{"-", "1"}], "+", "t"}], "]"}]}], ")"}], " ", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`Parameters`rhodp", "[", "i", 
           "]"}]}], "+", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`Parameters`phidc", "[", "i", 
           "]"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<dc\>\"", 
            "]"}], "[", "t", "]"}]}], "+", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
           RowBox[{
            RowBox[{"-", "2"}], "+", "t"}], "]"}], " ", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`Parameters`xid", "[", "i", "]"}], 
          " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
            "]"}], "[", 
           RowBox[{
            RowBox[{"-", "1"}], "+", "t"}], "]"}]}]}], ")"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"wc", "[", "t", "]"}], "/.", 
         RowBox[{"Normal", "@", 
          RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], ")"}], "===", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
         "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", "0", 
          "]"}], "+", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", "1",
            "]"}], " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`mup"}], 
            "+", 
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", 
             "t", "]"}]}], ")"}]}], "+", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", "4",
            "]"}], " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`Esg"}], 
            "+", 
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
             "t", "]"}]}], ")"}]}], "+", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", "5",
            "]"}], " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", 
             
             SuperscriptBox["FernandoDuarte`LongRunRisk`Model`Parameters`Esg",
               "2"]}], "-", 
            FractionBox[
             
             SuperscriptBox[
              "FernandoDuarte`LongRunRisk`Model`Parameters`phig", "2"], 
             RowBox[{"1", "-", 
              
              SuperscriptBox[
               "FernandoDuarte`LongRunRisk`Model`Parameters`rhog", "2"]}]], 
            "+", 
            SuperscriptBox[
             RowBox[{
             "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
              "t", "]"}], "2"]}], ")"}]}], "+", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", "3",
            "]"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
            "]"}], "[", "t", "]"}]}], "+", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", "2",
            "]"}], " ", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
           RowBox[{
            RowBox[{"-", "1"}], "+", "t"}], "]"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
            "]"}], "[", "t", "]"}]}]}], ")"}]}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"pd", "[", 
          RowBox[{"t", ",", "i"}], "]"}], "/.", 
         RowBox[{"Normal", "@", 
          RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], ")"}], "===", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", "i",
            "]"}], "[", "0", "]"}], "+", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`mup"}], 
            "+", 
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", 
             "t", "]"}]}], ")"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
            "i", "]"}], "[", "1", "]"}]}], "+", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", "FernandoDuarte`LongRunRisk`Model`Parameters`Esg"}], 
            "+", 
            RowBox[{
            "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
             "t", "]"}]}], ")"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
            "i", "]"}], "[", "4", "]"}]}], "+", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"-", 
             
             SuperscriptBox["FernandoDuarte`LongRunRisk`Model`Parameters`Esg",
               "2"]}], "-", 
            FractionBox[
             
             SuperscriptBox[
              "FernandoDuarte`LongRunRisk`Model`Parameters`phig", "2"], 
             RowBox[{"1", "-", 
              
              SuperscriptBox[
               "FernandoDuarte`LongRunRisk`Model`Parameters`rhog", "2"]}]], 
            "+", 
            SuperscriptBox[
             RowBox[{
             "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
              "t", "]"}], "2"]}], ")"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
            "i", "]"}], "[", "5", "]"}]}], "+", 
         RowBox[{
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`sg", "[", 
           RowBox[{
            RowBox[{"-", "1"}], "+", "t"}], "]"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
            "i", "]"}], "[", "2", "]"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
            "]"}], "[", "t", "]"}]}], "+", 
         RowBox[{
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`B", "[", 
            "i", "]"}], "[", "3", "]"}], " ", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`Shocks`eps", "[", "\"\<pi\>\"", 
            "]"}], "[", "t", "]"}]}]}], ")"}]}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"bondexcret", "[", 
          RowBox[{"t", ",", "i"}], "]"}], "/.", 
         RowBox[{"Normal", "@", 
          RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], ")"}], "===", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
         "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bondret", "[", 
          RowBox[{"t", ",", "i", ",", "1"}], "]"}], "-", 
         RowBox[{
         "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bondyield", 
          "[", 
          RowBox[{
           RowBox[{
            RowBox[{"-", "1"}], "+", "t"}], ",", "1"}], "]"}]}], ")"}]}], ",",
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"bondexcret", "[", 
           RowBox[{"t", ",", "i"}], "]"}], "/.", 
          RowBox[{"Normal", "@", 
           RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], "/.", 
         RowBox[{"Normal", "@", 
          RowBox[{"model", "[", "\"\<endogenousEq\>\"", "]"}]}]}], ")"}], "===", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
         "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bond", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"-", "1"}], "+", "t"}], ",", "1"}], "]"}], "-", 
         RowBox[{
         "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bond", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"-", "1"}], "+", "t"}], ",", "i"}], "]"}], "+", 
         RowBox[{
         "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`bond", "[", 
          RowBox[{"t", ",", 
           RowBox[{
            RowBox[{"-", "1"}], "+", "i"}]}], "]"}]}], ")"}]}]}], 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "}"}]}]}]}]], "Input",
 CellChangeTimes->{{3.893013112707829*^9, 3.8930131579451036`*^9}, {
   3.89301319949829*^9, 3.8930132312916937`*^9}, {3.893014937931109*^9, 
   3.893015014205209*^9}, {3.8930150778885803`*^9, 3.893015081667938*^9}, 
   3.8930161054031553`*^9, 3.893016326710898*^9, {3.893016391754463*^9, 
   3.893016409333332*^9}},
 CellLabel->
  "In[110]:=",ExpressionUUID->"1e137b4c-2ecb-4bf4-991e-502dc176baf0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
    "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "no", " ", 
    "endogenous", " ", "variables"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", " ", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
           RowBox[{"{", "}"}], ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"Cases", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"wc", "[", "t", "]"}], "//.", 
              RowBox[{"Normal", "@", 
               RowBox[{
                RowBox[{"modelsP", "[", "#", "]"}], "[", 
                "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"var_Symbol", "?", 
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"MemberQ", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                 ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
            "]"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], 
       "\[IndentingNewLine]", ")"}]}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
       "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "exogenous", 
       " ", "variables", " ", "that", " ", "are", " ", "all", " ", "in", " ", 
       "context", " ", 
       "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}], 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
          "#", ",", 
           "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}], 
          "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Flatten", "@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Cases", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"wc", "[", "t", "]"}], "//.", 
                RowBox[{"Normal", "@", 
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
               RowBox[{
                RowBox[{
                 RowBox[{"var_Symbol", "?", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                   ")"}]}], "[", "__", "]"}], ":>", 
                RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
             "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
       "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "parameters", 
       " ", "that", " ", "are", " ", "all", " ", "in", " ", "context", " ", 
       "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
          "#", ",", "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
          "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Flatten", "@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Cases", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"wc", "[", "t", "]"}], "//.", 
                RowBox[{"Normal", "@", 
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
               RowBox[{
                RowBox[{"var_Symbol", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                  ")"}]}], ":>", 
                RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
             "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
       "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "shocks", " ", 
       "that", " ", "are", " ", "all", " ", "in", " ", "context", " ", 
       "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
          "#", ",", "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], 
          "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Flatten", "@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Cases", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"wc", "[", "t", "]"}], "//.", 
                RowBox[{"Normal", "@", 
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                 "[", "__", "]"}], ":>", 
                RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
             "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}]}], "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.893013644050221*^9, 3.8930136594716587`*^9}, {
  3.893013788159135*^9, 3.8930139106431017`*^9}, {3.89301401209753*^9, 
  3.893014103933299*^9}, {3.893014148442313*^9, 3.8930142719501123`*^9}},
 CellLabel->
  "In[112]:=",ExpressionUUID->"9228741c-bdf9-4027-a094-b007a53b75d5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
    "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "no", " ", 
    "endogenous", " ", "variables"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", " ", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
           RowBox[{"{", "}"}], ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"Cases", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"bondexcret", "[", 
               RowBox[{"t", ",", "i"}], "]"}], "//.", 
              RowBox[{"Normal", "@", 
               RowBox[{
                RowBox[{"modelsP", "[", "#", "]"}], "[", 
                "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"var_Symbol", "?", 
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"MemberQ", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`EndogenousEq`$\
endogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                 ")"}]}], "[", "__", "]"}], ":>", "var"}], ",", "Infinity"}], 
            "]"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], 
       "\[IndentingNewLine]", ")"}]}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
       "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "exogenous", 
       " ", "variables", " ", "that", " ", "are", " ", "all", " ", "in", " ", 
       "context", " ", 
       "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}], 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
          "#", ",", 
           "\"\<FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`\>\""}], 
          "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Flatten", "@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Cases", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"bondexcret", "[", 
                 RowBox[{"t", ",", "i"}], "]"}], "//.", 
                RowBox[{"Normal", "@", 
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
               RowBox[{
                RowBox[{
                 RowBox[{"var_Symbol", "?", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "2"}]}], "]"}], "&"}], "/@", 
                    "FernandoDuarte`LongRunRisk`Model`ExogenousEq`$\
exogenousVars"}], ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                   ")"}]}], "[", "__", "]"}], ":>", 
                RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
             "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
       "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "parameters", 
       " ", "that", " ", "are", " ", "all", " ", "in", " ", "context", " ", 
       "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
          "#", ",", "\"\<FernandoDuarte`LongRunRisk`Model`Parameters`\>\""}], 
          "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Flatten", "@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Cases", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"bondexcret", "[", 
                 RowBox[{"t", ",", "i"}], "]"}], "//.", 
                RowBox[{"Normal", "@", 
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
               RowBox[{
                RowBox[{"var_Symbol", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"MemberQ", "[", 
                    RowBox[{
                    "FernandoDuarte`LongRunRisk`Model`Parameters`$parameters",
                     ",", 
                    RowBox[{"SymbolName", "[", "#", "]"}]}], "]"}], "&"}], 
                  ")"}]}], ":>", 
                RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
             "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "endogenous", " ", "variables", " ", "mapped", " ", "repeatedly", " ", 
       "using", " ", "\"\<endogenousEq\>\"", " ", "has", " ", "shocks", " ", 
       "that", " ", "are", " ", "all", " ", "in", " ", "context", " ", 
       "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"MatchQ", "[", 
          RowBox[{
          "#", ",", "\"\<FernandoDuarte`LongRunRisk`Model`Shocks`\>\""}], 
          "]"}], "&"}], "/@", 
        RowBox[{"(", 
         RowBox[{"Flatten", "@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Cases", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"bondexcret", "[", 
                 RowBox[{"t", ",", "i"}], "]"}], "//.", 
                RowBox[{"Normal", "@", 
                 RowBox[{
                  RowBox[{"modelsP", "[", "#", "]"}], "[", 
                  "\"\<endogenousEq\>\"", "]"}]}]}], ",", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"var_Symbol", "?", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"MatchQ", "[", 
                    RowBox[{
                    RowBox[{"SymbolName", "[", "#", "]"}], ",", 
                    "\"\<eps\>\""}], "]"}], "&"}], ")"}]}], "[", "__", "]"}], 
                 "[", "__", "]"}], ":>", 
                RowBox[{"Context", "@", "var"}]}], ",", "Infinity"}], "]"}], 
             "&"}], "/@", 
            RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], 
       ")"}]}]}], "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.893013644050221*^9, 3.8930136594716587`*^9}, {
  3.893013788159135*^9, 3.8930139106431017`*^9}, {3.89301401209753*^9, 
  3.893014103933299*^9}, {3.893014148442313*^9, 3.893014235255294*^9}},
 CellLabel->
  "In[113]:=",ExpressionUUID->"f26d2032-c2da-40bd-bfb1-8e2c7187a48f"],

Cell[BoxData[{
 RowBox[{"AllTrue", "[", 
  RowBox[{
   RowBox[{"Head", "/@", 
    RowBox[{"(", 
     RowBox[{"Keys", "@", 
      RowBox[{
       RowBox[{"modelsP", "[", "\"\<BKY\>\"", "]"}], "[", 
       "\"\<exogenousEq\>\"", "]"}]}], ")"}]}], ",", 
   RowBox[{
    RowBox[{"MatchQ", "[", 
     RowBox[{"#", ",", "PatternTest"}], "]"}], "&"}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"AllTrue", "[", 
  RowBox[{
   RowBox[{"Head", "/@", 
    RowBox[{"(", 
     RowBox[{"Keys", "@", 
      RowBox[{
       RowBox[{"modelsP", "[", "\"\<BKY\>\"", "]"}], "[", 
       "\"\<endogenousEq\>\"", "]"}]}], ")"}]}], ",", 
   RowBox[{
    RowBox[{"MatchQ", "[", 
     RowBox[{"#", ",", "PatternTest"}], "]"}], "&"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.891157496969887*^9, 3.891157544107942*^9}, {
  3.8929829100824947`*^9, 3.89298291390197*^9}, {3.892982949507678*^9, 
  3.8929829531624527`*^9}, {3.893016267044709*^9, 3.8930162995723467`*^9}},
 CellLabel->
  "In[114]:=",ExpressionUUID->"cd8b1760-536a-488f-9246-597cbd161a39"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "exogenousEq", " ", "and", " ", "endogenousEq", " ", "evaluate", " ", 
    "expressions", " ", "that", " ", "are", " ", "exogenous", " ", "or", " ", 
    "endogenous", " ", "variables"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{"Not", "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Head", "[", 
              RowBox[{"dc", "[", "t", "]"}], "]"}], "===", 
             RowBox[{"Head", "[", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"dc", "[", "t", "]"}], "/.", 
                RowBox[{"Normal", "[", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
              "]"}]}], ")"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{"Not", "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Head", "[", 
              RowBox[{"dd", "[", 
               RowBox[{"t", ",", "i"}], "]"}], "]"}], "===", 
             RowBox[{"Head", "[", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"dd", "[", 
                 RowBox[{"t", ",", "i"}], "]"}], "/.", 
                RowBox[{"Normal", "[", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
              "]"}]}], ")"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{"Not", "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Head", "[", 
              RowBox[{"wc", "[", "t", "]"}], "]"}], "===", 
             RowBox[{"Head", "[", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"wc", "[", "t", "]"}], "/.", 
                RowBox[{"Normal", "[", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
              "]"}]}], ")"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{"Not", "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Head", "[", 
              RowBox[{"sdf", "[", "t", "]"}], "]"}], "===", 
             RowBox[{"Head", "[", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"sdf", "[", "t", "]"}], "/.", 
                RowBox[{"Normal", "[", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
              "]"}]}], ")"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"And", "@@", 
      RowBox[{"(", 
       RowBox[{"Not", "/@", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Head", "[", 
              RowBox[{"bondyield", "[", "t", "]"}], "]"}], "===", 
             RowBox[{"Head", "[", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"bondyield", "[", "t", "]"}], "/.", 
                RowBox[{"Normal", "[", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<exogenousEq\>\"", "]"}], ",", 
                   RowBox[{
                    RowBox[{"modelsP", "[", "#", "]"}], "[", 
                    "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
              "]"}]}], ")"}], "&"}], "/@", 
          RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], ")"}]}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.89301559217407*^9, 3.893015822830755*^9}, {
   3.89301600860408*^9, 3.893016031968368*^9}, 3.893016149396062*^9, 
   3.8931449612563457`*^9},
 CellLabel->
  "In[116]:=",ExpressionUUID->"b0ba81ee-3f3e-4642-a9d2-b012835fd8f5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "exogenousEq", " ", "and", " ", "endogenousEq", " ", "do", " ", "not", " ",
     "evaluate", " ", "expressions", " ", "that", " ", "are", " ", "neither", 
    " ", "exogenous", " ", "nor", " ", "endogenous", " ", "variables"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"And", "@@", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"And", "@@", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"Head", "[", 
           RowBox[{"notVar", "[", "t", "]"}], "]"}], "===", 
          RowBox[{"Head", "[", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"notVar", "[", "t", "]"}], "/.", 
             RowBox[{"Normal", "[", 
              RowBox[{"Join", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"modelsP", "[", "#", "]"}], "[", 
                 "\"\<exogenousEq\>\"", "]"}], ",", 
                RowBox[{
                 RowBox[{"modelsP", "[", "#", "]"}], "[", 
                 "\"\<endogenousEq\>\"", "]"}]}], "]"}], "]"}]}], ")"}], 
           "]"}]}], ")"}], "&"}], "/@", 
       RowBox[{"Keys", "[", "modelsP", "]"}]}], ")"}]}], 
    "\[IndentingNewLine]", "}"}]}]}]], "Input",
 CellChangeTimes->{{3.893015849081943*^9, 3.8930158504172277`*^9}, 
   3.893016091706109*^9},
 CellLabel->
  "In[117]:=",ExpressionUUID->"9400811d-ec42-4264-98c2-5f9d866e0a9d"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.894802891427039*^9, 
  3.894802901425165*^9}},ExpressionUUID->"7c0079fa-1efb-4944-84f4-\
72b72617407c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "shortname", " ", "different", " ", "from", " ", "model", " ", "key"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"modelBY", "=", 
     RowBox[{"models", "[", "\"\<BY\>\"", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"modelBKY", "=", 
     RowBox[{"models", "[", "\"\<BKY\>\"", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"modelBKYP", "=", 
     RowBox[{"processModels", "[", 
      RowBox[{"<|", 
       RowBox[{"\"\<BKY\>\"", "->", "modelBKY"}], "|>"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"modelBYP", "=", 
     RowBox[{"processModels", "[", 
      RowBox[{"<|", 
       RowBox[{"\"\<BY\>\"", "->", "modelBY"}], "|>"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"newModels", "=", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<myModel\>\"", "->", "modelBKY"}], ",", 
       RowBox[{"\"\<BY\>\"", "->", "modelBY"}]}], "|>"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"newModelsSameName", "=", 
     RowBox[{"<|", 
      RowBox[{"\"\<BY\>\"", "->", "modelBY"}], "|>"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"newModelsRename", "=", 
     RowBox[{"<|", 
      RowBox[{"\"\<myModel\>\"", "->", "modelBY"}], "|>"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"newModelsP", "=", 
     RowBox[{"processModels", "[", "newModels", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"newModelsSameNameP", "=", 
     RowBox[{"processModels", "[", "newModelsSameName", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"newModelsRenameP", "=", 
     RowBox[{"processModels", "[", "newModelsRename", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"And", "@@", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"KeyDrop", "[", 
            RowBox[{"#", ",", "\"\<coeffsSolution\>\""}], "]"}], "&"}], "@", 
          RowBox[{"newModelsP", "[", "\"\<myModel\>\"", "]"}]}], "===", 
         RowBox[{"KeyDrop", "[", 
          RowBox[{"#", ",", "\"\<coeffsSolution\>\""}], "]"}]}], "&"}], "@", 
       RowBox[{"modelBKYP", "[", "\"\<BKY\>\"", "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"KeyDrop", "[", 
            RowBox[{"#", ",", "\"\<coeffsSolution\>\""}], "]"}], "&"}], "@", 
          RowBox[{"newModelsP", "[", "\"\<BY\>\"", "]"}]}], "===", 
         RowBox[{"KeyDrop", "[", 
          RowBox[{"#", ",", "\"\<coeffsSolution\>\""}], "]"}]}], "&"}], "@", 
       RowBox[{"modelBYP", "[", "\"\<BY\>\"", "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"KeyDrop", "[", 
            RowBox[{"#", ",", "\"\<coeffsSolution\>\""}], "]"}], "&"}], "@", 
          RowBox[{"newModelsSameNameP", "[", "\"\<BY\>\"", "]"}]}], "===", 
         RowBox[{"KeyDrop", "[", 
          RowBox[{"#", ",", "\"\<coeffsSolution\>\""}], "]"}]}], "&"}], "@", 
       RowBox[{"modelBYP", "[", "\"\<BY\>\"", "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"KeyDrop", "[", 
            RowBox[{"#", ",", "\"\<coeffsSolution\>\""}], "]"}], "&"}], "@", 
          RowBox[{"newModelsRenameP", "[", "\"\<myModel\>\"", "]"}]}], "===", 
         
         RowBox[{"KeyDrop", "[", 
          RowBox[{"#", ",", "\"\<coeffsSolution\>\""}], "]"}]}], "&"}], "@", 
       RowBox[{"modelBYP", "[", "\"\<BY\>\"", "]"}]}]}], 
     "\[IndentingNewLine]", "}"}]}]}]}]], "Input",
 CellChangeTimes->{{3.8912512942103243`*^9, 3.8912513055502443`*^9}, {
   3.8912513517340593`*^9, 3.891251461543272*^9}, {3.891251500422112*^9, 
   3.891251525384585*^9}, 3.891251633145433*^9, {3.891251727184629*^9, 
   3.8912517398515368`*^9}, {3.89125184158985*^9, 3.891251848736774*^9}, {
   3.891252152348381*^9, 3.891252165553775*^9}, 3.892982996244417*^9, 
   3.893016163280417*^9, 3.893145167358938*^9, 3.893145254752489*^9, 
   3.89480217485483*^9, {3.8948027745066357`*^9, 3.894802832466658*^9}, {
   3.8948029030451307`*^9, 3.8948029093631897`*^9}, {3.894803218803307*^9, 
   3.8948032260346603`*^9}, {3.8948032639753523`*^9, 3.894803269943624*^9}},
 CellLabel->"In[93]:=",ExpressionUUID->"876ead52-65a8-42a3-aa99-574711040d84"],

Cell[BoxData["True"], "Output",
 CellChangeTimes->{3.894802920825715*^9, 3.894803236980359*^9, 
  3.89480328072792*^9},
 CellLabel->
  "Out[103]=",ExpressionUUID->"6bbed1e3-7d1f-4b94-b79d-3495387279b7"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"modelsP", "[", "\"\<BKY\>\"", "]"}], "[", 
  "\"\<uncondMomOfStateVars\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.8926694041398153`*^9, 3.89266940492375*^9}, {
   3.892669568275824*^9, 3.892669571886633*^9}, {3.8926702794229727`*^9, 
   3.892670320094716*^9}, {3.8926729753491573`*^9, 3.8926729968552303`*^9}, 
   3.892673034802946*^9, {3.8930040613270483`*^9, 3.893004073602951*^9}, {
   3.893085127620967*^9, 3.893085170900576*^9}, 3.8930852587582817`*^9, {
   3.893085533800744*^9, 3.893085535641576*^9}},
 CellLabel->
  "In[127]:=",ExpressionUUID->"307e98a6-0cd9-4fdf-b610-1c7b7718be91"],

Cell[BoxData[
 RowBox[{
  RowBox[{"modelsP", "[", "\"\<BKY\>\"", "]"}], "[", 
  "\"\<uncondMomOfStateVars\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.8926694041398153`*^9, 3.89266940492375*^9}, {
   3.892669568275824*^9, 3.892669571886633*^9}, {3.8926702794229727`*^9, 
   3.892670320094716*^9}, {3.8926729753491573`*^9, 3.8926729968552303`*^9}, 
   3.892673034802946*^9, {3.8930040613270483`*^9, 3.893004073602951*^9}, {
   3.893085127620967*^9, 3.893085170900576*^9}, 3.8930852587582817`*^9, {
   3.893085533800744*^9, 3.893085535641576*^9}, {3.893085651495242*^9, 
   3.8930856520883303`*^9}, 3.894802133475988*^9},
 CellLabel->
  "In[130]:=",ExpressionUUID->"e1b25bdb-2841-4819-8a93-34cef84c4bec"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox[
   RowBox[{
   "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`x", "[", "t", "]"}], 
   "2"], "//.", 
  RowBox[{
   RowBox[{"modelsP", "[", "\"\<BKY\>\"", "]"}], "[", 
   "\"\<uncondMomOfStateVars\>\"", "]"}]}]], "Input",
 CellChangeTimes->{{3.8926694041398153`*^9, 3.89266940492375*^9}, {
   3.892669568275824*^9, 3.892669571886633*^9}, {3.8926702794229727`*^9, 
   3.892670320094716*^9}, {3.8926729753491573`*^9, 3.8926729968552303`*^9}, 
   3.892673034802946*^9, {3.8930040613270483`*^9, 3.893004073602951*^9}, {
   3.893085127620967*^9, 3.893085170900576*^9}, 3.8930852587582817`*^9, {
   3.893085533800744*^9, 3.893085535641576*^9}, {3.893085651495242*^9, 
   3.8930856598219013`*^9}, 3.893085714212511*^9, 3.894802134906473*^9},
 CellLabel->
  "In[131]:=",ExpressionUUID->"2896a464-3e06-42f6-b9a6-03450d15da09"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"modelsP", "[", "\"\<NRC\>\"", "]"}], "[", 
  "\"\<uncondMomOfStateVars\>\"", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsP", "[", "\"\<NRC\>\"", "]"}], "[", 
  "\"\<uncondMomOfStateVars\>\"", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  SuperscriptBox[
   RowBox[{
   "FernandoDuarte`LongRunRisk`Model`ExogenousEq`Private`pi", "[", "t", "]"}],
    "2"], "//.", 
  RowBox[{
   RowBox[{"modelsP", "[", "\"\<NRC\>\"", "]"}], "[", 
   "\"\<uncondMomOfStateVars\>\"", "]"}]}]}], "Input",
 CellChangeTimes->{{3.892672947666657*^9, 3.892672961060685*^9}, {
  3.892673000883745*^9, 3.89267302113514*^9}, {3.892719614916048*^9, 
  3.892719618957439*^9}, {3.8930040785785103`*^9, 3.893004079695918*^9}, {
  3.8930851326870317`*^9, 3.893085134265039*^9}, {3.893085720522502*^9, 
  3.893085732401978*^9}, {3.894802143132476*^9, 3.894802144687675*^9}},
 CellLabel->
  "In[135]:=",ExpressionUUID->"8f57d6c0-230e-4209-8c4b-d1d582f6c207"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.8934775856863527`*^9, 
  3.893477586003281*^9}},ExpressionUUID->"dc4c9ed5-5dc6-4c88-aca6-\
8e217d7a99a1"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.8935022343375473`*^9, 3.893502234623378*^9}, {
  3.8940829789068823`*^9, 
  3.8940829929466887`*^9}},ExpressionUUID->"7bcdb49f-93ae-44b4-88dc-\
2183d321197c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Quit", "[", "]"}], ";"}]], "Input",
 CellLabel->
  "In[387]:=",ExpressionUUID->"90cb02f9-9de5-445c-bc50-894b8b4c4b24"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"testFileName", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"DirectoryName", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "1"}], "]"}], ",", 
      RowBox[{
       RowBox[{"FileBaseName", "[", 
        RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", 
       "\"\<.wlt\>\""}]}], "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pacletDir", "=", 
   RowBox[{"DirectoryName", "[", 
    RowBox[{"testFileName", ",", "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PacletDirectoryLoad", "[", "pacletDir", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"testContextBase", "=", 
   RowBox[{"FileBaseName", "[", "testFileName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$ContextPath", "=", 
   RowBox[{"Cases", "[", 
    RowBox[{"$ContextPath", ",", 
     RowBox[{"Except", "[", "\"\<PacletizedResourceFunctions`\>\"", "]"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"packageFileName", "=", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"DirectoryName", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
     "\"\<Kernel\>\"", ",", "\"\<Model\>\"", ",", 
     RowBox[{
      RowBox[{"FileBaseName", "[", 
       RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", "\"\<.wl\>\""}]}],
     "}"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsSubset", "=", 
   RowBox[{"KeySelect", "[", 
    RowBox[{"models", ",", 
     RowBox[{
      RowBox[{"MatchQ", "[", 
       RowBox[{"#", ",", 
        RowBox[{"\"\<BKY\>\"", "|", "\"\<NRC\>\"", " ", "|", "\"\<BS\>\""}]}],
        "]"}], "&"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsP", "=", 
   RowBox[{"processModels", "[", "modelsSubset", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894083032852919*^9, 3.894083041193509*^9}, {
  3.894083075923596*^9, 3.8940830920058126`*^9}, {3.894361569276671*^9, 
  3.8943615895638247`*^9}, {3.894361669114295*^9, 3.894361669541378*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"cdc629b6-fbd6-4208-95b9-d0d6adcf2f45"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"modKey", "=", "\"\<NRC\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", "=", 
   RowBox[{"modelsP", "[", "modKey", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.8940122909902773`*^9, 3.89401229604634*^9}},
 CellLabel->"In[12]:=",ExpressionUUID->"620a8a25-4285-4a72-83fb-a24b1297e31f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`CreateEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`\
ComputeUnconditionalExpectations`\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.893475426984501*^9, 3.8934754574415617`*^9}, 
   3.893475508048188*^9, {3.8934755568764133`*^9, 3.8934755687149878`*^9}, 
   3.893475828221492*^9, {3.893479637099803*^9, 3.893479663406609*^9}, 
   3.8934910699514723`*^9, {3.8935022761826897`*^9, 3.893502282211446*^9}, {
   3.893502316676261*^9, 3.8935023251038647`*^9}, {3.8935023727174053`*^9, 
   3.893502389673218*^9}, {3.893504469245676*^9, 3.893504475507852*^9}, {
   3.893504562597014*^9, 3.8935045658445883`*^9}, {3.8935105322749643`*^9, 
   3.893510532599001*^9}, {3.8936686624418297`*^9, 3.8936689873855457`*^9}, {
   3.893669043674778*^9, 3.893669054501593*^9}, {3.893669087530555*^9, 
   3.89366909059958*^9}, {3.893669174703747*^9, 3.893669201795333*^9}, {
   3.893669249637409*^9, 3.8936692515858297`*^9}, {3.893669414746676*^9, 
   3.893669433653428*^9}, {3.893892430659625*^9, 3.8938924360817823`*^9}, {
   3.893892584390596*^9, 3.893892586846405*^9}, {3.8939523632375727`*^9, 
   3.8939523667989407`*^9}, {3.893953420699018*^9, 3.893953421799569*^9}, {
   3.894095761055872*^9, 3.8940957612778187`*^9}, {3.894294748969644*^9, 
   3.894294749222396*^9}},
 CellLabel->"In[14]:=",ExpressionUUID->"13fc04e9-6ece-443e-a69b-196c320ee2e6"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"solveEulerEq", "//", "Options"}], "=", 
   RowBox[{"{", "\n", "\t", 
    RowBox[{
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", "8"}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     ",", "\n", "\t", 
     RowBox[{"\"\<maxMaturity\>\"", "->", "6"}], ",", "\n", "\t", 
     RowBox[{"\"\<parameters\>\"", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", "\t", 
     RowBox[{"\"\<FindRootOptions\>\"", "->", 
      RowBox[{"{", 
       RowBox[{"MaxIterations", "->", "1500"}], 
       RowBox[{"(*", 
        RowBox[{",", 
         RowBox[{"\"\<FindRootOptions\>\"", "->", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"PrecisionGoal", "\[Rule]", "$MachinePrecision"}], ",", 
            RowBox[{"AccuracyGoal", "\[Rule]", "$MachinePrecision"}], ",", 
            RowBox[{"WorkingPrecision", "->", "$MachinePrecision"}]}]}]}]}], 
        "*)"}], "}"}]}], ",", "\n", "\t", 
     RowBox[{"\"\<RecurrenceTableOptions\>\"", "->", 
      RowBox[{"{", 
       RowBox[{"\"\<DependentVariables\>\"", "->", "Automatic"}], "}"}]}]}], 
    "\n", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", "5"}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"infoModel", "=", 
    RowBox[{"<|", "\[IndentingNewLine]", "\t", 
     RowBox[{"\"\<initialGuess\>\"", "->", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"{", 
          RowBox[{"1", ",", "12"}], "}"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "\[IndentingNewLine]", "|>"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<wc\>\"", ",", "opts", ",", "infoModel"}], "]"}], "===", 
  "5"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<wc\>\"", ",", 
    RowBox[{"{", "}"}], ",", "infoModel"}], "]"}], "===", 
  RowBox[{"{", 
   RowBox[{"1", ",", "12"}], "}"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<wc\>\"", ",", 
    RowBox[{"{", "}"}], ",", 
    RowBox[{"<|", "|>"}]}], "]"}], "===", 
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<wc\>\"", ",", 
    RowBox[{"{", "}"}]}], "]"}], "===", 
  RowBox[{"getStartingValues", "[", "\"\<wc\>\"", "]"}], "===", 
  "8"}]}], "Input",
 CellChangeTimes->{{3.8940956642110367`*^9, 3.89409566647744*^9}, {
   3.894095710321094*^9, 3.8940957400530252`*^9}, {3.89409577121728*^9, 
   3.8940957740329523`*^9}, 3.8940958280464497`*^9, {3.894095958379838*^9, 
   3.894096009881867*^9}},
 CellLabel->"In[19]:=",ExpressionUUID->"8bc5d04b-847b-4d6a-a8c8-1851951a7046"],

Cell[BoxData[{
 RowBox[{"Ewc", " ", "=", " ", 
  RowBox[{"uncondE", "[", 
   RowBox[{
    RowBox[{"wc", "[", "t", "]"}], ",", "model"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"info", " ", "=", " ", 
   RowBox[{"modelsExtraInfo", "[", "modKey", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.893952473077491*^9, 3.893952527869205*^9}, {
   3.893952985886414*^9, 3.8939530652548857`*^9}, {3.8939531412247877`*^9, 
   3.8939531433623753`*^9}, 3.893953244381579*^9},
 CellLabel->"In[25]:=",ExpressionUUID->"3b49784f-714a-4918-8fbf-ebf54debb929"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Subset", " ", "of", " ", "coefficients", " ", "that", " ", "need", " ", 
    "to", " ", "be", " ", "solved", " ", "for"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"coefficientNamesList", " ", "=", 
   RowBox[{"{", " ", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "\"\<wc\>\"",
        "]"}], "[", 
      RowBox[{"[", "2", "]"}], "]"}], " ", ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
        "\"\<wc\>\"", "]"}], "[", 
       RowBox[{"[", "2", "]"}], "]"}], " ", "[", 
      RowBox[{"[", 
       RowBox[{"{", 
        RowBox[{"1", ",", "3", ",", "5"}], "}"}], "]"}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
         "\"\<wc\>\"", "]"}], "[", 
        RowBox[{"[", "2", "]"}], "]"}], " ", "[", 
       RowBox[{"[", "1", "]"}], "]"}], "}"}]}], "\[IndentingNewLine]", 
    "}"}]}]}]], "Input",
 CellChangeTimes->{{3.893952473077491*^9, 3.893952527869205*^9}, {
  3.893952925720702*^9, 3.8939529617769737`*^9}, {3.8939655736252003`*^9, 
  3.893965575358595*^9}, {3.8940096159234743`*^9, 3.894009616652429*^9}},
 CellLabel->"In[28]:=",ExpressionUUID->"91ebc554-3000-4ebb-9357-0ba3928cd721"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "1", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"formatStartingValues", "[", 
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "1", "]"}], "]"}], ",", "Ewc", ",", " ", "opts", ",", " ", 
   "info"}], "]"}]}], "Input",
 CellChangeTimes->{{3.893952473077491*^9, 3.893952527869205*^9}, {
  3.893952985886414*^9, 3.8939530652548857`*^9}, {3.8939531412247877`*^9, 
  3.8939531433623753`*^9}, {3.894007550520996*^9, 3.894007550749961*^9}},
 CellLabel->"In[29]:=",ExpressionUUID->"43b399a0-da79-4547-bccb-d060c2f536d3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "initial", " ", "guesses", " ", "that", " ", "the", " ", "function", " ", 
    "accepts"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"goodInitialGuess", "=", 
     RowBox[{"{", "\[IndentingNewLine]", "\t", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "0", "]"}], ",", "4"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "55"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "0", "]"}], ",", "4", ",", "0", ",", "5"}], 
          "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33", ",", "32"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "55"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "0", "]"}], ",", "4", ",", "0"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "55"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "0", "]"}], ",", "4", ",", "0", ",", "5"}], 
          "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "55"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", "1", ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "3", "]"}], ",", "4", ",", "0", ",", "5"}], 
          "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "5", "]"}], ",", "4", ",", "0", ",", "5"}], 
          "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "4", "]"}], ",", "4", ",", "0", ",", "5"}], 
          "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", "1", ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{"2", ",", "1", ",", "5"}], "}"}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2"}], "}"}], "}"}], ",", "\[IndentingNewLine]", 
       "\t", 
       RowBox[{"{", 
        RowBox[{"{", "1", "}"}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"2", ",", "1", ",", "3"}], "}"}], ",", "\[IndentingNewLine]", 
       "\t", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", "1", "}"}]}], "\[IndentingNewLine]", "}"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "initial", " ", "guesses", " ", "that", " ", "return", " ", 
     "unevaluated"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"badInitialGuess", "=", 
     RowBox[{"{", "\[IndentingNewLine]", "\t", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "0", "]"}], ",", "x"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "55"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "0", "]"}], ",", "4"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "55"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "0", "]"}], ",", "4"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "15", ",", "55"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"A", "[", "0", "]"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "55"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2", ",", "3", ",", "7"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "3", "]"}], ",", "4", ",", "0", ",", "5"}], 
          "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "5", "]"}], ",", "0", ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"4", ",", "0", ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", "33"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", "\t", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"A", "[", "2", "]"}], "}"}], ",", 
         RowBox[{"{", "33", "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"33", ",", "22"}], "}"}]}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "2", "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"22", ",", "33", ",", "1"}], "}"}]}], "}"}]}], "}"}], ",",
        "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2", ",", "3"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], "}"}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{"{", "1", "}"}], "}"}], "}"}], ",", "\[IndentingNewLine]", 
       "\t", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2", ",", "3", ",", "4", ",", "5"}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2", ",", "3", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"A", "[", "1", "]"}], ",", "3"}], "}"}]}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"1", ",", 
         RowBox[{"A", "[", "0", "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
       "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"A", "[", "0", "]"}], ",", "1"}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"A", "[", "0", "]"}]}], "\[IndentingNewLine]", "}"}]}], ";"}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.8939217137294493`*^9, 3.893921868915162*^9}, {
   3.893921900815027*^9, 3.893921901133059*^9}, {3.893921983468583*^9, 
   3.893922034156869*^9}, {3.8939221537974787`*^9, 3.893922176958849*^9}, 
   3.8939222137343817`*^9, {3.893922273572997*^9, 3.893922289224063*^9}, {
   3.893922321892295*^9, 3.893922328791876*^9}, {3.8939223716542397`*^9, 
   3.8939225116014214`*^9}, {3.893922545173026*^9, 3.893922568455331*^9}, {
   3.893922653943976*^9, 3.8939229273195343`*^9}, {3.893922985314685*^9, 
   3.893923099837551*^9}, {3.893923253366276*^9, 3.8939232705593653`*^9}, {
   3.893923374353862*^9, 3.8939233999994907`*^9}, {3.89392343390699*^9, 
   3.893923623249894*^9}, {3.893923663350339*^9, 3.8939238892701387`*^9}, {
   3.893923919463461*^9, 3.893924073983646*^9}, {3.893924139707138*^9, 
   3.893924228430522*^9}, 3.893924467527343*^9, {3.893924506459247*^9, 
   3.89392451569074*^9}, 3.893924595412863*^9, {3.8939262542830887`*^9, 
   3.893926262744074*^9}, 3.893952431419997*^9, {3.893961585437393*^9, 
   3.893961585733547*^9}, {3.893964800611703*^9, 3.89396481654418*^9}, {
   3.8940420184404593`*^9, 3.89404202255116*^9}, {3.894184742256136*^9, 
   3.894184771948943*^9}, {3.8943098350573997`*^9, 3.894309835617037*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"e027fc68-f327-4075-8edb-fed9012963fd"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "1", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"formatStartingValues", "[", 
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "1", "]"}], "]"}], ",", "Ewc", ",", " ", "opts", ",", " ", 
   "info"}], "]"}]}], "Input",
 CellChangeTimes->{{3.8939532731039553`*^9, 3.8939532738245*^9}, {
   3.8940076018819227`*^9, 3.894007602095215*^9}, {3.894008334661241*^9, 
   3.894008402886579*^9}, 3.8940084528737707`*^9, {3.894008485669986*^9, 
   3.894008504250986*^9}},
 CellLabel->"In[33]:=",ExpressionUUID->"84f8ea75-e165-4751-8d9d-f994ad103a88"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"formatStartingValues", "[", 
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "2", "]"}], "]"}], ",", "Ewc", ",", " ", "opts", ",", " ", 
   "info"}], "]"}]}], "Input",
 CellChangeTimes->{{3.894008493628612*^9, 3.894008520923046*^9}},
 CellLabel->"In[35]:=",ExpressionUUID->"026336d9-458b-4853-a367-c04aaaf51047"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "3", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"ig", " ", "=", " ", 
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<wc\>\"", ",", "opts", ",", "info"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NumberQ", "[", "ig", "]"}], " ", "||", " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"VectorQ", "[", 
     RowBox[{"ig", ",", "NumberQ"}], "]"}], " ", "&&", " ", 
    RowBox[{"1", "<=", 
     RowBox[{"Length", "[", "ig", "]"}], "<=", "3"}]}], 
   ")"}]}], "\[IndentingNewLine]", 
 RowBox[{"formatStartingValues", "[", 
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "3", "]"}], "]"}], ",", "Ewc", ",", " ", "opts", ",", " ", 
   "info"}], "]"}]}], "Input",
 CellChangeTimes->{
  3.893953296510604*^9, {3.893953590432371*^9, 3.8939535990033092`*^9}, {
   3.894007616935617*^9, 3.894007628950695*^9}, {3.8940085235051413`*^9, 
   3.894008556179582*^9}},
 CellLabel->"In[37]:=",ExpressionUUID->"db4b1090-4088-423c-ad5a-ab85282fe2d0"],

Cell[BoxData[{
 RowBox[{"goodInitialGuess", "[", 
  RowBox[{"[", "1", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv11", "=", 
  RowBox[{"formatStartingValues", "[", 
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "Ewc", ",", " ", 
    RowBox[{"{", 
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"goodInitialGuess", "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "}"}], ",", " ", "info"}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.894007720292506*^9, 3.894007801195807*^9}, {
   3.894008614075253*^9, 3.894008631115632*^9}, {3.894008675778112*^9, 
   3.894008739603981*^9}, {3.894008770356821*^9, 3.89400890394394*^9}, {
   3.894008942945979*^9, 3.8940089540336227`*^9}, {3.894009026285941*^9, 
   3.894009078039753*^9}, {3.8940091313058643`*^9, 3.894009148943226*^9}, {
   3.8942716021104*^9, 3.894271603781399*^9}, 3.8942716453803463`*^9, {
   3.894271681172233*^9, 3.89427169041949*^9}},
 CellLabel->"In[41]:=",ExpressionUUID->"d034d391-0bcb-4920-bfa7-0c652d20be49"],

Cell[BoxData[{
 RowBox[{"goodInitialGuess", "[", 
  RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv12", "=", 
  RowBox[{"formatStartingValues", "[", 
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "Ewc", ",", " ", 
    RowBox[{"{", 
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"goodInitialGuess", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "}"}], ",", " ", "info"}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.894009170776063*^9, 3.894009175054813*^9}, {
  3.8942716070688753`*^9, 3.894271647027639*^9}},
 CellLabel->"In[43]:=",ExpressionUUID->"da7d5618-e9a1-4078-92fe-76117811d93e"],

Cell[BoxData[{
 RowBox[{"goodInitialGuess", "[", 
  RowBox[{"[", "3", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv13", "=", 
  RowBox[{"formatStartingValues", "[", 
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "Ewc", ",", " ", 
    RowBox[{"{", 
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"goodInitialGuess", "[", 
          RowBox[{"[", "3", "]"}], "]"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "}"}], ",", " ", "info"}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.894009172059678*^9, 3.894009176459064*^9}, {
  3.894271609711733*^9, 3.894271647858549*^9}},
 CellLabel->"In[45]:=",ExpressionUUID->"9d9b4283-847a-44de-b4b0-230ab309b86d"],

Cell[BoxData[{
 RowBox[{"goodInitialGuess", "[", 
  RowBox[{"[", "4", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv14", "=", 
  RowBox[{"formatStartingValues", "[", 
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "Ewc", ",", " ", 
    RowBox[{"{", 
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"goodInitialGuess", "[", 
          RowBox[{"[", "4", "]"}], "]"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "}"}], ",", " ", "info"}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.894009173203264*^9, 3.894009179442919*^9}, {
  3.89427161061578*^9, 3.894271648716139*^9}},
 CellLabel->"In[47]:=",ExpressionUUID->"d6746999-76d8-4480-97b5-31f9b50e88b8"],

Cell[BoxData[{
 RowBox[{"goodInitialGuess", "[", 
  RowBox[{"[", "5", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv15", "=", 
  RowBox[{"formatStartingValues", "[", 
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "Ewc", ",", 
    RowBox[{"{", 
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"goodInitialGuess", "[", 
          RowBox[{"[", "5", "]"}], "]"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "}"}], ",", " ", "info"}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.89396169125457*^9, 3.893961762853632*^9}, 
   3.893963808376987*^9, {3.8939640472237873`*^9, 3.893964101911887*^9}, {
   3.894271611544249*^9, 3.8942716497882566`*^9}},
 CellLabel->"In[49]:=",ExpressionUUID->"fe53db50-fc9a-4702-8f21-fb71f50f7d85"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"goodInitialGuess", "[", 
  RowBox[{"[", "1", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv21", "=", 
  RowBox[{"formatStartingValues", "[", 
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "2", "]"}], "]"}], ",", "Ewc", ",", " ", 
    RowBox[{"{", 
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"goodInitialGuess", "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "}"}], ",", " ", "info"}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.8940092398089457`*^9, 3.894009244563202*^9}, 
   3.894271613679487*^9, 3.894271650977804*^9},
 CellLabel->"In[51]:=",ExpressionUUID->"5c43fe11-077e-4ebf-bd07-abd16bc32e98"],

Cell[BoxData[{
 RowBox[{"goodInitialGuess", "[", 
  RowBox[{"[", "5", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv35", "=", 
  RowBox[{"formatStartingValues", "[", 
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "3", "]"}], "]"}], ",", "Ewc", ",", 
    RowBox[{"{", 
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"goodInitialGuess", "[", 
          RowBox[{"[", "5", "]"}], "]"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "}"}], ",", " ", "info"}], "]"}]}]}], "Input",
 CellChangeTimes->{
  3.894197430784247*^9, 3.894271617638917*^9, {3.89427167175626*^9, 
   3.8942716727413073`*^9}},
 CellLabel->"In[54]:=",ExpressionUUID->"2179c704-4b27-4152-a0ca-351ef9db1f8c"],

Cell[BoxData[
 RowBox[{"sv1", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"#", ",", 
      RowBox[{"formatStartingValues", "[", 
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "1", "]"}], "]"}], ",", "Ewc", ",", 
        RowBox[{"{", 
         RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
          RowBox[{"\[LeftAssociation]", 
           RowBox[{
            RowBox[{"\"\<Ewc\>\"", "\[Rule]", "#"}], ",", 
            RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], 
           "\[RightAssociation]"}]}], "}"}], ",", " ", "info"}], "]"}]}], 
     "}"}], "&"}], "/@", "goodInitialGuess"}]}]], "Input",
 CellChangeTimes->{{3.893953762121235*^9, 3.893953850590892*^9}, {
  3.893961005610182*^9, 3.893961048623629*^9}, {3.893961229935532*^9, 
  3.893961256288871*^9}, {3.893961513132221*^9, 3.893961562682856*^9}, {
  3.8942717082364197`*^9, 3.894271709332616*^9}},
 CellLabel->"In[56]:=",ExpressionUUID->"025a82e1-2b38-46b5-911b-b6f574488a74"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv2", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"#", ",", 
      RowBox[{"formatStartingValues", "[", 
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "2", "]"}], "]"}], ",", "Ewc", ",", 
        RowBox[{"{", 
         RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
          RowBox[{"\[LeftAssociation]", 
           RowBox[{
            RowBox[{"\"\<Ewc\>\"", "\[Rule]", "#"}], ",", 
            RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], 
           "\[RightAssociation]"}]}], "}"}], ",", " ", "info"}], "]"}]}], 
     "}"}], "&"}], "/@", "goodInitialGuess"}]}]}], "Input",
 CellChangeTimes->{
  3.893965534521327*^9, 3.8939656166599483`*^9, {3.894009307551749*^9, 
   3.894009307970613*^9}, {3.894271710916317*^9, 3.8942717119875298`*^9}},
 CellLabel->"In[57]:=",ExpressionUUID->"ce8b37ec-1863-4ca9-b168-2f7a6ae09fa8"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "3", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv3", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"#", ",", 
      RowBox[{"formatStartingValues", "[", 
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "3", "]"}], "]"}], ",", "Ewc", ",", 
        RowBox[{"{", 
         RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
          RowBox[{"\[LeftAssociation]", 
           RowBox[{
            RowBox[{"\"\<Ewc\>\"", "\[Rule]", "#"}], ",", 
            RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], 
           "\[RightAssociation]"}]}], "}"}], ",", " ", "info"}], "]"}]}], 
     "}"}], "&"}], "/@", "goodInitialGuess"}]}]}], "Input",
 CellChangeTimes->{
  3.893965708101665*^9, {3.894009491778522*^9, 3.894009492139224*^9}, {
   3.894271713773384*^9, 3.8942717151083403`*^9}},
 CellLabel->"In[59]:=",ExpressionUUID->"e089f5f0-b0ec-4494-be23-76d733018465"],

Cell[BoxData[{
 RowBox[{"Depth", "/@", 
  RowBox[{"sv1", "[", 
   RowBox[{"[", 
    RowBox[{";;", ",", "2"}], "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Depth", "/@", 
  RowBox[{"sv2", "[", 
   RowBox[{"[", 
    RowBox[{";;", ",", "2"}], "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Depth", "/@", 
  RowBox[{"sv3", "[", 
   RowBox[{"[", 
    RowBox[{";;", ",", "2"}], "]"}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.8942717287254467`*^9, 3.894271783112268*^9}},
 CellLabel->"In[61]:=",ExpressionUUID->"a7a9b407-15a1-49bf-a313-cb95527c1724"],

Cell[BoxData[
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]], "Input",
 CellLabel->"In[64]:=",ExpressionUUID->"b59f5c25-98a1-4c0e-9696-8e737e6d2046"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"goodInitialGuess", "[", 
  RowBox[{"[", "1", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv21", "=", 
  RowBox[{"formatStartingValues", "[", 
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "2", "]"}], "]"}], ",", "Ewc", ",", " ", 
    RowBox[{"{", 
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"goodInitialGuess", "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
     "}"}], ",", " ", "info"}], "]"}]}]}], "Input",
 CellLabel->"In[65]:=",ExpressionUUID->"75817842-25b6-4977-b8b4-09f844564024"],

Cell[BoxData[{
 RowBox[{"coefficientNames", " ", "=", " ", 
  RowBox[{"coefficientNamesList", "[", 
   RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"#", ",", 
       RowBox[{"createStartingPoint", "[", 
        RowBox[{"coefficientNames", ",", "Ewc", ",", " ", 
         RowBox[{"{", 
          RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
           RowBox[{"\[LeftAssociation]", 
            RowBox[{
             RowBox[{"\"\<Ewc\>\"", "\[Rule]", "#"}], ",", 
             RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], 
            "\[RightAssociation]"}]}], "}"}], ",", " ", "info"}], "]"}]}], 
      "}"}], "&"}], "/@", "goodInitialGuess"}], " ", "//.", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], "//", 
  "Activate"}]}], "Input",
 CellChangeTimes->{3.8943096184396677`*^9, 3.894328887886692*^9},
 CellLabel->"In[68]:=",ExpressionUUID->"4585b255-7a30-4d9b-a82e-dd46f8fb0649"],

Cell[BoxData[{
 RowBox[{"coefficientNames", " ", "=", " ", 
  RowBox[{"coefficientNamesList", "[", 
   RowBox[{"[", "2", "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"#", ",", 
       RowBox[{"createStartingPoint", "[", 
        RowBox[{"coefficientNames", ",", "Ewc", ",", " ", 
         RowBox[{"{", 
          RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
           RowBox[{"\[LeftAssociation]", 
            RowBox[{
             RowBox[{"\"\<Ewc\>\"", "\[Rule]", "#"}], ",", 
             RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], 
            "\[RightAssociation]"}]}], "}"}], ",", " ", "info"}], "]"}]}], 
      "}"}], "&"}], "/@", "goodInitialGuess"}], " ", "//.", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], "//", 
  "Activate"}]}], "Input",
 CellChangeTimes->{{3.894015708204982*^9, 3.894015719899776*^9}, 
   3.894071991057328*^9, {3.8940964422709084`*^9, 3.8940964447825813`*^9}, {
   3.8942707613158197`*^9, 3.894270761613636*^9}, 3.894270968424049*^9, {
   3.894303660469122*^9, 3.8943036657212467`*^9}, 3.894328890593758*^9},
 CellLabel->"In[70]:=",ExpressionUUID->"775deee8-665d-499b-a62d-c3101ed56dd0"],

Cell[BoxData[{
 RowBox[{"coefficientNames", " ", "=", " ", 
  RowBox[{"coefficientNamesList", "[", 
   RowBox[{"[", "3", "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"#", ",", 
       RowBox[{"createStartingPoint", "[", 
        RowBox[{"coefficientNames", ",", "Ewc", ",", " ", 
         RowBox[{"{", 
          RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
           RowBox[{"\[LeftAssociation]", 
            RowBox[{
             RowBox[{"\"\<Ewc\>\"", "\[Rule]", "#"}], ",", 
             RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], 
            "\[RightAssociation]"}]}], "}"}], ",", " ", "info"}], "]"}]}], 
      "}"}], "&"}], "/@", "goodInitialGuess"}], " ", "//.", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], "//", 
  "Activate"}]}], "Input",
 CellChangeTimes->{
  3.894015783620363*^9, 3.894071995906568*^9, {3.894096483230084*^9, 
   3.894096485820322*^9}, {3.894270762796645*^9, 3.8942707631198*^9}, 
   3.8942709675457087`*^9, 3.894328892840754*^9},
 CellLabel->"In[72]:=",ExpressionUUID->"1439f17e-e517-4e91-981f-8114b120b9b0"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.894309545173015*^9, 
  3.894309546146078*^9}},ExpressionUUID->"a4e1decc-8fa6-4bf3-bac3-\
455339d151ab"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Quit", "[", "]"}], ";"}]], "Input",
 CellLabel->
  "In[262]:=",ExpressionUUID->"01176d12-5fa4-499f-8122-5204dbb92597"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"testFileName", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"DirectoryName", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "1"}], "]"}], ",", 
      RowBox[{
       RowBox[{"FileBaseName", "[", 
        RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", 
       "\"\<.wlt\>\""}]}], "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pacletDir", "=", 
   RowBox[{"DirectoryName", "[", 
    RowBox[{"testFileName", ",", "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PacletDirectoryLoad", "[", "pacletDir", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"testContextBase", "=", 
   RowBox[{"FileBaseName", "[", "testFileName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$ContextPath", "=", 
   RowBox[{"Cases", "[", 
    RowBox[{"$ContextPath", ",", 
     RowBox[{"Except", "[", "\"\<PacletizedResourceFunctions`\>\"", "]"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"packageFileName", "=", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"DirectoryName", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
     "\"\<Kernel\>\"", ",", "\"\<Model\>\"", ",", 
     RowBox[{
      RowBox[{"FileBaseName", "[", 
       RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", "\"\<.wl\>\""}]}],
     "}"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsSubset", "=", 
   RowBox[{"KeySelect", "[", 
    RowBox[{"models", ",", 
     RowBox[{
      RowBox[{"MatchQ", "[", 
       RowBox[{"#", ",", 
        RowBox[{"\"\<BY\>\"", "|", "\"\<NRC\>\"", " ", "|", "\"\<BS\>\""}]}], 
       "]"}], "&"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsP", "=", 
   RowBox[{"processModels", "[", "modelsSubset", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894083032852919*^9, 3.894083041193509*^9}, {
   3.894083075923596*^9, 3.8940830920058126`*^9}, 3.894361619825488*^9},
 CellLabel->"In[1]:=",ExpressionUUID->"f4b7fea1-4130-4d94-8545-e13f9ac3d962"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.894081924857366*^9, 3.8940819458285027`*^9}, {
  3.894083030657384*^9, 3.894083048525137*^9}, {3.894361006042379*^9, 
  3.894361006173736*^9}, {3.894361430963417*^9, 3.894361431646826*^9}},
 CellLabel->"In[26]:=",ExpressionUUID->"04c7def4-f05c-44e5-94e8-6bab0de5e061"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"modelName", "=", "\"\<NRC\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", "=", 
   RowBox[{"modelsP", "[", "modelName", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ratio", " ", "=", " ", "\"\<wc\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<NRC\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "4.6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", "5.5", "}"}], ",", 
          RowBox[{"{", "6.3", "}"}], ",", 
          RowBox[{"{", "5.6", "}"}]}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<BY\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"{", "4.7", "}"}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<BS\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"{", "4.7", "}"}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", " ", "=", " ", 
   RowBox[{"modelOpts", "[", "modelName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"infoModel", "=", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"KeyExistsQ", "[", 
       RowBox[{"modelsExtraInfo", ",", "modelName"}], "]"}], ",", 
      RowBox[{"modelsExtraInfo", "[", "modelName", "]"}], ",", 
      RowBox[{"<|", "|>"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"parameters", "=", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.8944681778383512`*^9}, {
   3.89446821211826*^9, 3.8944682696995687`*^9}, {3.894469751091722*^9, 
   3.894469751348818*^9}, {3.894469813517416*^9, 3.894469813765861*^9}, 
   3.894470250088759*^9, {3.894470289234385*^9, 3.894470289473773*^9}, {
   3.8945157908662663`*^9, 3.894515791512835*^9}, {3.894516591569031*^9, 
   3.8945165919378557`*^9}, {3.894516688226506*^9, 3.8945166887140207`*^9}, {
   3.894516764902882*^9, 3.894516798953966*^9}, {3.8945187297357388`*^9, 
   3.894518753640935*^9}, {3.8945248861332397`*^9, 3.894524887097159*^9}, {
   3.894554842318035*^9, 3.894554842542954*^9}, 3.894555696781329*^9, {
   3.8946559571994543`*^9, 3.894655957802655*^9}, 3.8946559994243717`*^9, {
   3.894656682783567*^9, 3.8946567123033047`*^9}},
 CellLabel->"In[29]:=",ExpressionUUID->"7c7e8e19-e8e7-4f88-926e-55e2dfbd0efc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"solve", " ", "system", " ", "numerically"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"coeffSol", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{"model", ",", " ", "ratio", ",", " ", "opts"}], "]"}]}], ";"}], 
   "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirst", ",", "solRest"}], "}"}], "=", 
     RowBox[{
      RowBox[{
       RowBox[{"Activate", "[", 
        RowBox[{
         RowBox[{"coeffSol", "//.", "parameters"}], " ", ",", 
         RowBox[{
         "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
          "|", "TrueQ", "|", "SameQ", " ", "|", "Map"}]}], "]"}], " ", "//.", 
       "parameters"}], "//", "Activate"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"sol", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"Join", "[", 
      RowBox[{"solFirst", ",", 
       RowBox[{"solRest", "/.", "solFirst"}], ",", "2"}], "]"}]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"Subtract", "@@@", 
       RowBox[{"(", 
        RowBox[{"First", "@", 
         RowBox[{
          RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
          "\"\<wc\>\"", "]"}]}], ")"}]}], "//.", "parameters"}], "//.", 
     "sol"}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, 
   3.894469525700728*^9, 3.894470261896461*^9},
 CellLabel->"In[38]:=",ExpressionUUID->"455014bd-b8ba-49e8-86c7-b951fd6ce8a4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"solve", " ", "for", " ", 
     RowBox[{"A", "[", "0", "]"}], " ", "numerically", " ", "using", " ", 
     "some", " ", "closed"}], "-", 
    RowBox[{"form", " ", "solutions", " ", "for", " ", "other", " ", 
     RowBox[{"A", "[", "i", "]"}]}]}], "*)"}], "\n", 
  RowBox[{
   RowBox[{
    RowBox[{"coeffSol", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{
      "model", ",", " ", "ratio", ",", " ", "opts", ",", " ", "infoModel"}], 
      "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirst", ",", "solRest"}], "}"}], "=", 
     RowBox[{
      RowBox[{"Activate", "[", 
       RowBox[{
        RowBox[{"coeffSol", "//.", "parameters"}], " ", ",", 
        RowBox[{
        "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
         "|", "TrueQ", "|", "SameQ", " ", "|", "Map"}]}], "]"}], " ", "//", 
      "Activate"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"sol", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"Join", "[", 
      RowBox[{"solFirst", ",", 
       RowBox[{"solRest", "/.", "solFirst"}], ",", "2"}], "]"}]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"Subtract", "@@@", 
       RowBox[{"(", 
        RowBox[{"First", "@", 
         RowBox[{
          RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
          "\"\<wc\>\"", "]"}]}], ")"}]}], "//.", "parameters"}], "//.", 
     "sol"}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"preferred", " ", "solution"}], ",", " ", 
     RowBox[{
     "store", " ", "to", " ", "use", " ", "when", " ", "solving", " ", "for", 
      " ", "stocks"}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"solWc", "=", "sol"}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, {
   3.8944682918068542`*^9, 3.89446830476083*^9}, {3.894468370721027*^9, 
   3.8944683713399687`*^9}, 3.894469282354012*^9, 3.8944702652375107`*^9},
 CellLabel->"In[43]:=",ExpressionUUID->"3af9600f-dd7c-42da-90f7-f76edc0d5e55"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"empty", " ", "opts"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"coeffSol", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{"model", ",", " ", "ratio", ",", " ", 
       RowBox[{"{", "}"}], ",", "infoModel"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirst", ",", "solRest"}], "}"}], "=", 
     RowBox[{
      RowBox[{"Activate", "[", 
       RowBox[{
        RowBox[{"coeffSol", "//.", "parameters"}], " ", ",", 
        RowBox[{
        "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
         "|", "TrueQ", "|", "SameQ", " ", "|", "Map"}]}], "]"}], " ", "//", 
      "Activate"}]}], ";"}], "\n", 
   RowBox[{"sol", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"Join", "[", 
      RowBox[{"solFirst", ",", 
       RowBox[{"solRest", "/.", "solFirst"}], ",", "2"}], "]"}]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"Subtract", "@@@", 
       RowBox[{"(", 
        RowBox[{"First", "@", 
         RowBox[{
          RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
          "\"\<wc\>\"", "]"}]}], ")"}]}], "//.", "parameters"}], "//.", 
     "sol"}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, 
   3.8944682918068542`*^9, {3.8944693116303177`*^9, 3.89446932924091*^9}},
 CellLabel->"In[49]:=",ExpressionUUID->"52b66b70-56ca-42b0-acce-2505a75f2a03"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"default", " ", "opts"}], ",", " ", "infoModel"}], "*)"}], "\n", 
  RowBox[{
   RowBox[{
    RowBox[{"coeffSol", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{"model", ",", " ", "ratio"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirst", ",", "solRest"}], "}"}], "=", 
     RowBox[{
      RowBox[{"Activate", "[", 
       RowBox[{
        RowBox[{"coeffSol", "//.", "parameters"}], " ", ",", 
        RowBox[{
        "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
         "|", "TrueQ", "|", "SameQ", " ", "|", "Map"}]}], "]"}], " ", "//", 
      "Activate"}]}], ";"}], "\n", 
   RowBox[{"sol", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"Join", "[", 
      RowBox[{"solFirst", ",", 
       RowBox[{"solRest", "/.", "solFirst"}], ",", "2"}], "]"}]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"Subtract", "@@@", 
       RowBox[{"(", 
        RowBox[{"First", "@", 
         RowBox[{
          RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
          "\"\<wc\>\"", "]"}]}], ")"}]}], "//.", "parameters"}], "//.", 
     "sol"}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, 
   3.8944682918068542`*^9, {3.8944693116303177`*^9, 3.8944693421235037`*^9}},
 CellLabel->"In[54]:=",ExpressionUUID->"a1285526-9bec-405a-8d41-d8f53982839a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", "stocks", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"ratioStocks", " ", "=", " ", "\"\<pd\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"optsStocks", " ", "=", "opts"}], " ", ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"infoModelStocks", "=", "infoModel"}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, 
   3.8944682918068542`*^9, {3.8944693116303177`*^9, 3.8944693421235037`*^9}, 
   3.894470300416338*^9, {3.894470481246163*^9, 3.894470485269595*^9}},
 CellLabel->"In[59]:=",ExpressionUUID->"33c03bca-2ae7-4a5b-a01a-a4f31cb6f5c1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"solve", " ", "system", " ", "numerically"}], "*)"}], "\n", 
  RowBox[{
   RowBox[{
    RowBox[{"csStocks", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{"model", ",", " ", "ratioStocks", ",", " ", "optsStocks"}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}], "=", 
     RowBox[{
      RowBox[{"Activate", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"csStocks", "//.", "parameters"}], "/.", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", "solWc"}], ")"}]}], " ", ",", 
        RowBox[{
        "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
         "|", "TrueQ", "|", "SameQ", " ", "|", "Map", " ", "|", " ", 
         "MapThread"}]}], "]"}], "//", "Activate"}]}], ";"}], "\n", 
   RowBox[{"solStocks", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"MapThread", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"#1", ",", 
           RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
       RowBox[{"{", 
        RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}]}], "]"}]}]}], 
   "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"Subtract", "@@@", 
          RowBox[{"(", 
           RowBox[{"First", "@", 
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<pd\>\"", "]"}]}], ")"}]}], ",", 
         RowBox[{"{", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", ",", 
           "1", ",", 
           RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}]}], "}"}]}], "]"}],
        "//.", "parameters"}], "//.", 
      RowBox[{"Flatten", "@", "solStocks"}]}], "/.", 
     RowBox[{"(", 
      RowBox[{"Flatten", "@", "solWc"}], ")"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, 
   3.8944682918068542`*^9, {3.8944693116303177`*^9, 3.8944693421235037`*^9}, 
   3.894470300416338*^9, 3.894470333575635*^9, {3.89447048318235*^9, 
   3.894470483639082*^9}},
 CellLabel->"In[62]:=",ExpressionUUID->"ba8dfb62-94cf-46f2-80f4-e98ff11d4771"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"solve", " ", "for", " ", 
     RowBox[{"B", "[", "0", "]"}], " ", "numerically", " ", "using", " ", 
     "closed"}], "-", 
    RowBox[{"form", " ", "solutions", " ", "for", " ", "other", " ", 
     RowBox[{"B", "'"}], "s"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"csStocks", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{
      "model", ",", " ", "ratioStocks", ",", " ", "optsStocks", ",", " ", 
       "infoModelStocks"}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}], "=", 
     RowBox[{
      RowBox[{"Activate", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"csStocks", "//.", "parameters"}], "/.", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", "solWc"}], ")"}]}], " ", ",", 
        RowBox[{
        "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
         "|", "TrueQ", "|", "SameQ", " ", "|", "Map", " ", "|", " ", 
         "MapThread"}]}], "]"}], "//", "Activate"}]}], ";"}], "\n", 
   RowBox[{"solStocks", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"MapThread", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"#1", ",", 
           RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
       RowBox[{"{", 
        RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}]}], "]"}]}]}], 
   "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"Subtract", "@@@", 
          RowBox[{"(", 
           RowBox[{"First", "@", 
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<pd\>\"", "]"}]}], ")"}]}], ",", 
         RowBox[{"{", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", ",", 
           "1", ",", 
           RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}]}], "}"}]}], "]"}],
        "//.", "parameters"}], "//.", 
      RowBox[{"Flatten", "@", "solStocks"}]}], "/.", 
     RowBox[{"(", 
      RowBox[{"Flatten", "@", "solWc"}], ")"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, 
   3.8944682918068542`*^9, {3.8944693116303177`*^9, 3.8944693421235037`*^9}, 
   3.894470300416338*^9, {3.894470333575635*^9, 3.894470336174252*^9}, {
   3.894470488637397*^9, 3.8944705219386578`*^9}, 3.8945158097869873`*^9, 
   3.894515988739521*^9},
 CellLabel->
  "In[218]:=",ExpressionUUID->"72979c80-e5bf-4b4b-a333-2b002a8a903d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"empty", " ", "opts"}], "*)"}], "\n", 
  RowBox[{
   RowBox[{
    RowBox[{"csStocks", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{"model", ",", " ", "ratioStocks", ",", " ", 
       RowBox[{"{", "}"}], ",", " ", "infoModelStocks"}], "]"}]}], ";"}], 
   "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}], "=", 
     RowBox[{
      RowBox[{"Activate", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"csStocks", "//.", "parameters"}], "/.", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", "solWc"}], ")"}]}], " ", ",", 
        RowBox[{
        "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
         "|", "TrueQ", "|", "SameQ", " ", "|", "Map", " ", "|", " ", 
         "MapThread"}]}], "]"}], "//", "Activate"}]}], ";"}], "\n", 
   RowBox[{"solStocks", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"MapThread", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"#1", ",", 
           RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
       RowBox[{"{", 
        RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}]}], "]"}]}]}], 
   "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"Subtract", "@@@", 
          RowBox[{"(", 
           RowBox[{"First", "@", 
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<pd\>\"", "]"}]}], ")"}]}], ",", 
         RowBox[{"{", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", ",", 
           "1", ",", 
           RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}]}], "}"}]}], "]"}],
        "//.", "parameters"}], "//.", 
      RowBox[{"Flatten", "@", "solStocks"}]}], "/.", 
     RowBox[{"(", 
      RowBox[{"Flatten", "@", "solWc"}], ")"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, 
   3.8944682918068542`*^9, {3.8944693116303177`*^9, 3.8944693421235037`*^9}, 
   3.894470300416338*^9, {3.894470333575635*^9, 3.894470341774798*^9}, 
   3.894470531450829*^9, {3.8945158795393963`*^9, 3.894515880065175*^9}, 
   3.894515982790844*^9, 3.894516098071435*^9, 3.894516677733569*^9},
 CellLabel->
  "In[223]:=",ExpressionUUID->"877366ba-d10f-4091-8268-8260410384d3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"default", " ", "opts"}], ",", " ", "infoModel"}], "*)"}], "\n", 
  RowBox[{
   RowBox[{
    RowBox[{"csStocks", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{"model", ",", " ", "ratioStocks"}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}], "=", 
     RowBox[{
      RowBox[{"Activate", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"csStocks", "//.", "parameters"}], "/.", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", "solWc"}], ")"}]}], " ", ",", 
        RowBox[{
        "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
         "|", "TrueQ", "|", "SameQ", " ", "|", "Map", " ", "|", " ", 
         "MapThread"}]}], "]"}], "//", "Activate"}]}], ";"}], "\n", 
   RowBox[{"solStocks", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"MapThread", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"#1", ",", 
           RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
       RowBox[{"{", 
        RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}]}], "]"}]}]}], 
   "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"Subtract", "@@@", 
          RowBox[{"(", 
           RowBox[{"First", "@", 
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<pd\>\"", "]"}]}], ")"}]}], ",", 
         RowBox[{"{", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", ",", 
           "1", ",", 
           RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}]}], "}"}]}], "]"}],
        "//.", "parameters"}], "//.", 
      RowBox[{"Flatten", "@", "solStocks"}]}], "/.", 
     RowBox[{"(", 
      RowBox[{"Flatten", "@", "solWc"}], ")"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, 3.8943563684871607`*^9, {3.8943564822969418`*^9, 
   3.89435651834216*^9}, {3.894357474119417*^9, 3.89435747437313*^9}, {
   3.8943585073741493`*^9, 3.894358518279698*^9}, {3.8943601078864594`*^9, 
   3.894360183583631*^9}, 3.89436030834523*^9, 3.894360445306407*^9, {
   3.894360523253133*^9, 3.8943605276633453`*^9}, {3.89436070251715*^9, 
   3.8943607377279797`*^9}, {3.894360773981256*^9, 3.894360781253281*^9}, {
   3.894361000392603*^9, 3.894361012319669*^9}, {3.8943612668217382`*^9, 
   3.89436129722506*^9}, 3.894361329477214*^9, {3.894361363924732*^9, 
   3.8943614016038103`*^9}, {3.894361434328067*^9, 3.894361434792068*^9}, 
   3.894362482335781*^9, {3.8944038921100073`*^9, 3.894403935889387*^9}, {
   3.894407469237666*^9, 3.894407474213318*^9}, {3.894407613135849*^9, 
   3.894407614248293*^9}, {3.894407646657147*^9, 3.894407646904089*^9}, 
   3.89441004311661*^9, {3.8944104228644953`*^9, 3.894410423977199*^9}, {
   3.894467892072515*^9, 3.894467918081881*^9}, {3.894467952708384*^9, 
   3.894467964696486*^9}, {3.8944679974374723`*^9, 3.894468021742711*^9}, {
   3.894468057243538*^9, 3.89446808458315*^9}, {3.894468124098263*^9, 
   3.894468124452413*^9}, {3.894468175202488*^9, 3.894468181009755*^9}, 
   3.8944682918068542`*^9, {3.8944693116303177`*^9, 3.8944693421235037`*^9}, 
   3.894470300416338*^9, {3.894470333575635*^9, 3.894470341774798*^9}, {
   3.894470541312063*^9, 3.894470544286243*^9}, {3.894515883456283*^9, 
   3.8945158836401787`*^9}, 3.894515978549432*^9, {3.894516088590973*^9, 
   3.894516103123131*^9}, 3.894516672761662*^9},
 CellLabel->
  "In[228]:=",ExpressionUUID->"5c160fc7-aa9d-4fea-886d-5c22b6ed2f74"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"real", " ", "bonds"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"ratioBonds", " ", "=", " ", "\"\<bond\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"optsBonds", "=", "opts"}], " ", ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"infoModelBonds", "=", "infoModel"}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.894621172501425*^9, 3.894621286981442*^9}, {
   3.8946216799008703`*^9, 3.8946216804296293`*^9}, {3.894622872437722*^9, 
   3.894622916936734*^9}, {3.894624384876799*^9, 3.8946243850106487`*^9}, 
   3.894628038111232*^9, 3.894628077079179*^9, {3.894631085409711*^9, 
   3.894631118527935*^9}, {3.894631727947294*^9, 3.894631785958877*^9}, {
   3.894633658227395*^9, 3.894633672624552*^9}},
 CellLabel->"In[67]:=",ExpressionUUID->"93a8594d-1fec-4c6a-8114-eace2c228b6d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"solve", " ", "numerically"}], " ", "*)"}], "\[IndentingNewLine]", 
  
  RowBox[{
   RowBox[{
    RowBox[{"csBonds", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{"model", ",", " ", "ratioBonds", ",", " ", "optsBonds"}], 
      "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"maxMaturity", "=", "12"}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstBonds", ",", "solRestBonds"}], "}"}], "=", 
     RowBox[{"Activate", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", "maxMaturity", "]"}], "&"}], "/@", "csBonds"}], 
         ")"}], "//.", "parameters"}], "/.", 
       RowBox[{"(", 
        RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"solBonds", "=", 
     RowBox[{"Sort", "/@", 
      RowBox[{"MapThread", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"#1", ",", 
            RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
        RowBox[{"{", 
         RowBox[{"solFirstBonds", ",", "solRestBonds"}], "}"}]}], "]"}]}]}], 
    ";"}], "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Subtract", "@@@", 
           RowBox[{"(", 
            RowBox[{"First", "@", 
             RowBox[{
              RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
              "\"\<bond\>\"", "]"}]}], ")"}]}], "/.", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<bond\>\"", "]"}], "[", 
            RowBox[{"[", "4", "]"}], "]"}], "->", "n"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"n", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], "//.", 
       "parameters"}], "/.", 
      RowBox[{"(", 
       RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "/.", 
     RowBox[{"Flatten", "@", "solBonds"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894633681533609*^9, 3.894633683788425*^9}},
 CellLabel->"In[70]:=",ExpressionUUID->"f78c474e-8ea2-42d0-9531-7370bb4dc96f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"solve", " ", "using", " ", "closed"}], "-", 
    RowBox[{
    "form", " ", "solutions", " ", "for", " ", "some", " ", "of", " ", "the", 
     " ", "coefficients"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"csBonds", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{
      "model", ",", " ", "ratioBonds", ",", " ", "optsBonds", ",", " ", 
       "infoModelBonds"}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"maxMaturity", "=", "12"}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstBonds", ",", "solRestBonds"}], "}"}], "=", 
     RowBox[{"Activate", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", "maxMaturity", "]"}], "&"}], "/@", "csBonds"}], 
         ")"}], "//.", "parameters"}], "/.", 
       RowBox[{"(", 
        RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"solBonds", "=", 
     RowBox[{"Sort", "/@", 
      RowBox[{"MapThread", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"#1", ",", 
            RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
        RowBox[{"{", 
         RowBox[{"solFirstBonds", ",", "solRestBonds"}], "}"}]}], "]"}]}]}], 
    ";"}], "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Subtract", "@@@", 
           RowBox[{"(", 
            RowBox[{"First", "@", 
             RowBox[{
              RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
              "\"\<bond\>\"", "]"}]}], ")"}]}], "/.", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<bond\>\"", "]"}], "[", 
            RowBox[{"[", "4", "]"}], "]"}], "->", "n"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"n", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], "//.", 
       "parameters"}], "/.", 
      RowBox[{"(", 
       RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "/.", 
     RowBox[{"Flatten", "@", "solBonds"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894621172501425*^9, 3.894621286981442*^9}, {
   3.8946216799008703`*^9, 3.8946216804296293`*^9}, {3.894622872437722*^9, 
   3.894622916936734*^9}, {3.894624384876799*^9, 3.8946243850106487`*^9}, 
   3.894628038111232*^9, 3.894628077079179*^9, {3.894631085409711*^9, 
   3.894631118527935*^9}, {3.894631727947294*^9, 3.894631785958877*^9}, {
   3.894633658227395*^9, 3.894633672624552*^9}, 3.894634501514106*^9, 
   3.8946345800792933`*^9},
 CellLabel->
  "In[242]:=",ExpressionUUID->"778b0f2f-813d-4aae-8eaf-ea0a67942a89"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"nominal", " ", "bonds"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"ratioNomBonds", " ", "=", " ", "\"\<nombond\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"optsNomBonds", "=", "opts"}], " ", ";"}], "\[IndentingNewLine]", 
   
   RowBox[{
    RowBox[{"infoModelNomBonds", "=", "infoModel"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"maxMaturity", "=", "12"}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.894621172501425*^9, 3.894621286981442*^9}, {
   3.8946216799008703`*^9, 3.8946216804296293`*^9}, {3.894622872437722*^9, 
   3.894622916936734*^9}, {3.894624384876799*^9, 3.8946243850106487`*^9}, 
   3.894628038111232*^9, 3.894628077079179*^9, {3.894631085409711*^9, 
   3.894631118527935*^9}, {3.894631701068421*^9, 3.894631701616246*^9}, {
   3.8946336035847588`*^9, 3.894633642301043*^9}},
 CellLabel->"In[76]:=",ExpressionUUID->"bb4aea19-3b96-4697-9511-3d88aa2f4e77"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"solve", " ", "numerically"}], " ", "*)"}], "\[IndentingNewLine]", 
  
  RowBox[{
   RowBox[{
    RowBox[{"csNomBonds", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{"model", ",", " ", "ratioNomBonds", ",", " ", "optsNomBonds"}], 
      "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}], "=", 
     RowBox[{"Activate", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", "maxMaturity", "]"}], "&"}], "/@", 
          "csNomBonds"}], ")"}], "//.", "parameters"}], "/.", 
       RowBox[{"(", 
        RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"solNomBonds", "=", 
     RowBox[{"Sort", "/@", 
      RowBox[{"MapThread", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"#1", ",", 
            RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
        RowBox[{"{", 
         RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}]}], 
       "]"}]}]}], ";"}], "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Subtract", "@@@", 
           RowBox[{"(", 
            RowBox[{"First", "@", 
             RowBox[{
              RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
              "\"\<nombond\>\"", "]"}]}], ")"}]}], "/.", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<nombond\>\"", "]"}], "[", 
            RowBox[{"[", "4", "]"}], "]"}], "->", "n"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"n", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], "//.", 
       "parameters"}], "/.", 
      RowBox[{"(", 
       RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "/.", 
     RowBox[{"Flatten", "@", "solNomBonds"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894633639063631*^9, 3.8946336438873873`*^9}, 
   3.894634007271862*^9, 3.8946559375425043`*^9},
 CellLabel->"In[80]:=",ExpressionUUID->"d8411fd6-00ae-4674-ac67-e724ca796fcf"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"solve", " ", "using", " ", "closed"}], "-", 
    RowBox[{
    "form", " ", "solutions", " ", "for", " ", "some", " ", "of", " ", "the", 
     " ", "coefficients"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"csNomBonds", " ", "=", 
     RowBox[{"addCoeffsSolution", "[", 
      RowBox[{
      "model", ",", " ", "ratioNomBonds", ",", " ", "optsNomBonds", ",", " ", 
       "infoModelNomBonds"}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}], "=", 
     RowBox[{"Activate", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", "maxMaturity", "]"}], "&"}], "/@", 
          "csNomBonds"}], ")"}], "//.", "parameters"}], "/.", 
       RowBox[{"(", 
        RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"solNomBonds", "=", 
     RowBox[{"Sort", "/@", 
      RowBox[{"MapThread", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"#1", ",", 
            RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
        RowBox[{"{", 
         RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}]}], 
       "]"}]}]}], ";"}], "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Subtract", "@@@", 
           RowBox[{"(", 
            RowBox[{"First", "@", 
             RowBox[{
              RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
              "\"\<nombond\>\"", "]"}]}], ")"}]}], "/.", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<nombond\>\"", "]"}], "[", 
            RowBox[{"[", "4", "]"}], "]"}], "->", "n"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"n", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], "//.", 
       "parameters"}], "/.", 
      RowBox[{"(", 
       RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "/.", 
     RowBox[{"Flatten", "@", "solNomBonds"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894621172501425*^9, 3.894621286981442*^9}, {
   3.8946216799008703`*^9, 3.8946216804296293`*^9}, {3.894622872437722*^9, 
   3.894622916936734*^9}, {3.894624384876799*^9, 3.8946243850106487`*^9}, 
   3.894628038111232*^9, 3.894628077079179*^9, {3.894631085409711*^9, 
   3.894631118527935*^9}, {3.894631701068421*^9, 3.894631701616246*^9}, {
   3.8946336035847588`*^9, 3.8946336475655737`*^9}, 3.894633944058289*^9, 
   3.894655932193799*^9},
 CellLabel->"In[85]:=",ExpressionUUID->"dc7088f0-a5d1-46ce-91e4-0e89225def64"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.8946320428262568`*^9, 3.894632046743342*^9}, {
  3.894633626818965*^9, 3.8946336308491287`*^9}},
 CellLabel->
  "In[179]:=",ExpressionUUID->"4e4e645f-5a43-4b6f-adb9-814d318607e1"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.8946336999822683`*^9, 
  3.894633700316496*^9}},ExpressionUUID->"e547b3ec-2971-4691-9bb2-\
1718c9b10428"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.894554893735798*^9, 3.89455489396657*^9}, {
   3.894555858003376*^9, 3.894555858341325*^9}, 3.894624628089449*^9},
 CellLabel->
  "In[143]:=",ExpressionUUID->"13e7ea58-87fd-43a6-be22-d179add0d32e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"modelName", "=", "\"\<NRC\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", "=", 
   RowBox[{"modelsP", "[", "modelName", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ratio", " ", "=", " ", "\"\<wc\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<NRC\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "4.6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", "5.5", "}"}], ",", 
          RowBox[{"{", "6.3", "}"}], ",", 
          RowBox[{"{", "5.6", "}"}]}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<BY\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"{", "4.7", "}"}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<BS\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"{", "4.7", "}"}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", " ", "=", " ", 
   RowBox[{"modelOpts", "[", "modelName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"infoModel", "=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"KeyExistsQ", "[", 
      RowBox[{"modelsExtraInfo", ",", "modelName"}], "]"}], ",", 
     RowBox[{"modelsExtraInfo", "[", "modelName", "]"}], ",", 
     RowBox[{"<|", "|>"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894554893735798*^9, 3.89455489396657*^9}, {
   3.894555858003376*^9, 3.894555858341325*^9}, 3.894624628089449*^9},
 CellLabel->
  "In[146]:=",ExpressionUUID->"1ed221f9-970a-4c78-8a62-144fbf11cd04"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"ratioNomBonds", " ", "=", " ", "\"\<nombond\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"optsNomBonds", "=", "opts"}], " ", ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"infoModelNomBonds", "=", "infoModel"}], ";"}]}], "Input",
 CellChangeTimes->{{3.894524941366363*^9, 3.894524963566317*^9}},
 CellLabel->
  "In[154]:=",ExpressionUUID->"7a2c2b33-893e-4555-824d-5b59af48983c"],

Cell[BoxData["solWc"], "Input",
 CellChangeTimes->{{3.894363172132036*^9, 3.894363189860057*^9}, {
   3.894363316881506*^9, 3.8943633659243717`*^9}, 3.894363450320136*^9, 
   3.894524922107978*^9},
 CellLabel->
  "In[157]:=",ExpressionUUID->"956a2b66-9039-4458-9cad-413832765d83"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"function", " ", "eval"}], "*)"}]], "Input",
 CellChangeTimes->{{3.894525042359449*^9, 3.894525046715561*^9}},
 CellLabel->
  "In[158]:=",ExpressionUUID->"8868cb95-0408-4564-a9cb-8075d078a224"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"ratio", " ", "=", " ", "ratioNomBonds"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", "=", "optsNomBonds"}], " ", ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"infoModel", "=", "infoModelNomBonds"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"cs", " ", "=", " ", 
   RowBox[{
    RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"shortname", " ", "=", " ", 
   RowBox[{"model", "[", "\"\<shortname\>\"", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"numStocks", " ", "=", " ", 
   RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"ratioUncondE", "=", 
   RowBox[{
    RowBox[{"model", "[", "\"\<ratioUncondE\>\"", "]"}], "[", "ratio", 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"system", "=", 
   RowBox[{"cs", "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"unknowns", "=", 
   RowBox[{"cs", "[", 
    RowBox[{"[", "2", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"n", "=", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"StringMatchQ", "[", 
     RowBox[{"ratioNomBonds", ",", 
      RowBox[{"\"\<bond\>\"", "|", "\"\<nombond\>\""}]}], "]"}], ",", 
    RowBox[{"cs", "[", 
     RowBox[{"[", "4", "]"}], "]"}], ",", 
    RowBox[{"Sequence", "[", "]"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dependentParameters", "=", 
   RowBox[{"Pick", "[", 
    RowBox[{
     RowBox[{"model", "[", "\"\<parameters\>\"", "]"}], ",", 
     RowBox[{"NumericQ", "/@", 
      RowBox[{"Values", "@", 
       RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}]}], ",", "False"}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"solveNumericQ", " ", "=", " ", "False"}], ";"}]}], "Input",
 CellChangeTimes->{{3.894524991292225*^9, 3.894525074874755*^9}, {
   3.894525354134137*^9, 3.894525381904065*^9}, {3.8945285715131617`*^9, 
   3.8945285765121403`*^9}, {3.894534321221981*^9, 3.894534332535226*^9}, {
   3.894555454234582*^9, 3.894555495891251*^9}, {3.894555959026258*^9, 
   3.8945559695041943`*^9}, 3.894556146061163*^9, 3.8945568453077087`*^9, {
   3.894557684894515*^9, 3.894557686580079*^9}, 3.894557958315234*^9, {
   3.894592145508297*^9, 3.894592145749126*^9}, {3.89461259950742*^9, 
   3.894612603297203*^9}, {3.894627933786552*^9, 3.894627934159141*^9}, 
   3.894629727719285*^9, {3.89462976611544*^9, 3.89462976755984*^9}, {
   3.894629917447363*^9, 3.894629917741946*^9}, 3.894630196841455*^9, 
   3.894639714327207*^9},
 CellLabel->
  "In[175]:=",ExpressionUUID->"eba9c01f-6325-4f37-ab64-301fcd3a0727"],

Cell[BoxData[
 RowBox[{
  RowBox[{"KeyExistsQ", "[", 
   RowBox[{"infoModel", ",", "\"\<coeffs\>\""}], "]"}], "&&", 
  RowBox[{"KeyExistsQ", "[", 
   RowBox[{
    RowBox[{"infoModel", "[", "\"\<coeffs\>\"", "]"}], ",", "ratio"}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.8946206083300323`*^9, 3.894620649402857*^9}, {
   3.894622263038209*^9, 3.8946222633100853`*^9}, {3.8946272829452267`*^9, 
   3.894627301208708*^9}, {3.894628173733136*^9, 3.894628177271338*^9}, 
   3.8946296166820917`*^9, {3.894629750979641*^9, 3.894629772127022*^9}, 
   3.894629966773718*^9, {3.894630206519259*^9, 3.8946302079731913`*^9}, 
   3.894632442744543*^9, {3.894639395555727*^9, 3.8946393967072973`*^9}},
 CellLabel->
  "In[187]:=",ExpressionUUID->"bc1c4374-e362-48d5-814a-01e9f2241dc3"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"coeffInfo", "=", 
   RowBox[{
    RowBox[{"infoModel", "[", "\"\<coeffs\>\"", "]"}], "[", "ratio", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"solvedQ", "=", 
   RowBox[{"Quiet", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Simplify", "[", 
        RowBox[{"#", ",", 
         RowBox[{"Assumptions", "->", 
          RowBox[{
           RowBox[{"n", ">=", "1"}], "&&", 
           RowBox[{"Element", "[", 
            RowBox[{"n", ",", "Integers"}], "]"}]}]}], ",", 
         RowBox[{"TimeConstraint", "->", 
          RowBox[{"{", 
           RowBox[{"1", ",", "2"}], "}"}]}]}], "]"}], "&"}], "/@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"system", "[", 
          RowBox[{"[", 
           RowBox[{"2", ";;", 
            RowBox[{"-", "1"}]}], "]"}], "]"}], "//.", "coeffInfo"}], "/.", 
        "dependentParameters"}], ")"}]}], ",", 
     RowBox[{"Simplify", "::", "gtime"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894639451720492*^9, 3.894639453103307*^9}},
 CellLabel->
  "In[188]:=",ExpressionUUID->"49db00ba-58d2-42de-b7e5-1eb36e0f7134"],

Cell[BoxData[
 RowBox[{"AnyTrue", "[", 
  RowBox[{
   RowBox[{"Not", "/@", "solvedQ"}], ",", "TrueQ"}], "]"}]], "Input",
 CellLabel->
  "In[190]:=",ExpressionUUID->"0a2cd0fd-2f03-4026-ba4f-c234323d46aa"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"if", " ", "numeric"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"eqNum", "=", "system"}], ";"}], "\n", 
   RowBox[{
    RowBox[{"coefficientNamesNum", "=", "unknowns"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"coeffInfoNum", " ", "=", " ", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"xNum", "=", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"StringMatchQ", "[", 
        RowBox[{"ratio", ",", 
         RowBox[{"\"\<wc\>\"", "|", "\"\<pd\>\""}]}], "]"}], ",", 
       RowBox[{"createStartingPoint", "[", 
        RowBox[{
        "coefficientNamesNum", ",", " ", "ratioUncondE", ",", " ", 
         "numStocks", ",", " ", "opts", ",", " ", 
         RowBox[{"KeyDrop", "[", 
          RowBox[{"infoModel", ",", "\"\<coeffs\>\""}], "]"}]}], "]"}], ",", 
       RowBox[{"cs", "[", 
        RowBox[{"[", "3", "]"}], "]"}]}], "]"}]}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.894632444574223*^9, 3.894632617418829*^9}, 
   3.894632671688018*^9, {3.894632726453369*^9, 3.894632729663817*^9}, {
   3.8946330938018007`*^9, 3.894633116705922*^9}, {3.8946333448749123`*^9, 
   3.894633397766367*^9}, {3.894633464617834*^9, 3.8946334779521503`*^9}, {
   3.894639279608502*^9, 3.8946392982238903`*^9}, {3.8946398685289183`*^9, 
   3.894639891512288*^9}, {3.894640312179847*^9, 3.894640314577052*^9}, {
   3.894640415762816*^9, 3.894640427882286*^9}, {3.894647598826523*^9, 
   3.8946476006088037`*^9}, 3.8946476638125563`*^9, {3.894647759606614*^9, 
   3.894647779160223*^9}, {3.8946478154383593`*^9, 3.894647820764426*^9}, {
   3.8946479081735*^9, 3.894647913964284*^9}},
 CellLabel->
  "In[191]:=",ExpressionUUID->"da8c04d0-0076-4fac-8e21-42d88ac5dcc9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"if", " ", "not", " ", "numeric"}], "*)"}], "\[IndentingNewLine]", 
  
  RowBox[{
   RowBox[{
    RowBox[{"notSolvedQ", "=", 
     RowBox[{"Not", "/@", 
      RowBox[{"(", 
       RowBox[{"BooleanQ", "/@", "solvedQ"}], ")"}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"eq", "=", 
     RowBox[{"Flatten", "@", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"First", "@", "system"}], ")"}], "//.", "coeffInfo"}], ",", 
        
        RowBox[{"Pick", "[", 
         RowBox[{"solvedQ", ",", "notSolvedQ"}], "]"}]}], "}"}]}]}], ";"}], 
   "\n", 
   RowBox[{"(*", 
    RowBox[{
    "find", " ", "coefficients", " ", "without", " ", "a", " ", "closed", " ",
      "form", " ", "solution", " ", "that", " ", "still", " ", "need", " ", 
     "to", " ", "be", " ", "solved", " ", "for"}], "*)"}], "\n", 
   RowBox[{"coefficientNames", "=", 
    RowBox[{"DeleteDuplicates", "@", 
     RowBox[{"Cases", "[", 
      RowBox[{"eq", ",", 
       RowBox[{
        RowBox[{
         RowBox[{"unknowns", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "0", "]"}], "]"}], "[", "_Integer", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"-", "2"}], "}"}]}], "]"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"x", "=", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"StringMatchQ", "[", 
       RowBox[{"ratio", ",", 
        RowBox[{"\"\<wc\>\"", "|", "\"\<pd\>\""}]}], "]"}], ",", 
      RowBox[{"createStartingPoint", "[", 
       RowBox[{
       "coefficientNames", ",", " ", "ratioUncondE", ",", " ", "numStocks", 
        ",", " ", "opts", ",", " ", "infoModel"}], "]"}], ",", 
      RowBox[{"Flatten", "@", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"First", "@", 
            RowBox[{"(", 
             RowBox[{"cs", "[", 
              RowBox[{"[", "3", "]"}], "]"}], ")"}]}], ")"}], "//.", 
          "coeffInfo"}], ",", 
         RowBox[{"Pick", "[", 
          RowBox[{
           RowBox[{"Rest", "@", 
            RowBox[{"(", 
             RowBox[{"cs", "[", 
              RowBox[{"[", "3", "]"}], "]"}], ")"}]}], ",", "notSolvedQ"}], 
          "]"}]}], "}"}]}]}], "]"}]}]}]}]], "Input",
 CellChangeTimes->{{3.8946476680444317`*^9, 3.89464766827607*^9}, 
   3.8946479613589363`*^9, 3.89465413823454*^9},
 CellLabel->
  "In[232]:=",ExpressionUUID->"26e20992-5c13-46b2-8120-c2c3516ef517"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"coeffInfoSolNum", " ", "=", " ", 
   RowBox[{"Normal", "@", 
    RowBox[{"ReplaceRepeated", "[", 
     RowBox[{
      RowBox[{"Association", "@", "coeffInfoNum"}], ",", "coeffInfoNum"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"remainingUnknownsNum", "=", 
   RowBox[{"Complement", "[", 
    RowBox[{"unknowns", ",", "coefficientNamesNum"}], "]"}]}], ";"}], "\n", 
 RowBox[{"posConstantCoeffNum", "=", 
  RowBox[{"Position", "[", 
   RowBox[{"eqNum", ",", 
    RowBox[{"_", "?", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"FreeQ", "[", 
        RowBox[{"#", ",", 
         RowBox[{"n", "-", "1"}]}], "]"}], "&"}], ")"}]}], ",", "1", ",", 
    RowBox[{"Heads", "->", "False"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"perturbationNum", "=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"posConstantCoeffNum", "===", 
      RowBox[{"{", "}"}]}], ",", "0", ",", 
     RowBox[{
      RowBox[{"10", "^", 
       RowBox[{"(", 
        RowBox[{"-", "18"}], ")"}]}], "*", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"First", "@", 
         RowBox[{"Extract", "[", 
          RowBox[{"coefficientNamesNum", ",", "posConstantCoeffNum"}], 
          "]"}]}], "/.", 
        RowBox[{"(", 
         RowBox[{"n", "->", 
          RowBox[{"n", "-", "1"}]}], ")"}]}], ")"}]}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bondRecursionPerturbationNum", "=", 
   RowBox[{"MapAt", "[", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"#", "/.", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"Equal", "[", 
           RowBox[{"a_", ",", "b_"}], "]"}], ":>", 
          RowBox[{"Equal", "[", 
           RowBox[{"a", ",", 
            RowBox[{"b", "+", "perturbationNum"}]}], "]"}]}], ")"}]}], "&"}], 
      ")"}], ",", "eqNum", ",", "posConstantCoeffNum"}], "]"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.894647997053487*^9, 3.894648002918988*^9}, {
   3.894648048089776*^9, 3.894648132163048*^9}, 3.8946540201215343`*^9},
 CellLabel->
  "In[205]:=",ExpressionUUID->"9abe5354-c989-4cfa-bcba-d1b851636191"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"coeffInfoSol", " ", "=", " ", 
   RowBox[{"Normal", "@", 
    RowBox[{"ReplaceRepeated", "[", 
     RowBox[{
      RowBox[{"Association", "@", "coeffInfo"}], ",", "coeffInfo"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"remainingUnknowns", "=", 
   RowBox[{"Complement", "[", 
    RowBox[{"unknowns", ",", "coefficientNames"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"posConstantCoeff", "=", 
   RowBox[{"Position", "[", 
    RowBox[{"eq", ",", 
     RowBox[{"_", "?", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"FreeQ", "[", 
         RowBox[{"#", ",", 
          RowBox[{"n", "-", "1"}]}], "]"}], "&"}], ")"}]}], ",", "1", ",", 
     RowBox[{"Heads", "->", "False"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"perturbation", "=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"posConstantCoeff", "===", 
      RowBox[{"{", "}"}]}], ",", "0", ",", 
     RowBox[{
      RowBox[{"10", "^", 
       RowBox[{"(", 
        RowBox[{"-", "18"}], ")"}]}], "*", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"First", "@", 
         RowBox[{"Extract", "[", 
          RowBox[{"coefficientNames", ",", "posConstantCoeff"}], "]"}]}], "/.", 
        RowBox[{"(", 
         RowBox[{"n", "->", 
          RowBox[{"n", "-", "1"}]}], ")"}]}], ")"}]}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bondRecursionPerturbation", "=", 
   RowBox[{"MapAt", "[", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"#", "/.", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"Equal", "[", 
           RowBox[{"a_", ",", "b_"}], "]"}], ":>", 
          RowBox[{"Equal", "[", 
           RowBox[{"a", ",", 
            RowBox[{"b", "+", "perturbation"}]}], "]"}]}], ")"}]}], "&"}], 
      ")"}], ",", "eq", ",", "posConstantCoeff"}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894632444574223*^9, 3.894632617418829*^9}, 
   3.894632671688018*^9, {3.894632726453369*^9, 3.894632729663817*^9}, {
   3.8946330938018007`*^9, 3.894633116705922*^9}, {3.8946333448749123`*^9, 
   3.894633397766367*^9}, {3.894633464617834*^9, 3.8946334779521503`*^9}, {
   3.894639279608502*^9, 3.8946392982238903`*^9}, {3.8946398685289183`*^9, 
   3.894639891512288*^9}, {3.894640312179847*^9, 3.894640314577052*^9}, {
   3.894640415762816*^9, 3.894640427882286*^9}, {3.894647598826523*^9, 
   3.8946476006088037`*^9}, {3.8946476638125563`*^9, 3.894647685654324*^9}, 
   3.894647991490741*^9, {3.894648143134509*^9, 3.8946481455245247`*^9}, {
   3.894648194164015*^9, 3.8946482375070543`*^9}, {3.894654166943302*^9, 
   3.894654195569254*^9}, 
   3.894655763800027*^9},ExpressionUUID->"d092c217-6243-48dc-bf95-\
86bf1b6e1b85"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"P", " ", "=", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{"First", "@", "unknowns"}], ")"}], "[", 
    RowBox[{"[", 
     RowBox[{"0", ",", "0"}], "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bondCoefficientRules", "=", 
   RowBox[{"unknowns", " ", "/.", " ", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"x_", "[", "n", "]"}], "[", "j_Integer", "]"}], " ", ":>", " ", 
      RowBox[{"RuleDelayed", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"x", "[", "m_", "]"}], "[", "j", "]"}], ",", " ", 
        RowBox[{
         RowBox[{"Symbol", "[", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"SymbolName", "@", "x"}], ")"}], "<>", 
           RowBox[{"IntegerString", "[", "j", "]"}]}], "]"}], "[", "m", 
         "]"}]}], "]"}]}], ")"}]}]}], ";"}]}], "Input",
 CellLabel->
  "In[256]:=",ExpressionUUID->"5a4275c6-3321-45be-b0c4-62eed72b5721"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"solBondNumNum", "[", 
    RowBox[{"maxMaturity", ":", 
     RowBox[{"_Integer", "?", "Positive"}]}], "]"}], ":=", 
   RowBox[{
    RowBox[{"Inactive", "[", "RecurrenceTable", "]"}], "[", "\n", 
    "\t\t\t\t\t\t\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"Flatten", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t", 
        RowBox[{
        "bondRecursionPerturbationNum", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
         "xNum"}], "\n", "\t\t\t\t\t\t\t\t\t", "}"}], "\n", 
       "\t\t\t\t\t\t\t\t", "]"}], "/.", "bondCoefficientRules"}], ",", "\n", 
     "\t\t\t\t\t\t\t\t", 
     RowBox[{"coefficientNamesNum", "/.", "bondCoefficientRules"}], ",", "\n",
      "\t\t\t\t\t\t\t\t", 
     RowBox[{"{", 
      RowBox[{"n", ",", "0", ",", "maxMaturity"}], "}"}]}], 
    RowBox[{"(*", 
     RowBox[{",", "\n", "\t\t\t\t\t\t\t\t", 
      RowBox[{"Evaluate", "[", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "opts", "}"}], ",", " ", 
         RowBox[{"Options", "[", "RecurrenceTable", "]"}]}], "]"}], "]"}], 
      ",", "\n", "\t\t\t\t\t\t\t\t", 
      RowBox[{"Evaluate", "@", 
       RowBox[{
       "OptionValue", "[", "\"\<RecurrenceTableOptions\>\"", "]"}]}]}], 
     "*)"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"solNumNum", "[", 
    RowBox[{"maxMaturity", ":", 
     RowBox[{"_Integer", "?", "Positive"}]}], "]"}], ":=", 
   RowBox[{
    RowBox[{"Inactive", "[", "MapIndexed", "]"}], "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Inactive", "[", "Thread", "]"}], "[", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"coefficientNamesNum", "/.", 
          RowBox[{"n", "->", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"First", "@", "#2"}], "-", "1"}], ")"}]}]}], ")"}], "->",
         "#1"}], "]"}], "&"}], ",", 
     RowBox[{"solBondNumNum", "[", "maxMaturity", "]"}]}], "]"}]}], 
  ";"}], "\n", 
 RowBox[{"\t\t\t\t\t\t\t", 
  RowBox[{
   RowBox[{
    RowBox[{"solInfoNum", "[", 
     RowBox[{"maxMaturity", ":", 
      RowBox[{"_Integer", "?", "Positive"}]}], "]"}], ":=", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"remainingUnknownsNum", "===", 
       RowBox[{"{", "}"}]}], ",", 
      RowBox[{"ConstantArray", "[", 
       RowBox[{
        RowBox[{"{", "}"}], ",", 
        RowBox[{"maxMaturity", "+", "1"}]}], "]"}], ",", " ", 
      RowBox[{
       RowBox[{"Inactive", "[", "Prepend", "]"}], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Inactive", "[", "Table", "]"}], "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"Inactive", "[", "Thread", "]"}], "[", 
            RowBox[{"remainingUnknownsNum", "->", 
             RowBox[{"(", 
              RowBox[{"remainingUnknownsNum", "/.", "coeffInfoSolNum"}], 
              ")"}]}], "]"}], "/.", 
           RowBox[{"n", "->", "m"}]}], ",", 
          RowBox[{"{", 
           RowBox[{"m", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], ",", 
        RowBox[{
         RowBox[{"Complement", "[", 
          RowBox[{
           RowBox[{"cs", "[", 
            RowBox[{"[", "3", "]"}], "]"}], ",", "xNum"}], "]"}], "/.", 
         RowBox[{"Equal", "->", "Rule"}]}]}], "]"}]}], "]"}]}], ";"}]}], "\n", 
 RowBox[{"csNomBondsNum", "=", 
  RowBox[{"{", "\n", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"Inactive", "[", "Prepend", "]"}], "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Inactive", "[", "Join", "]"}], "[", 
       RowBox[{"solNum", ",", "solInfo", ",", "2"}], "]"}], ",", 
      RowBox[{"initialConditions", "/.", 
       RowBox[{"Equal", "->", "Rule"}]}]}], "]"}], "*)"}], "\n", "\t", 
   RowBox[{"solNumNum", ",", "\n", "\t", "solInfoNum"}], "\n", 
   "}"}]}]}], "Input",
 CellChangeTimes->{{3.894648173533413*^9, 3.894648186596973*^9}, {
   3.89464826022449*^9, 3.8946483274899483`*^9}, 3.894655183214212*^9, {
   3.894655419125071*^9, 3.894655419303156*^9}, 3.894655468708609*^9, {
   3.8946555394030848`*^9, 3.894655563614408*^9}, 3.894655676420281*^9},
 CellLabel->
  "In[459]:=",ExpressionUUID->"fd334b28-5188-417b-97fb-28161f024895"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", 
   RowBox[{
   "solBondNum", ",", "solNum", ",", "solInfo", ",", "csNomBonds", ",", 
    "maxMaturity"}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"solBondNum", "[", 
    RowBox[{"maxMaturity", ":", 
     RowBox[{"_Integer", "?", "Positive"}]}], "]"}], ":=", 
   RowBox[{
    RowBox[{"Inactive", "[", "RecurrenceTable", "]"}], "[", "\n", 
    "\t\t\t\t\t\t\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"Flatten", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t", 
        RowBox[{
        "bondRecursionPerturbation", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", "x"}],
         "\n", "\t\t\t\t\t\t\t\t\t", "}"}], "\n", "\t\t\t\t\t\t\t\t", "]"}], "/.",
       "bondCoefficientRules"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
     RowBox[{"coefficientNames", "/.", "bondCoefficientRules"}], ",", "\n", 
     "\t\t\t\t\t\t\t\t", 
     RowBox[{"{", 
      RowBox[{"n", ",", "0", ",", "maxMaturity"}], "}"}]}], 
    RowBox[{"(*", 
     RowBox[{",", "\n", "\t\t\t\t\t\t\t\t", 
      RowBox[{"Evaluate", "[", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"{", "opts", "}"}], ",", " ", 
         RowBox[{"Options", "[", "RecurrenceTable", "]"}]}], "]"}], "]"}], 
      ",", "\n", "\t\t\t\t\t\t\t\t", 
      RowBox[{"Evaluate", "@", 
       RowBox[{
       "OptionValue", "[", "\"\<RecurrenceTableOptions\>\"", "]"}]}]}], 
     "*)"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"solNum", "[", 
    RowBox[{"maxMaturity", ":", 
     RowBox[{"_Integer", "?", "Positive"}]}], "]"}], ":=", 
   RowBox[{
    RowBox[{"Inactive", "[", "MapIndexed", "]"}], "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Inactive", "[", "Thread", "]"}], "[", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"coefficientNames", "/.", 
          RowBox[{"n", "->", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"First", "@", "#2"}], "-", "1"}], ")"}]}]}], ")"}], "->",
         "#1"}], "]"}], "&"}], ",", 
     RowBox[{"solBondNum", "[", "maxMaturity", "]"}]}], "]"}]}], ";"}], "\n", 

 RowBox[{"\t\t\t\t\t\t\t", 
  RowBox[{
   RowBox[{
    RowBox[{"solInfo", "[", 
     RowBox[{"maxMaturity", ":", 
      RowBox[{"_Integer", "?", "Positive"}]}], "]"}], ":=", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"remainingUnknowns", "===", 
       RowBox[{"{", "}"}]}], ",", "XX", ",", " ", 
      RowBox[{
       RowBox[{"Inactive", "[", "Prepend", "]"}], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Inactive", "[", "Table", "]"}], "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"Inactive", "[", "Thread", "]"}], "[", 
            RowBox[{"remainingUnknowns", "->", 
             RowBox[{"(", 
              RowBox[{"remainingUnknowns", "/.", "coeffInfoSol"}], ")"}]}], 
            "]"}], "/.", 
           RowBox[{"n", "->", "m"}]}], ",", 
          RowBox[{"{", 
           RowBox[{"m", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], ",", 
        RowBox[{
         RowBox[{"Complement", "[", 
          RowBox[{
           RowBox[{"cs", "[", 
            RowBox[{"[", "3", "]"}], "]"}], ",", "x"}], "]"}], "/.", 
         RowBox[{"Equal", "->", "Rule"}]}]}], "]"}]}], "]"}]}], ";"}]}], "\n", 
 RowBox[{"csNomBonds", "=", 
  RowBox[{"{", "\n", "\t", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"Inactive", "[", "Prepend", "]"}], "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Inactive", "[", "Join", "]"}], "[", 
       RowBox[{"solNum", ",", "solInfo", ",", "2"}], "]"}], ",", 
      RowBox[{"initialConditions", "/.", 
       RowBox[{"Equal", "->", "Rule"}]}]}], "]"}], "*)"}], "\n", "\t", 
   RowBox[{"solNum", ",", "\n", "\t", "solInfo"}], "\n", "}"}]}]}], "Input",
 CellChangeTimes->{{3.894632444574223*^9, 3.894632617418829*^9}, 
   3.894632671688018*^9, {3.894632726453369*^9, 3.894632747583158*^9}, {
   3.894633128080374*^9, 3.894633153595978*^9}, {3.894634173555707*^9, 
   3.894634178690467*^9}, {3.894634894442627*^9, 3.894634904076024*^9}, {
   3.894638804903331*^9, 3.894638806737767*^9}, {3.8946546036710176`*^9, 
   3.89465461044519*^9}, {3.894654654982984*^9, 3.8946546681339207`*^9}, {
   3.894655406267768*^9, 3.894655458870947*^9}, {3.894655545059952*^9, 
   3.894655570783484*^9}},
 CellLabel->
  "In[463]:=",ExpressionUUID->"b1f12365-326c-48bf-a09d-58cb24407e81"],

Cell[BoxData[
 RowBox[{"ClearAll", "[", 
  RowBox[{
  "solFirstNomBondsNum", ",", "solRestNomBondsNum", ",", "solFirstNomBonds", 
   ",", "solRestNomBonds"}], "]"}]], "Input",
 CellChangeTimes->{{3.894655365489052*^9, 3.894655377404389*^9}},
 CellLabel->
  "In[468]:=",ExpressionUUID->"5bfca7e4-1b95-425e-9904-1fbd2dcc6315"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"maxMaturity", "=", "12"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"solFirstNomBondsNum", ",", "solRestNomBondsNum"}], "}"}], "=", 
   RowBox[{"Activate", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"#", "[", "maxMaturity", "]"}], "&"}], "/@", 
        "csNomBondsNum"}], ")"}], "//.", "parameters"}], "/.", 
     RowBox[{"(", 
      RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}], "=", 
   RowBox[{"Activate", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"#", "[", "maxMaturity", "]"}], "&"}], "/@", "csNomBonds"}], 
       ")"}], "//.", "parameters"}], "/.", 
     RowBox[{"(", 
      RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894654046189805*^9, 3.894654089475589*^9}, {
  3.894654242647024*^9, 3.894654294397334*^9}},
 CellLabel->
  "In[469]:=",ExpressionUUID->"393cd33a-9f3e-4e31-aee1-01433ca51735"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"solNomBondsNum", "=", 
   RowBox[{"Flatten", "@", 
    RowBox[{"(", 
     RowBox[{"Sort", "/@", 
      RowBox[{"MapThread", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"#1", ",", 
            RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
        RowBox[{"{", 
         RowBox[{"solFirstNomBondsNum", ",", "solRestNomBondsNum"}], "}"}]}], 
       "]"}]}], ")"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"solNomBonds", "=", 
   RowBox[{"Flatten", "@", 
    RowBox[{"(", 
     RowBox[{"Sort", "/@", 
      RowBox[{"MapThread", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"#1", ",", 
            RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
        RowBox[{"{", 
         RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}]}], 
       "]"}]}], ")"}]}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894654307060107*^9, 3.89465432593668*^9}, 
   3.894654399341905*^9, {3.894654704376731*^9, 3.8946547045332317`*^9}, {
   3.894654757264729*^9, 3.8946547675388403`*^9}},
 CellLabel->
  "In[476]:=",ExpressionUUID->"8c26bf13-cd03-472e-97b5-7865a8c732ca"],

Cell[BoxData[{
 RowBox[{"residualsNum", "=", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Subtract", "@@@", 
         RowBox[{"(", 
          RowBox[{"First", "@", 
           RowBox[{
            RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
            "\"\<nombond\>\"", "]"}]}], ")"}]}], "/.", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
           "\"\<nombond\>\"", "]"}], "[", 
          RowBox[{"[", "4", "]"}], "]"}], "->", "n"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"n", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], "//.", 
     "parameters"}], "/.", 
    RowBox[{"(", 
     RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "/.", 
   RowBox[{"Flatten", "@", "solNomBondsNum"}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"residuals", "=", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Subtract", "@@@", 
          RowBox[{"(", 
           RowBox[{"First", "@", 
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "\"\<nombond\>\"", "]"}]}], ")"}]}], "/.", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
            "\"\<nombond\>\"", "]"}], "[", 
           RowBox[{"[", "4", "]"}], "]"}], "->", "n"}]}], ",", 
        RowBox[{"{", 
         RowBox[{"n", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], "//.", 
      "parameters"}], "/.", 
     RowBox[{"(", 
      RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "/.", 
    RowBox[{"Flatten", "@", "solNomBonds"}]}]}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{
     "numerical", " ", "and", " ", "using", " ", "partial", " ", "closed"}], 
     "-", 
     RowBox[{"form", " ", "solution", " ", "are", " ", "the", " ", "same"}]}],
     ",", " ", 
    RowBox[{"solve", " ", "Euler", " ", 
     RowBox[{"Eq", "."}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"And", "@@", 
  RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"Norm", "[", 
        RowBox[{
         RowBox[{"Values", "@", "solNomBondsNum"}], "-", 
         RowBox[{"Values", "@", "solNomBonds"}]}], "]"}], "//", "Chop"}], 
      ")"}], "===", "0"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Chop", "@", 
      RowBox[{"Norm", "[", "residuals", "]"}]}], "===", 
     RowBox[{"Chop", "@", 
      RowBox[{"Norm", "[", "residualsNum", "]"}]}], "===", "0"}]}], 
   "\[IndentingNewLine]", "}"}]}]}], "Input",
 CellChangeTimes->{{3.894654714299465*^9, 3.894654733836512*^9}, {
  3.8946549167152977`*^9, 3.8946549881307783`*^9}, {3.89465578134538*^9, 
  3.8946557832963667`*^9}},ExpressionUUID->"db9ad039-2ef3-42e1-9dde-\
37debd1b1503"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.894629337274284*^9, 
  3.894629337647921*^9}},ExpressionUUID->"acd41f47-2062-40d4-9e2e-\
f4b5df23af15"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<PacletizedResourceFunctions`\>\"", "]"}]], "Input",\

 CellChangeTimes->{{3.894532521195146*^9, 3.8945325219126673`*^9}, {
   3.8945568406837387`*^9, 3.89455686233638*^9}, {3.894626100400138*^9, 
   3.8946261012351427`*^9}, {3.894626484633515*^9, 3.8946265033576107`*^9}, 
   3.894629031930637*^9},
 CellLabel->
  "In[105]:=",ExpressionUUID->"bf59c116-bafc-489b-8026-72a40328afe7"],

Cell[BoxData[{
 RowBox[{"Clear", "[", 
  RowBox[{"n", ",", "nn"}], "]"}], "\n", 
 RowBox[{
  RowBox[{
  "P", "=", "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`P"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ruleP", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"P", "[", "t__", "]"}], "[", "ind_Integer", "]"}], ":>", 
    RowBox[{
     RowBox[{"Symbol", "[", 
      RowBox[{"\"\<P\>\"", "<>", 
       RowBox[{"IntegerString", "@", "ind"}]}], "]"}], "[", "t", "]"}]}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
  "R", "=", "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`R"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ruleR", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"R", "[", "t__", "]"}], "[", "ind_Integer", "]"}], ":>", 
     RowBox[{
      RowBox[{"Symbol", "[", 
       RowBox[{"\"\<R\>\"", "<>", 
        RowBox[{"IntegerString", "@", "ind"}]}], "]"}], "[", "t", "]"}]}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"ratio", "=", "\"\<bond\>\""}], "\n", 
 RowBox[{
  RowBox[{"system", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", "]"}],
     "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ic", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", "]"}],
     "[", 
    RowBox[{"[", "3", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"unknowns", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", "]"}],
     "[", 
    RowBox[{"[", "2", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"nn", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", "]"}],
     "[", 
    RowBox[{"[", "4", "]"}], "]"}]}], ";"}], "\n", 
 RowBox[{"ss240", "=", 
  RowBox[{"FullSimplify", "[", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"SetSymbolsContext", "/@", 
       RowBox[{"RSolve", "[", 
        RowBox[{
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"system", "[", 
              RowBox[{"[", 
               RowBox[{"{", 
                RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", "ruleP"}],
             "/.", "ruleR"}], ",", 
           RowBox[{
            RowBox[{
             RowBox[{"ic", "[", 
              RowBox[{"[", 
               RowBox[{"{", 
                RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", "ruleP"}],
             "/.", "ruleR"}]}], "]"}], ",", 
         RowBox[{
          RowBox[{
           RowBox[{"unknowns", "[", 
            RowBox[{"[", 
             RowBox[{"{", 
              RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", "ruleP"}], "/.",
           "ruleR"}], ",", "nn"}], "]"}]}], "/.", 
      RowBox[{"nn", "->", "n"}]}], "/.", 
     RowBox[{"theta", "->", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"1", "-", "gamma"}], ")"}], "/", 
       RowBox[{"(", 
        RowBox[{"1", "-", 
         RowBox[{"1", "/", "psi"}]}], ")"}]}]}]}], ",", 
    RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"ss30", "=", 
  RowBox[{"FullSimplify", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"SetSymbolsContext", "@", 
      RowBox[{"Solve", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"system", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "/.", "ruleP"}], "/.", "ruleR"}], 
        ",", 
        RowBox[{
         RowBox[{
          RowBox[{"unknowns", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "/.", "ruleP"}], "/.", "ruleR"}]}],
        "]"}]}], "/.", 
     RowBox[{"nn", "->", "n"}]}], ",", 
    RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}]}], 
   "]"}]}], "\n", 
 RowBox[{
  RowBox[{"ss24", "=", 
   RowBox[{"FullSimplify", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"SetSymbolsContext", "/@", 
        RowBox[{"RSolve", "[", 
         RowBox[{
          RowBox[{"Join", "[", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"system", "[", 
               RowBox[{"[", 
                RowBox[{"{", 
                 RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", 
              "ruleP"}], "/.", "ruleR"}], ",", 
            RowBox[{
             RowBox[{
              RowBox[{"ic", "[", 
               RowBox[{"[", 
                RowBox[{"{", 
                 RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", 
              "ruleP"}], "/.", "ruleR"}]}], "]"}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"unknowns", "[", 
             RowBox[{"[", 
              RowBox[{"{", 
               RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", "ruleP"}], 
           "/.", "ruleR"}], ",", "nn"}], "]"}]}], "/.", 
       RowBox[{"nn", "->", "n"}]}], "/.", 
      RowBox[{"theta", "->", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "-", "gamma"}], ")"}], "/", 
        RowBox[{"(", 
         RowBox[{"1", "-", 
          RowBox[{"1", "/", "psi"}]}], ")"}]}]}]}], ",", 
     RowBox[{
      RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}], "&&", 
      RowBox[{"n", ">=", "1"}]}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.894532521195146*^9, 3.8945325219126673`*^9}, {
   3.8945568406837387`*^9, 3.89455686233638*^9}, {3.894626100400138*^9, 
   3.8946261012351427`*^9}, {3.894626484633515*^9, 3.8946265033576107`*^9}, 
   3.894629031930637*^9, {3.8946313245304527`*^9, 3.894631429432016*^9}},
 CellLabel->
  "In[119]:=",ExpressionUUID->"9ad31716-c7df-443e-978c-c55d6c939962"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"-", 
      FractionBox["1", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "+", 
          SuperscriptBox["\[ExponentialE]", 
           RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", "rhop"}]]}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        SuperscriptBox["rhop", "n"], " ", "xip", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"gamma", " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", "rhocp"}], "+", 
          RowBox[{"A", "[", "1", "]"}], "-", 
          RowBox[{"gamma", " ", "psi", " ", 
           RowBox[{"A", "[", "1", "]"}]}], "+", 
          RowBox[{
           SuperscriptBox["\[ExponentialE]", 
            RowBox[{"A", "[", "0", "]"}]], " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"gamma", " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", "rhocp"}], "+", 
             
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"-", "1"}], "+", 
                RowBox[{"gamma", " ", "psi"}]}], ")"}], " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", 
              RowBox[{"A", "[", "1", "]"}]}]}], ")"}]}]}], ")"}], " ", 
        RowBox[{"UnitStep", "[", 
         RowBox[{
          RowBox[{"-", "1"}], "+", "n"}], "]"}]}], "+", 
       RowBox[{"rhop", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"xip", " ", 
           RowBox[{"A", "[", "1", "]"}]}], "-", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"1", "+", 
             SuperscriptBox["\[ExponentialE]", 
              RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", 
           RowBox[{"A", "[", "3", "]"}]}], "+", 
          RowBox[{"gamma", " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{"1", "+", 
                SuperscriptBox["\[ExponentialE]", 
                 RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", "rhocp", " ", 
              "xip"}], "-", 
             RowBox[{"psi", " ", "xip", " ", 
              RowBox[{"A", "[", "1", "]"}]}], "+", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"1", "+", 
                SuperscriptBox["\[ExponentialE]", 
                 RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", "psi", " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", 
              RowBox[{"A", "[", "3", "]"}]}]}], ")"}]}]}], ")"}], " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "1"}], "+", 
          RowBox[{"UnitStep", "[", 
           RowBox[{"-", "n"}], "]"}]}], ")"}]}]}], ")"}]}], "-", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"-", 
       FractionBox["1", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1", "+", 
           SuperscriptBox["\[ExponentialE]", 
            RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", "rhop"}]]}], 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         SuperscriptBox["rhop", "n"], " ", "xip", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"-", "gamma"}], " ", "rhocp"}], "+", 
           RowBox[{"gamma", " ", "psi", " ", "rhocp"}], "-", "rhop", "+", 
           RowBox[{"psi", " ", "rhop"}], "+", 
           RowBox[{"A", "[", "1", "]"}], "-", 
           RowBox[{"gamma", " ", "psi", " ", 
            RowBox[{"A", "[", "1", "]"}]}], "+", 
           RowBox[{
            SuperscriptBox["\[ExponentialE]", 
             RowBox[{"A", "[", "0", "]"}]], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"gamma", " ", "rhocp"}], "+", "rhop"}], ")"}]}], "+", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "1"}], "+", 
                 RowBox[{"gamma", " ", "psi"}]}], ")"}], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", 
               RowBox[{"A", "[", "1", "]"}]}]}], ")"}]}]}], ")"}], " ", 
         RowBox[{"UnitStep", "[", 
          RowBox[{
           RowBox[{"-", "1"}], "+", "n"}], "]"}]}], "+", 
        RowBox[{"rhop", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"xip", " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "1"}], "+", "psi", "-", 
              RowBox[{"gamma", " ", "rhocp"}], "+", 
              RowBox[{
               SuperscriptBox["\[ExponentialE]", 
                RowBox[{"A", "[", "0", "]"}]], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
               RowBox[{"(", 
                RowBox[{"1", "+", 
                 RowBox[{"gamma", " ", "rhocp"}]}], ")"}]}], "+", 
              RowBox[{"gamma", " ", "psi", " ", 
               RowBox[{"(", 
                RowBox[{"rhocp", "-", 
                 RowBox[{"A", "[", "1", "]"}]}], ")"}]}], "+", 
              RowBox[{"A", "[", "1", "]"}]}], ")"}]}], "+", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"1", "+", 
              SuperscriptBox["\[ExponentialE]", 
               RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "1"}], "+", 
              RowBox[{"gamma", " ", "psi"}]}], ")"}], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", 
            RowBox[{"A", "[", "3", "]"}]}]}], ")"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", 
           RowBox[{"UnitStep", "[", 
            RowBox[{"-", "n"}], "]"}]}], ")"}]}]}], ")"}]}], ")"}]}], "/.", 
   RowBox[{"n", "->", "2"}]}], "//", "Simplify"}]], "Input",
 CellChangeTimes->{{3.89463148286207*^9, 3.8946315452409687`*^9}},
 CellLabel->
  "In[147]:=",ExpressionUUID->"e3f10d85-014c-42ba-9119-bd93968e6bce"],

Cell[BoxData[{
 RowBox[{"ratio", "=", "\"\<nombond\>\""}], "\n", 
 RowBox[{
  RowBox[{"system", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", "]"}],
     "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ic", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", "]"}],
     "[", 
    RowBox[{"[", "3", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"unknowns", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", "]"}],
     "[", 
    RowBox[{"[", "2", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"nn", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "ratio", "]"}],
     "[", 
    RowBox[{"[", "4", "]"}], "]"}]}], ";"}], "\n", 
 RowBox[{"ss240", "=", 
  RowBox[{"FullSimplify", "[", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"SetSymbolsContext", "/@", 
       RowBox[{"RSolve", "[", 
        RowBox[{
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"system", "[", 
              RowBox[{"[", 
               RowBox[{"{", 
                RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", "ruleP"}],
             "/.", "ruleR"}], ",", 
           RowBox[{
            RowBox[{
             RowBox[{"ic", "[", 
              RowBox[{"[", 
               RowBox[{"{", 
                RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", "ruleP"}],
             "/.", "ruleR"}]}], "]"}], ",", 
         RowBox[{
          RowBox[{
           RowBox[{"unknowns", "[", 
            RowBox[{"[", 
             RowBox[{"{", 
              RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", "ruleP"}], "/.",
           "ruleR"}], ",", "nn"}], "]"}]}], "/.", 
      RowBox[{"nn", "->", "n"}]}], "/.", 
     RowBox[{"theta", "->", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"1", "-", "gamma"}], ")"}], "/", 
       RowBox[{"(", 
        RowBox[{"1", "-", 
         RowBox[{"1", "/", "psi"}]}], ")"}]}]}]}], ",", 
    RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"ss30", "=", 
  RowBox[{"FullSimplify", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"SetSymbolsContext", "@", 
      RowBox[{"Solve", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"system", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "/.", "ruleP"}], "/.", "ruleR"}], 
        ",", 
        RowBox[{
         RowBox[{
          RowBox[{"unknowns", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "/.", "ruleP"}], "/.", "ruleR"}]}],
        "]"}]}], "/.", 
     RowBox[{"nn", "->", "n"}]}], ",", 
    RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}]}], 
   "]"}]}], "\n", 
 RowBox[{
  RowBox[{"ss24", "=", 
   RowBox[{"FullSimplify", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"SetSymbolsContext", "/@", 
        RowBox[{"RSolve", "[", 
         RowBox[{
          RowBox[{"Join", "[", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"system", "[", 
               RowBox[{"[", 
                RowBox[{"{", 
                 RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", 
              "ruleP"}], "/.", "ruleR"}], ",", 
            RowBox[{
             RowBox[{
              RowBox[{"ic", "[", 
               RowBox[{"[", 
                RowBox[{"{", 
                 RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", 
              "ruleP"}], "/.", "ruleR"}]}], "]"}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"unknowns", "[", 
             RowBox[{"[", 
              RowBox[{"{", 
               RowBox[{"2", ",", "4"}], "}"}], "]"}], "]"}], "/.", "ruleP"}], 
           "/.", "ruleR"}], ",", "nn"}], "]"}]}], "/.", 
       RowBox[{"nn", "->", "n"}]}], "/.", 
      RowBox[{"theta", "->", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "-", "gamma"}], ")"}], "/", 
        RowBox[{"(", 
         RowBox[{"1", "-", 
          RowBox[{"1", "/", "psi"}]}], ")"}]}]}]}], ",", 
     RowBox[{
      RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}], "&&", 
      RowBox[{"n", ">=", "1"}]}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.89463144816816*^9, 3.894631448591824*^9}},
 CellLabel->
  "In[132]:=",ExpressionUUID->"8296c7b3-bf24-4a3b-9624-dc0e31b4a32e"],

Cell[BoxData[{
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     RowBox[{"P1", "[", "n", "]"}], "\[Rule]", 
     RowBox[{"-", 
      FractionBox[
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "1"}], "+", 
          SuperscriptBox["rhop", "n"]}], ")"}], " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"-", "gamma"}], " ", "rhocp"}], "+", 
          RowBox[{"gamma", " ", "psi", " ", "rhocp"}], "-", "rhop", "+", 
          RowBox[{"psi", " ", "rhop"}], "+", 
          RowBox[{"A", "[", "1", "]"}], "-", 
          RowBox[{"gamma", " ", "psi", " ", 
           RowBox[{"A", "[", "1", "]"}]}], "+", 
          RowBox[{
           SuperscriptBox["\[ExponentialE]", 
            RowBox[{"A", "[", "0", "]"}]], " ", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"gamma", " ", "rhocp"}], "+", "rhop"}], ")"}]}], "+", 
             
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"-", "1"}], "+", 
                RowBox[{"gamma", " ", "psi"}]}], ")"}], " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", 
              RowBox[{"A", "[", "1", "]"}]}]}], ")"}]}]}], ")"}]}], 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "+", 
          SuperscriptBox["\[ExponentialE]", 
           RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "1"}], "+", "rhop"}], ")"}]}]]}]}], ",", 
    RowBox[{
     RowBox[{"P3", "[", "n", "]"}], "\[Rule]", 
     RowBox[{
      RowBox[{"-", 
       FractionBox["1", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1", "+", 
           SuperscriptBox["\[ExponentialE]", 
            RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", "rhop"}]]}], 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         SuperscriptBox["rhop", "n"], " ", "xip", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"-", "gamma"}], " ", "rhocp"}], "+", 
           RowBox[{"gamma", " ", "psi", " ", "rhocp"}], "-", "rhop", "+", 
           RowBox[{"psi", " ", "rhop"}], "+", 
           RowBox[{"A", "[", "1", "]"}], "-", 
           RowBox[{"gamma", " ", "psi", " ", 
            RowBox[{"A", "[", "1", "]"}]}], "+", 
           RowBox[{
            SuperscriptBox["\[ExponentialE]", 
             RowBox[{"A", "[", "0", "]"}]], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"gamma", " ", "rhocp"}], "+", "rhop"}], ")"}]}], "+", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "1"}], "+", 
                 RowBox[{"gamma", " ", "psi"}]}], ")"}], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", 
               RowBox[{"A", "[", "1", "]"}]}]}], ")"}]}]}], ")"}]}], "-", 
        RowBox[{"rhop", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"xip", " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "1"}], "+", "psi", "-", 
              RowBox[{"gamma", " ", "rhocp"}], "+", 
              RowBox[{
               SuperscriptBox["\[ExponentialE]", 
                RowBox[{"A", "[", "0", "]"}]], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "1"}], "+", "psi"}], ")"}], " ", 
               RowBox[{"(", 
                RowBox[{"1", "+", 
                 RowBox[{"gamma", " ", "rhocp"}]}], ")"}]}], "+", 
              RowBox[{"gamma", " ", "psi", " ", 
               RowBox[{"(", 
                RowBox[{"rhocp", "-", 
                 RowBox[{"A", "[", "1", "]"}]}], ")"}]}], "+", 
              RowBox[{"A", "[", "1", "]"}]}], ")"}]}], "+", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"1", "+", 
              SuperscriptBox["\[ExponentialE]", 
               RowBox[{"A", "[", "0", "]"}]]}], ")"}], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "1"}], "+", 
              RowBox[{"gamma", " ", "psi"}]}], ")"}], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "1"}], "+", "rhop"}], ")"}], " ", 
            RowBox[{"A", "[", "3", "]"}]}]}], ")"}]}]}], ")"}]}]}]}], "}"}], 
  "}"}], "\[IndentingNewLine]", 
 RowBox[{"ss3", "=", 
  RowBox[{"FullSimplify", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"SetSymbolsContext", "@", 
      RowBox[{"Solve", "[", 
       RowBox[{
        RowBox[{"system", "[", 
         RowBox[{"[", "3", "]"}], "]"}], ",", 
        RowBox[{"unknowns", "[", 
         RowBox[{"[", "3", "]"}], "]"}]}], "]"}]}], "/.", 
     RowBox[{"nn", "->", "n"}]}], ",", 
    RowBox[{
     RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}], "&&", 
     RowBox[{"n", ">=", "1"}]}]}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.894532521195146*^9, 3.8945325219126673`*^9}, {
   3.8945568406837387`*^9, 3.89455686233638*^9}, {3.894626100400138*^9, 
   3.8946261012351427`*^9}, {3.894626484633515*^9, 3.8946265033576107`*^9}, 
   3.894629031930637*^9, {3.8946313245304527`*^9, 
   3.8946313988196573`*^9}},ExpressionUUID->"27e8edfc-ce86-4a21-b0e4-\
c24606fba6a7"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Quit", "[", "]"}], ";"}]], "Input",
 CellLabel->"In[26]:=",ExpressionUUID->"89564c80-533c-4c62-be70-ad3c9b3c6efb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"testFileName", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"DirectoryName", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "1"}], "]"}], ",", 
      RowBox[{
       RowBox[{"FileBaseName", "[", 
        RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", 
       "\"\<.wlt\>\""}]}], "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pacletDir", "=", 
   RowBox[{"DirectoryName", "[", 
    RowBox[{"testFileName", ",", "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PacletDirectoryLoad", "[", "pacletDir", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"testContextBase", "=", 
   RowBox[{"FileBaseName", "[", "testFileName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$ContextPath", "=", 
   RowBox[{"Cases", "[", 
    RowBox[{"$ContextPath", ",", 
     RowBox[{"Except", "[", "\"\<PacletizedResourceFunctions`\>\"", "]"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"packageFileName", "=", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"DirectoryName", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
     "\"\<Kernel\>\"", ",", "\"\<Model\>\"", ",", 
     RowBox[{
      RowBox[{"FileBaseName", "[", 
       RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", "\"\<.wl\>\""}]}],
     "}"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`CreateEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`\
ComputeUnconditionalExpectations`\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsSubset", "=", 
   RowBox[{"KeySelect", "[", 
    RowBox[{"models", ",", 
     RowBox[{
      RowBox[{"MatchQ", "[", 
       RowBox[{"#", ",", 
        RowBox[{"\"\<BKY\>\"", "|", "\"\<NRC\>\"", " ", "|", "\"\<BS\>\""}]}],
        "]"}], "&"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsP", "=", 
   RowBox[{"processModels", "[", "modelsSubset", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894097297775385*^9, 3.89409729804198*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"d923c1f1-0d8a-4b8e-8662-aae4dc1e9a3b"],

Cell[BoxData[
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]], "Input",
 CellLabel->"In[14]:=",ExpressionUUID->"18a31a48-10e5-4b8b-b342-b80e86a813a3"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"solveEulerEq", "//", "Options"}], "=", 
   RowBox[{"{", "\n", "\t", 
    RowBox[{
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"{", "8", "}"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", 
         RowBox[{"{", "4", "}"}]}]}], "\[RightAssociation]"}]}], ",", "\n", 
     "\t", 
     RowBox[{"\"\<maxMaturity\>\"", "->", "6"}], ",", "\n", "\t", 
     RowBox[{"\"\<parameters\>\"", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", "\t", 
     RowBox[{"\"\<FindRootOptions\>\"", "->", 
      RowBox[{"{", 
       RowBox[{"MaxIterations", "->", "1500"}], 
       RowBox[{"(*", 
        RowBox[{",", 
         RowBox[{"\"\<FindRootOptions\>\"", "->", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"PrecisionGoal", "\[Rule]", "$MachinePrecision"}], ",", 
            RowBox[{"AccuracyGoal", "\[Rule]", "$MachinePrecision"}], ",", 
            RowBox[{"WorkingPrecision", "->", "$MachinePrecision"}]}]}]}]}], 
        "*)"}], "}"}]}], ",", "\n", "\t", 
     RowBox[{"\"\<RecurrenceTableOptions\>\"", "->", 
      RowBox[{"{", 
       RowBox[{"\"\<DependentVariables\>\"", "->", "Automatic"}], "}"}]}]}], 
    "\n", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "5", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", "6", "}"}]}]}], "\[RightAssociation]"}]}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"infoModel", "=", 
    RowBox[{"<|", " ", "\[IndentingNewLine]", 
     RowBox[{"\"\<initialGuess\>\"", "->", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"{", 
          RowBox[{"1", ",", "12"}], "}"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", 
         RowBox[{"{", 
          RowBox[{"2", ",", "11"}], "}"}]}]}], "\[RightAssociation]"}]}], 
     "\[IndentingNewLine]", "|>"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<pd\>\"", ",", "opts", ",", "infoModel"}], "]"}], "===", 
  RowBox[{"{", "6", "}"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<pd\>\"", ",", 
    RowBox[{"{", "}"}], ",", "infoModel"}], "]"}], "===", 
  RowBox[{"{", 
   RowBox[{"2", ",", "11"}], "}"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<pd\>\"", ",", 
    RowBox[{"{", "}"}], ",", 
    RowBox[{"<|", "|>"}]}], "]"}], "===", 
  RowBox[{"getStartingValues", "[", 
   RowBox[{"\"\<pd\>\"", ",", 
    RowBox[{"{", "}"}]}], "]"}], "===", 
  RowBox[{"getStartingValues", "[", "\"\<pd\>\"", "]"}]}]}], "Input",
 CellChangeTimes->{{3.894093488257992*^9, 3.89409348996638*^9}, {
  3.894093529818364*^9, 3.894093611632052*^9}, {3.89409366414122*^9, 
  3.8940936791457167`*^9}, {3.894096782374393*^9, 3.894096808378319*^9}, {
  3.894310125790271*^9, 3.8943101503927402`*^9}},
 CellLabel->"In[15]:=",ExpressionUUID->"30ddab9c-449f-4217-ae93-d1aa4e834a74"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"shortname", " ", "=", " ", "\"\<NRC\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", " ", "=", " ", 
   RowBox[{"modelsP", "[", "shortname", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.8940937173225727`*^9, 3.894093737488256*^9}},
 CellLabel->"In[21]:=",ExpressionUUID->"b92965b7-0461-4acd-b36c-33f570a42c55"],

Cell[BoxData[
 RowBox[{"coefficientNamesList", " ", "=", 
  RowBox[{"{", " ", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "\"\<pd\>\"", 
      "]"}], "[", 
     RowBox[{"[", "2", "]"}], "]"}], " ", ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "\"\<pd\>\"",
        "]"}], "[", 
      RowBox[{"[", "2", "]"}], "]"}], " ", "[", 
     RowBox[{"[", 
      RowBox[{"{", 
       RowBox[{"1", ",", "3", ",", "5"}], "}"}], "]"}], "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
        "\"\<pd\>\"", "]"}], "[", 
       RowBox[{"[", "2", "]"}], "]"}], " ", "[", 
      RowBox[{"[", "1", "]"}], "]"}], "}"}]}], "\[IndentingNewLine]", 
   "}"}]}]], "Input",
 CellChangeTimes->{{3.894093751991272*^9, 3.894093756328601*^9}},
 CellLabel->"In[23]:=",ExpressionUUID->"55110e50-adef-48e6-853c-9eb29680a2bc"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"ratioUncondE", " ", "=", " ", 
   RowBox[{"uncondE", "[", 
    RowBox[{
     RowBox[{"pd", "[", 
      RowBox[{"t", ",", "j"}], "]"}], ",", "model"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"infoModel", " ", "=", " ", 
   RowBox[{"modelsExtraInfo", "[", "shortname", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894093796950797*^9, 3.894093830936194*^9}, {
   3.894093863344054*^9, 3.8940938662413273`*^9}, 3.8940971285340233`*^9, {
   3.89409725973433*^9, 3.894097263698724*^9}, {3.8940973287775173`*^9, 
   3.894097335221685*^9}},
 CellLabel->"In[24]:=",ExpressionUUID->"eab674ae-a25c-4acb-b30f-d4863848c493"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "1", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"formatStartingValues", "[", 
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "1", "]"}], "]"}], ",", "ratioUncondE", ",", " ", "opts", 
   ",", " ", "infoModel"}], "]"}]}], "Input",
 CellChangeTimes->{{3.894093810923856*^9, 3.894093834394062*^9}},
 CellLabel->"In[27]:=",ExpressionUUID->"5a5b5e3e-5e54-4078-a370-edd42cad066b"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"formatStartingValues", "[", 
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "2", "]"}], "]"}], ",", "ratioUncondE", ",", " ", "opts", 
   ",", " ", "infoModel"}], "]"}]}], "Input",
 CellChangeTimes->{{3.894093897223187*^9, 3.8940938986171913`*^9}},
 CellLabel->"In[29]:=",ExpressionUUID->"b4985407-bacd-4941-9142-3a6b63ecadc5"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "3", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"formatStartingValues", "[", 
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "3", "]"}], "]"}], ",", "ratioUncondE", ",", " ", "opts", 
   ",", " ", "infoModel"}], "]"}]}], "Input",
 CellChangeTimes->{{3.894093908390872*^9, 3.894093909919138*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"636e0c56-ddd0-4525-9977-9a4fef8f30a2"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "initial", " ", "guesses", " ", "that", " ", "the", " ", "function", " ", 
    "accepts"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"goodInitialGuess", "=", 
     RowBox[{"{", "\[IndentingNewLine]", "\t", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "0", "]"}], ",", "4"}], "}"}], 
         ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], "}"}],
          ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "1", "]"}], ",", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "0", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33", ",", 
           "32"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "1", "]"}], ",", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "0", "]"}], ",", "4", ",", 
           "0"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], "}"}],
          ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "1", "]"}], ",", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "0", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], "}"}],
          ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "1", "]"}], ",", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", "1", ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "3", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "5", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "4", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", "1", ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "j", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{"2", ",", "1", ",", "5"}], "}"}], "}"}], ",", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2"}], "}"}], "}"}], ",", "\[IndentingNewLine]", 
       "\t", 
       RowBox[{"{", 
        RowBox[{"{", "1", "}"}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", 
        RowBox[{"2", ",", "1", ",", "3"}], "}"}], ",", "\[IndentingNewLine]", 
       "\t", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}], ",", "\[IndentingNewLine]", "\t", 
       RowBox[{"{", "1", "}"}]}], "\[IndentingNewLine]", "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"goodInitialGuess1", " ", "=", " ", 
     RowBox[{"goodInitialGuess", "/.", 
      RowBox[{"j", "->", "1"}]}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"goodInitialGuess2", " ", "=", " ", 
     RowBox[{"goodInitialGuess", "/.", 
      RowBox[{"j", "->", "2"}]}]}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.8940939940147247`*^9, 3.89409402867349*^9}, {
  3.894191381071579*^9, 3.894191385060257*^9}, {3.894310276523904*^9, 
  3.8943102775397167`*^9}},
 CellLabel->
  "In[146]:=",ExpressionUUID->"4b35fab2-bbec-43c8-ada7-e9c75ae0b52f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dimensions", "/@", "goodInitialGuess"}]], "Input",
 CellChangeTimes->{{3.895066850703783*^9, 3.895066875119972*^9}},
 CellLabel->
  "In[150]:=",ExpressionUUID->"0c888d9c-08db-46f8-866f-c874fe838440"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"3", ",", "2"}], "}"}], ",", 
   RowBox[{"{", "3", "}"}], ",", 
   RowBox[{"{", "3", "}"}], ",", 
   RowBox[{"{", "3", "}"}], ",", 
   RowBox[{"{", "3", "}"}], ",", 
   RowBox[{"{", "3", "}"}], ",", 
   RowBox[{"{", "3", "}"}], ",", 
   RowBox[{"{", "2", "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "2"}], "}"}], ",", 
   RowBox[{"{", "2", "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1"}], "}"}], ",", 
   RowBox[{"{", "3", "}"}], ",", 
   RowBox[{"{", "2", "}"}], ",", 
   RowBox[{"{", "1", "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.8950668557205753`*^9, 3.895066875694437*^9}},
 CellLabel->
  "Out[150]=",ExpressionUUID->"13c77d6a-8c4a-4aef-8edb-ae00790b1730"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"coefficientNamesList", "[", 
   RowBox[{"[", "1", "]"}], "]"}], "/.", 
  RowBox[{
  "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", 
   "1"}]}], "\[IndentingNewLine]", 
 RowBox[{"ratioUncondE", "/.", 
  RowBox[{"j", "->", "1"}]}], "\[IndentingNewLine]", 
 RowBox[{"goodInitialGuess1", "[", 
  RowBox[{"[", "1", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"formatStartingValues", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"coefficientNamesList", "[", 
     RowBox[{"[", "1", "]"}], "]"}], "/.", 
    RowBox[{
    "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", "1"}]}],
    ",", 
   RowBox[{"ratioUncondE", "/.", 
    RowBox[{"j", "->", "1"}]}], ",", " ", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "4", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"goodInitialGuess1", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}]}], "\[RightAssociation]"}]}], "}"}],
    ",", " ", "infoModel"}], "]"}]}], "Input",
 CellChangeTimes->{{3.8940940336087646`*^9, 3.894094097511989*^9}, {
   3.894097079920226*^9, 3.894097085784177*^9}, {3.894097158544169*^9, 
   3.894097162791086*^9}, {3.894097226158074*^9, 3.894097232499126*^9}, {
   3.8940973906929903`*^9, 3.894097415839095*^9}, 3.894310377594448*^9},
 CellLabel->"In[36]:=",ExpressionUUID->"f0a311ef-b6d9-4468-b1ba-f9577c3f0893"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "1", "]"}], "]"}], "/.", 
   RowBox[{
   "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", "1"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"#", ",", 
     RowBox[{"formatStartingValues", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "/.", 
        RowBox[{
        "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", 
         "1"}]}], ",", 
       RowBox[{"ratioUncondE", "/.", 
        RowBox[{"j", "->", "1"}]}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
         RowBox[{"\[LeftAssociation]", 
          RowBox[{
           RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
            RowBox[{"{", "4", "}"}]}], ",", 
           RowBox[{"\"\<Epd\>\"", "\[Rule]", "#"}]}], 
          "\[RightAssociation]"}]}], "}"}], ",", " ", "infoModel"}], "]"}]}], 
    "}"}], "&"}], "/@", "goodInitialGuess1"}]}], "Input",
 CellChangeTimes->{{3.8940974642906322`*^9, 3.8940975074219913`*^9}, 
   3.894310377595777*^9},
 CellLabel->"In[40]:=",ExpressionUUID->"02c22b5b-6be6-4944-81b9-783261541009"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "3", "]"}], "]"}], "/.", 
   RowBox[{
   "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", "1"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"#", ",", 
     RowBox[{"formatStartingValues", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "3", "]"}], "]"}], "/.", 
        RowBox[{
        "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", 
         "1"}]}], ",", 
       RowBox[{"ratioUncondE", "/.", 
        RowBox[{"j", "->", "1"}]}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
         RowBox[{"\[LeftAssociation]", 
          RowBox[{
           RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
            RowBox[{"{", "4", "}"}]}], ",", 
           RowBox[{"\"\<Epd\>\"", "\[Rule]", "#"}]}], 
          "\[RightAssociation]"}]}], "}"}], ",", " ", "infoModel"}], "]"}]}], 
    "}"}], "&"}], "/@", "goodInitialGuess1"}]}], "Input",
 CellChangeTimes->{{3.894097551356515*^9, 3.8940975535654697`*^9}, 
   3.8943103775971613`*^9},
 CellLabel->"In[42]:=",ExpressionUUID->"d6014e48-9f32-4869-9603-6a951de5ed7d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "3", "]"}], "]"}], "/.", 
   RowBox[{
   "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", "2"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"#", ",", 
     RowBox[{"formatStartingValues", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "3", "]"}], "]"}], "/.", 
        RowBox[{
        "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", 
         "2"}]}], ",", 
       RowBox[{"ratioUncondE", "/.", 
        RowBox[{"j", "->", "2"}]}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
         RowBox[{"\[LeftAssociation]", 
          RowBox[{
           RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
            RowBox[{"{", "4", "}"}]}], ",", 
           RowBox[{"\"\<Epd\>\"", "\[Rule]", "#"}]}], 
          "\[RightAssociation]"}]}], "}"}], ",", " ", "infoModel"}], "]"}]}], 
    "}"}], "&"}], "/@", "goodInitialGuess2"}]}], "Input",
 CellChangeTimes->{{3.89419134152357*^9, 3.894191346876812*^9}, 
   3.8941914022155857`*^9, 3.8943103775984173`*^9},
 CellLabel->"In[44]:=",ExpressionUUID->"71d75fd2-9085-4c5a-af91-a0b2e7587827"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.894097613084391*^9, 
  3.8940976141363907`*^9}},ExpressionUUID->"5a052180-7ff4-4c75-b5b7-\
118e575aad9c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Quit", "[", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.8941941366067944`*^9, 3.894194137753757*^9}},
 CellLabel->"In[46]:=",ExpressionUUID->"c469cb0c-ef09-401c-8ab5-623e69c45983"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"testFileName", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"DirectoryName", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "1"}], "]"}], ",", 
      RowBox[{
       RowBox[{"FileBaseName", "[", 
        RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", 
       "\"\<.wlt\>\""}]}], "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pacletDir", "=", 
   RowBox[{"DirectoryName", "[", 
    RowBox[{"testFileName", ",", "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PacletDirectoryLoad", "[", "pacletDir", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"testContextBase", "=", 
   RowBox[{"FileBaseName", "[", "testFileName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$ContextPath", "=", 
   RowBox[{"Cases", "[", 
    RowBox[{"$ContextPath", ",", 
     RowBox[{"Except", "[", "\"\<PacletizedResourceFunctions`\>\"", "]"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"packageFileName", "=", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"DirectoryName", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
     "\"\<Kernel\>\"", ",", "\"\<Model\>\"", ",", 
     RowBox[{
      RowBox[{"FileBaseName", "[", 
       RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", "\"\<.wl\>\""}]}],
     "}"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`CreateEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`\
ComputeUnconditionalExpectations`\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsSubset", "=", 
   RowBox[{"KeySelect", "[", 
    RowBox[{"models", ",", 
     RowBox[{
      RowBox[{"MatchQ", "[", 
       RowBox[{"#", ",", 
        RowBox[{"\"\<BKY\>\"", "|", "\"\<NRC\>\"", " ", "|", "\"\<BS\>\""}]}],
        "]"}], "&"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsP", "=", 
   RowBox[{"processModels", "[", "modelsSubset", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894196097849613*^9, 3.894196114269528*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"713e050b-5507-47fb-b66a-68061c504349"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.894081924857366*^9, 3.8940819458285027`*^9}, {
  3.894083030657384*^9, 3.894083048525137*^9}},
 CellLabel->"In[14]:=",ExpressionUUID->"5d06a45c-d940-4dcb-877d-6af3a4ac9b0a"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"shortname", "=", "\"\<NRC\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", "=", 
   RowBox[{"modelsP", "[", "shortname", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"parameters", "=", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelAssumptions", " ", "=", " ", 
   RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"numStocks", "=", 
   RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894097739913862*^9, 3.894097746167454*^9}, 
   3.894102413626671*^9, {3.894194195613915*^9, 3.8941941985180607`*^9}, {
   3.894194264334144*^9, 3.894194294412825*^9}, {3.8942748928356237`*^9, 
   3.894274899082559*^9}},
 CellLabel->"In[17]:=",ExpressionUUID->"b1407aba-9b58-4470-baf5-d1205e06018c"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", " ", "=", 
  RowBox[{"{", " ", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "\"\<pd\>\"", 
      "]"}], "[", 
     RowBox[{"[", "2", "]"}], "]"}], " ", ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", "\"\<pd\>\"",
        "]"}], "[", 
      RowBox[{"[", "2", "]"}], "]"}], " ", "[", 
     RowBox[{"[", 
      RowBox[{"{", 
       RowBox[{"1", ",", "3", ",", "5"}], "}"}], "]"}], "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
        "\"\<pd\>\"", "]"}], "[", 
       RowBox[{"[", "2", "]"}], "]"}], " ", "[", 
      RowBox[{"[", "1", "]"}], "]"}], "}"}]}], "\[IndentingNewLine]", 
   "}"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ratioUncondE", " ", "=", " ", 
   RowBox[{"uncondE", "[", 
    RowBox[{
     RowBox[{"pd", "[", 
      RowBox[{"t", ",", "j"}], "]"}], ",", "model"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"infoModel", " ", "=", " ", 
   RowBox[{"modelsExtraInfo", "[", "shortname", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894093796950797*^9, 3.894093830936194*^9}, {
   3.894093863344054*^9, 3.8940938662413273`*^9}, 3.8940971285340233`*^9, {
   3.89409725973433*^9, 3.894097263698724*^9}, {3.8940973287775173`*^9, 
   3.894097335221685*^9}, {3.894194337208332*^9, 3.894194341070364*^9}},
 CellLabel->"In[22]:=",ExpressionUUID->"4c0aa746-9c71-40c4-bba6-d93d6491a8d9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"goodGuessStocks", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "0", "]"}], ",", "4"}], "}"}], 
         ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", "33"}], "}"}],
          ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "1", "]"}], ",", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "0", "]"}], ",", "4"}], "}"}], 
         ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", "33"}], "}"}],
          ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "1", "]"}], ",", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "0", "]"}], ",", "4"}], "}"}], 
         ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", "33"}], "}"}],
          ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "1", "]"}], ",", "55"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", " ", "33", 
           ",", " ", "32"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", " ", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", " ", "33", 
           ",", " ", "32"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}], ",", " ", "\[IndentingNewLine]", " ", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", " ", "33", 
           ",", " ", "32"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", " ", "1", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "3", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", " ", "1", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "3", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", " ", "1", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "3", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "5", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "5", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "5", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "4", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "4", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "4", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "1", ",", "7"}], "}"}], ",", "\[IndentingNewLine]", 
       
       RowBox[{"{", 
        RowBox[{"3", ",", "1", ",", "8"}], "}"}], ",", "\[IndentingNewLine]", 
       
       RowBox[{"{", 
        RowBox[{"5", ",", "1", ",", "7"}], "}"}]}], "\[IndentingNewLine]", 
      "}"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"1", ",", "5"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"2", ",", "3"}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", "4", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", "2", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", "1", "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"2", ",", "1", ",", "5"}], "}"}], ",", "\[IndentingNewLine]", 
       
       RowBox[{"{", 
        RowBox[{"2", ",", "4", ",", "3"}], "}"}], ",", "\[IndentingNewLine]", 
       
       RowBox[{"{", 
        RowBox[{"3", ",", "1", ",", "3"}], "}"}]}], "\[IndentingNewLine]", 
      "}"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "0", "]"}], ",", "4"}], "}"}], 
         ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", "33"}], "}"}],
          ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "1", "]"}], ",", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", " ", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", " ", "33", 
           ",", " ", "32"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}], ",", " ", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", "1", ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", "2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\t", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", " ", "1", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "3", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"3", ",", "1", ",", "8"}], "}"}], ",", "\[IndentingNewLine]", 
       
       RowBox[{"{", "2", "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"2", ",", "1", ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "1", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "0", "]"}], ",", " ", "4", ",",
            " ", "0", ",", " ", "5"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "2", "]"}], ",", " ", "33"}], 
          "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "2", "]"}], "[", "1", "]"}], ",", " ", "55"}], 
          "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "1", "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "4", "]"}], ",", "4", ",", "0",
            ",", "5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"B", "[", "3", "]"}], "[", "2", "]"}], ",", "33"}], 
          "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}]}], 
    "\[IndentingNewLine]", "\[IndentingNewLine]", "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.894193560900649*^9, 3.8941935784519577`*^9}, {
   3.894193632781365*^9, 3.894193644941133*^9}, 3.8941961981800003`*^9, 
   3.894198536481298*^9, {3.894198698433498*^9, 3.894198703039784*^9}, {
   3.8942500288733807`*^9, 3.8942502168550158`*^9}, {3.8942502469391327`*^9, 
   3.894250429707608*^9}, {3.894269530110755*^9, 3.894269530735136*^9}, {
   3.8942698416312017`*^9, 3.894269852264688*^9}, {3.894272248002756*^9, 
   3.894272253851688*^9}, {3.894272320148038*^9, 3.8942723603223467`*^9}},
 CellLabel->
  "In[144]:=",ExpressionUUID->"eb4da439-774c-415e-a229-52c9296fcb02"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dimensions", "/@", "goodGuessStocks"}]], "Input",
 CellChangeTimes->{{3.8950668159778976`*^9, 3.8950668184817953`*^9}},
 CellLabel->
  "In[145]:=",ExpressionUUID->"6a3f2ce4-d3e9-445c-9a39-659c9dc73438"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"3", ",", "3", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "2"}], "}"}], ",", 
   RowBox[{"{", "3", "}"}], ",", 
   RowBox[{"{", "3", "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.895066819034008*^9},
 CellLabel->
  "Out[145]=",ExpressionUUID->"a2a8a975-c622-4ab2-a165-5b9bc362b1be"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "1", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv1", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"\"\<\\r\\n\>\"", ",", "#", ",", 
      RowBox[{"formatStartingValues", "[", 
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "1", "]"}], "]"}], ",", "ratioUncondE", ",", " ", 
        RowBox[{"{", 
         RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
          RowBox[{"\[LeftAssociation]", 
           RowBox[{
            RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
             RowBox[{"{", "4", "}"}]}], ",", 
            RowBox[{"\"\<Epd\>\"", "\[Rule]", "#"}]}], 
           "\[RightAssociation]"}]}], "}"}], ",", " ", "infoModel"}], "]"}], 
      ",", "\"\<\\r\\n\>\""}], "}"}], "&"}], "/@", 
   "goodGuessStocks"}]}], "\[IndentingNewLine]", 
 RowBox[{"AllTrue", "[", " ", 
  RowBox[{
   RowBox[{"First", "/@", 
    RowBox[{"(", 
     RowBox[{"Dimensions", "/@", 
      RowBox[{"sv1", "[", 
       RowBox[{"[", 
        RowBox[{";;", ",", "3"}], "]"}], "]"}]}], ")"}]}], ",", 
   RowBox[{
    RowBox[{"MatchQ", "[", 
     RowBox[{"3", ",", "#"}], "]"}], "&"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.8941985786810217`*^9, 3.894198580209009*^9}, {
   3.894270175840399*^9, 3.894270227642333*^9}, {3.894270270426931*^9, 
   3.894270270716877*^9}, {3.89427038513008*^9, 3.89427038856219*^9}, 
   3.894310377599968*^9},
 CellLabel->"In[27]:=",ExpressionUUID->"071b422e-aae4-404c-bfb0-2fb68dac8cf2"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv2", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"\"\<\\r\\n\>\"", ",", "#", ",", 
      RowBox[{"formatStartingValues", "[", 
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "2", "]"}], "]"}], ",", "ratioUncondE", ",", " ", 
        RowBox[{"{", 
         RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
          RowBox[{"\[LeftAssociation]", 
           RowBox[{
            RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
             RowBox[{"{", "4", "}"}]}], ",", 
            RowBox[{"\"\<Epd\>\"", "\[Rule]", "#"}]}], 
           "\[RightAssociation]"}]}], "}"}], ",", " ", "infoModel"}], "]"}], 
      ",", "\"\<\\r\\n\>\""}], "}"}], "&"}], "/@", 
   "goodGuessStocks"}]}], "\[IndentingNewLine]", 
 RowBox[{"AllTrue", "[", " ", 
  RowBox[{
   RowBox[{"First", "/@", 
    RowBox[{"(", 
     RowBox[{"Dimensions", "/@", 
      RowBox[{"sv2", "[", 
       RowBox[{"[", 
        RowBox[{";;", ",", "3"}], "]"}], "]"}]}], ")"}]}], ",", 
   RowBox[{
    RowBox[{"MatchQ", "[", 
     RowBox[{"3", ",", "#"}], "]"}], "&"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.894198582024634*^9, 3.894198584043317*^9}, {
   3.894270178592675*^9, 3.894270180281476*^9}, {3.8942702792345867`*^9, 
   3.894270281840036*^9}, {3.894270376389641*^9, 3.894270378609721*^9}, 
   3.89431037760163*^9},
 CellLabel->"In[30]:=",ExpressionUUID->"e59aacaa-3d02-45f5-abe6-54f0c9a60cf0"],

Cell[BoxData[{
 RowBox[{"coefficientNamesList", "[", 
  RowBox[{"[", "3", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"sv3", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"\"\<\\r\\n\>\"", ",", "#", ",", 
      RowBox[{"formatStartingValues", "[", 
       RowBox[{
        RowBox[{"coefficientNamesList", "[", 
         RowBox[{"[", "3", "]"}], "]"}], ",", "ratioUncondE", ",", " ", 
        RowBox[{"{", 
         RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
          RowBox[{"\[LeftAssociation]", 
           RowBox[{
            RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
             RowBox[{"{", "4", "}"}]}], ",", 
            RowBox[{"\"\<Epd\>\"", "\[Rule]", "#"}]}], 
           "\[RightAssociation]"}]}], "}"}], ",", " ", "infoModel"}], "]"}], 
      ",", "\"\<\\r\\n\>\""}], "}"}], "&"}], "/@", 
   "goodGuessStocks"}]}], "\[IndentingNewLine]", 
 RowBox[{"AllTrue", "[", " ", 
  RowBox[{
   RowBox[{"First", "/@", 
    RowBox[{"(", 
     RowBox[{"Dimensions", "/@", 
      RowBox[{"sv3", "[", 
       RowBox[{"[", 
        RowBox[{";;", ",", "3"}], "]"}], "]"}]}], ")"}]}], ",", 
   RowBox[{
    RowBox[{"MatchQ", "[", 
     RowBox[{"3", ",", "#"}], "]"}], "&"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.894191443166939*^9, 3.894191579789917*^9}, {
   3.894192165871708*^9, 3.894192169832921*^9}, 3.894192978257348*^9, {
   3.894193472141673*^9, 3.8941935106908092`*^9}, {3.894251473467716*^9, 
   3.894251481710155*^9}, {3.8942703047728148`*^9, 3.894270334930151*^9}, 
   3.894270370244828*^9, 3.8943103776031322`*^9},
 CellLabel->"In[33]:=",ExpressionUUID->"33bf0b4d-c240-4b08-aec8-228bd4bf2d68"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"d1", "=", 
   RowBox[{"Dimensions", "/@", 
    RowBox[{"sv1", "[", 
     RowBox[{"[", 
      RowBox[{";;", ",", "3"}], "]"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"d2", "=", 
   RowBox[{"Dimensions", "/@", 
    RowBox[{"sv2", "[", 
     RowBox[{"[", 
      RowBox[{";;", ",", "3"}], "]"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"d3", "=", 
    RowBox[{"Dimensions", "/@", 
     RowBox[{"sv3", "[", 
      RowBox[{"[", 
       RowBox[{";;", ",", "3"}], "]"}], "]"}]}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"And", "@@", 
  RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"And", "@@", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"Depth", "/@", 
          RowBox[{"sv1", "[", 
           RowBox[{"[", 
            RowBox[{";;", ",", "3"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"5", ",", "#"}], "]"}], "&"}]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"Depth", "/@", 
          RowBox[{"sv2", "[", 
           RowBox[{"[", 
            RowBox[{";;", ",", "3"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"5", ",", "#"}], "]"}], "&"}]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"Depth", "/@", 
          RowBox[{"sv3", "[", 
           RowBox[{"[", 
            RowBox[{";;", ",", "3"}], "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"5", ",", "#"}], "]"}], "&"}]}], "]"}]}], 
      "\[IndentingNewLine]", "}"}]}], ",", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"AllTrue", "[", 
      RowBox[{
       RowBox[{"d1", "[", 
        RowBox[{"[", 
         RowBox[{";;", ",", "1"}], "]"}], "]"}], ",", 
       RowBox[{
        RowBox[{"MatchQ", "[", 
         RowBox[{
          RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}], ",", "#"}], "]"}],
         "&"}]}], "]"}], "===", 
     RowBox[{"AllTrue", "[", 
      RowBox[{
       RowBox[{"d2", "[", 
        RowBox[{"[", 
         RowBox[{";;", ",", "1"}], "]"}], "]"}], ",", 
       RowBox[{
        RowBox[{"MatchQ", "[", 
         RowBox[{
          RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}], ",", "#"}], "]"}],
         "&"}]}], "]"}], "===", 
     RowBox[{"AllTrue", "[", 
      RowBox[{
       RowBox[{"d3", "[", 
        RowBox[{"[", 
         RowBox[{";;", ",", "1"}], "]"}], "]"}], ",", 
       RowBox[{
        RowBox[{"MatchQ", "[", 
         RowBox[{
          RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}], ",", "#"}], "]"}],
         "&"}]}], "]"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    
    RowBox[{"And", "@@", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"d1", "[", 
          RowBox[{"[", 
           RowBox[{";;", ",", "2"}], "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
            RowBox[{"Length", "@", 
             RowBox[{"coefficientNamesList", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ",", "#"}], "]"}], "&"}]}], 
        "]"}], ",", "\[IndentingNewLine]", 
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"d2", "[", 
          RowBox[{"[", 
           RowBox[{";;", ",", "2"}], "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
            RowBox[{"Length", "@", 
             RowBox[{"coefficientNamesList", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], ",", "#"}], "]"}], "&"}]}], 
        "]"}], ",", "\[IndentingNewLine]", 
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"d3", "[", 
          RowBox[{"[", 
           RowBox[{";;", ",", "2"}], "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{
            RowBox[{"Length", "@", 
             RowBox[{"coefficientNamesList", "[", 
              RowBox[{"[", "3", "]"}], "]"}]}], ",", "#"}], "]"}], "&"}]}], 
        "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "\[IndentingNewLine]", 
   "}"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"{", " ", 
    RowBox[{"{", 
     RowBox[{"numStocks", ",", 
      RowBox[{"Length", "[", "coefficientNames", "]"}]}], "}"}], " ", "}"}], 
   "*)"}]}]}], "Input",
 CellChangeTimes->{{3.894271990497781*^9, 3.8942720314207983`*^9}, {
   3.8942726097821817`*^9, 3.894272616325461*^9}, {3.894272838491988*^9, 
   3.89427289028268*^9}, 3.894274749088728*^9},
 CellLabel->"In[36]:=",ExpressionUUID->"fabc18da-098e-4489-9a0a-379770b6c86e"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"optsFun", "[", "x_", "]"}], ":=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"\"\<initialGuess\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", 
       RowBox[{
        RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
         RowBox[{"{", "4", "}"}]}], ",", 
        RowBox[{"\"\<Epd\>\"", "\[Rule]", "x"}]}], "\[RightAssociation]"}]}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"\"\<coeffsSolution\>\"", " ", "->", " ", 
      RowBox[{"\[LeftAssociation]", "\[IndentingNewLine]", 
       RowBox[{"\"\<wc\>\"", "->", 
        RowBox[{"{", "\[IndentingNewLine]", "\t", 
         RowBox[{
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "0", "]"}], "\[Rule]", 
           "4.59416508566953543553737424800214433564"}], ",", 
          "\[IndentingNewLine]", "\t", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "1", "]"}], "\[Rule]", 
           RowBox[{"-", "0.12475885956469720552987696295829896274"}]}], ",", 
          "\[IndentingNewLine]", "\t", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "2", "]"}], "\[Rule]", 
           RowBox[{"-", "0.09914349999999998164224024321904550148"}]}], ",", 
          "\[IndentingNewLine]", "\t", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "3", "]"}], "\[Rule]", 
           RowBox[{"-", "0.00009017101226447248469268285145344115"}]}], ",", 
          "\[IndentingNewLine]", "\t", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "4", "]"}], "\[Rule]", 
           "1.22397404904956020345612534833795083805"}], ",", 
          "\[IndentingNewLine]", "\t", 
          RowBox[{
           RowBox[{
           "FernandoDuarte`LongRunRisk`Model`EndogenousEq`Private`A", "[", 
            "5", "]"}], "\[Rule]", 
           RowBox[{"-", "26.07179701642808842235010480063491921156"}]}]}], 
         "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", 
       "\[RightAssociation]"}]}]}], "\[IndentingNewLine]", "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.8943109035468187`*^9, 3.8943109484821377`*^9}, {
  3.894311000030916*^9, 3.894311119613673*^9}, {3.89431164158619*^9, 
  3.8943116525397253`*^9}, {3.8943219405763083`*^9, 3.8943219445034103`*^9}, {
  3.894322182438339*^9, 3.8943221923115187`*^9}},
 CellLabel->"In[27]:=",ExpressionUUID->"5d400c9c-f7b2-4572-a607-12dcb3804bc0"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"newParameters", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"coefficientNames", " ", "=", " ", 
   RowBox[{"coefficientNamesList", "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"#", ",", 
        RowBox[{"createStartingPoint", "[", 
         RowBox[{
         "coefficientNames", ",", "ratioUncondE", ",", "numStocks", ",", 
          RowBox[{"optsFun", "[", "#", "]"}], ",", " ", "infoModel"}], 
         "]"}]}], "}"}], "&"}], "/@", "goodGuessStocks"}], ")"}], "//.", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], "  ", "//", 
  "Activate"}]}], "Input",
 CellChangeTimes->{{3.894015356580039*^9, 3.894015405116414*^9}, {
   3.894015469726812*^9, 3.894015488663093*^9}, 3.894071977722826*^9, {
   3.894096421207572*^9, 3.894096423378392*^9}, 3.8942686727398987`*^9, {
   3.894268707400631*^9, 3.8942687339112253`*^9}, {3.894268797870483*^9, 
   3.894268800469878*^9}, 3.894269931851206*^9, {3.894271106280692*^9, 
   3.89427111253679*^9}, {3.894274925480213*^9, 3.894274925737232*^9}, 
   3.8943103776043577`*^9, {3.894311108289474*^9, 3.894311115012999*^9}, 
   3.894322208008215*^9, 3.894328905289482*^9},
 CellLabel->"In[41]:=",ExpressionUUID->"6cfe9089-553b-487a-b226-bb530bbd9a2a"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"newParameters", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"coefficientNames", " ", "=", " ", 
  RowBox[{"coefficientNamesList", "[", 
   RowBox[{"[", "2", "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"#", ",", 
        RowBox[{"createStartingPoint", "[", 
         RowBox[{
         "coefficientNames", ",", "ratioUncondE", ",", "numStocks", ",", " ", 
          
          RowBox[{"optsFun", "[", "#", "]"}], ",", " ", "infoModel"}], 
         "]"}]}], "}"}], "&"}], "/@", "goodGuessStocks"}], " ", ")"}], "//.", 
   
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], "//", 
  "Activate"}]}], "Input",
 CellChangeTimes->{{3.894015708204982*^9, 3.894015719899776*^9}, 
   3.894071991057328*^9, {3.8940964422709084`*^9, 3.8940964447825813`*^9}, 
   3.894268674310975*^9, {3.8942687100815277`*^9, 3.8942687348070917`*^9}, 
   3.894268810615986*^9, 3.894269937154922*^9, {3.894271081885379*^9, 
   3.894271091838457*^9}, {3.894274923232465*^9, 3.8942749234811373`*^9}, 
   3.894310377605328*^9, {3.89431149935849*^9, 3.8943115007851143`*^9}, 
   3.894322208904532*^9, 3.894328908165851*^9},
 CellLabel->"In[44]:=",ExpressionUUID->"4724a018-03de-4bfb-ae9f-3414c0eafb5f"],

Cell[BoxData[
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]], "Input",
 CellLabel->"In[89]:=",ExpressionUUID->"e3682652-3ba1-452e-9157-d5529bca8b62"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"newParameters", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"coefficientNames", " ", "=", " ", 
  RowBox[{"coefficientNamesList", "[", 
   RowBox[{"[", "3", "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"#", ",", 
        RowBox[{"createStartingPoint", "[", 
         RowBox[{
         "coefficientNames", ",", "ratioUncondE", ",", "numStocks", ",", " ", 
          
          RowBox[{"optsFun", "[", "#", "]"}], ",", " ", "infoModel"}], 
         "]"}]}], "}"}], "&"}], "/@", "goodGuessStocks"}], ")"}], "//.", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], " ", "//", 
  "Activate"}]}], "Input",
 CellChangeTimes->{
  3.894015783620363*^9, 3.894071995906568*^9, {3.894096483230084*^9, 
   3.894096485820322*^9}, 3.894268675974959*^9, {3.894268712563448*^9, 
   3.8942687357382727`*^9}, 3.8942688097933083`*^9, 3.8942699410280647`*^9, {
   3.894271108521118*^9, 3.8942711138063993`*^9}, {3.89427492080018*^9, 
   3.894274921083701*^9}, 3.894310377606189*^9, 3.894311507432557*^9, 
   3.8943222096573477`*^9, 3.8943289106641617`*^9},
 CellLabel->"In[28]:=",ExpressionUUID->"3c263bf0-1f08-49af-ab9a-6697ee49ffd0"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.8942681500201693`*^9, 3.8942681505662127`*^9}, {
   3.894333211947339*^9, 3.89433321597633*^9}, 
   3.894365145533742*^9},ExpressionUUID->"552613d0-51d4-4aee-bafa-\
f035609e09d8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Quit", "[", "]"}], ";"}]], "Input",
 CellLabel->
  "In[192]:=",ExpressionUUID->"602aeb4a-a3cb-4785-b1a7-4e72243e0a52"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"testFileName", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"DirectoryName", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "1"}], "]"}], ",", 
      RowBox[{
       RowBox[{"FileBaseName", "[", 
        RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", 
       "\"\<.wlt\>\""}]}], "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pacletDir", "=", 
   RowBox[{"DirectoryName", "[", 
    RowBox[{"testFileName", ",", "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PacletDirectoryLoad", "[", "pacletDir", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"testContextBase", "=", 
   RowBox[{"FileBaseName", "[", "testFileName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$ContextPath", "=", 
   RowBox[{"Cases", "[", 
    RowBox[{"$ContextPath", ",", 
     RowBox[{"Except", "[", "\"\<PacletizedResourceFunctions`\>\"", "]"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"packageFileName", "=", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"DirectoryName", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
     "\"\<Kernel\>\"", ",", "\"\<Model\>\"", ",", 
     RowBox[{
      RowBox[{"FileBaseName", "[", 
       RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", "\"\<.wl\>\""}]}],
     "}"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`CreateEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`\
ComputeUnconditionalExpectations`\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsSubset", "=", 
   RowBox[{"KeySelect", "[", 
    RowBox[{"models", ",", 
     RowBox[{
      RowBox[{"MatchQ", "[", 
       RowBox[{"#", ",", 
        RowBox[{"\"\<BKY\>\"", "|", "\"\<NRC\>\"", " ", "|", "\"\<BS\>\""}]}],
        "]"}], "&"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsP", "=", 
   RowBox[{"processModels", "[", "modelsSubset", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894083032852919*^9, 3.894083041193509*^9}, {
  3.894083075923596*^9, 3.8940830920058126`*^9}, {3.894097647560842*^9, 
  3.894097647859296*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"e59a5e6f-e5c9-406e-b372-f51ad4806cdf"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.894081924857366*^9, 3.8940819458285027`*^9}, {
  3.894083030657384*^9, 3.894083048525137*^9}},
 CellLabel->
  "In[167]:=",ExpressionUUID->"6060da8b-08ff-47f2-9214-7879f51ac185"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"modelName", "=", "\"\<NRC\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"info", "=", 
   RowBox[{"modelsExtraInfo", "[", "modelName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", "=", 
   RowBox[{"modelsP", "[", "modelName", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modKey", " ", "=", " ", "modelName"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"parameters", "=", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelAssumptions", " ", "=", " ", 
   RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"newParameters", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ratio", " ", "=", " ", "\"\<wc\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"4.59", ",", "0", ",", "5"}], "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", "4"}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"cswc", "=", 
   RowBox[{"addCoeffsSolution", "[", 
    RowBox[{"model", ",", " ", "ratio", ",", " ", "opts", ",", " ", "info"}], 
    "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894097739913862*^9, 3.894097746167454*^9}, 
   3.894102413626671*^9, 
   3.894356402229114*^9},ExpressionUUID->"90e173e4-16cb-4bed-960b-\
9da685123238"],

Cell[BoxData[" "], "Input",
 CellChangeTimes->{
  3.894267456384851*^9},ExpressionUUID->"9d7563c6-d8fe-4d9d-a778-\
dfba569e4119"],

Cell[BoxData[
 RowBox[{"wcSol", "=", 
  RowBox[{
   RowBox[{"Activate", "[", 
    RowBox[{
     RowBox[{"cswc", "//.", "parameters"}], " ", ",", 
     RowBox[{
     "Simplify", "|", "Cases", "|", "Flatten", "|", "If", " ", "|", " ", 
      "SameQ"}]}], "]"}], " ", "//", "Activate"}]}]], "Input",
 CellChangeTimes->{{3.894097765267192*^9, 3.894097765465776*^9}, {
  3.8940978372749853`*^9, 3.894097845047948*^9}, {3.894098143815469*^9, 
  3.894098145130941*^9}},
 CellLabel->
  "In[137]:=",ExpressionUUID->"7ace87b6-5ee5-40a6-a7e4-0958581ac4ee"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"modelName", "=", "\"\<NRC\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"info", "=", 
   RowBox[{"modelsExtraInfo", "[", "modelName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", "=", 
   RowBox[{"modelsP", "[", "modelName", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modKey", " ", "=", " ", "modelName"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"parameters", "=", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelAssumptions", " ", "=", " ", 
   RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"newParameters", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ratio", " ", "=", " ", "\"\<pd\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"4", ",", "0", ",", "5"}], "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", "4.7", "}"}]}]}], "\[RightAssociation]"}]}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"cs", " ", "=", 
   RowBox[{"addCoeffsSolution", "[", 
    RowBox[{"model", ",", " ", "ratio", ",", " ", "opts", ",", " ", "info"}], 
    "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.894071532745822*^9, 3.89407154581429*^9}, 
   3.894081390791977*^9, {3.894081479473421*^9, 3.894081505239994*^9}, {
   3.894081608134856*^9, 3.894081609636465*^9}, {3.8940824760634203`*^9, 
   3.894082476209282*^9}, {3.8940976593735237`*^9, 3.894097659508607*^9}, 
   3.894101447927147*^9, {3.894101531686955*^9, 3.8941015325817966`*^9}, {
   3.894102118476204*^9, 3.8941021201406317`*^9}, 3.894102264477964*^9, {
   3.894102680199174*^9, 3.894102711007204*^9}, {3.894102953053362*^9, 
   3.894102966979107*^9}, {3.8941038738513737`*^9, 3.894103874440626*^9}, 
   3.8941039050872*^9, {3.8941039766673317`*^9, 3.894104023481529*^9}, 
   3.894356406664617*^9, {3.894365170353477*^9, 
   3.8943651719685*^9}},ExpressionUUID->"87943b3f-8660-4c80-9f9b-\
ffc9ea2f6d5e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Activate", "[", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"cs", "/.", 
       RowBox[{
       "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", 
        "1"}]}], "//.", "parameters"}], "//.", "wcSol"}], ",", 
    RowBox[{
    "Simplify", "|", "Cases", "|", "Flatten", "|", "If", " ", "|", " ", 
     "SameQ"}]}], "]"}], "//", "Activate"}]], "Input",
 CellChangeTimes->{{3.894098150589093*^9, 3.8940981898753023`*^9}, {
   3.894098243216845*^9, 3.894098262919673*^9}, {3.8940983220272627`*^9, 
   3.894098323616585*^9}, {3.894101496494253*^9, 3.8941014988715*^9}, {
   3.894103376559945*^9, 3.8941033789018707`*^9}, {3.894103625061804*^9, 
   3.894103628018396*^9}, 3.894103789518723*^9, 3.894103914175088*^9, {
   3.894103957347074*^9, 3.894104003787548*^9}, 3.894104126385942*^9},
 CellLabel->
  "In[148]:=",ExpressionUUID->"37e7bd74-ab0b-4937-bf5d-daf7375407cf"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"modelName", "=", "\"\<NRC\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"info", "=", 
   RowBox[{"modelsExtraInfo", "[", "modelName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", "=", 
   RowBox[{"modelsP", "[", "modelName", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modKey", " ", "=", " ", "modelName"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"parameters", "=", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelAssumptions", " ", "=", " ", 
   RowBox[{"model", "[", "\"\<modelAssumptions\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"newParameters", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ratio", " ", "=", " ", "\"\<pd\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"4", ",", "0", ",", "5"}], "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", "6"}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"cs", " ", "=", 
   RowBox[{"addCoeffsSolution", "[", 
    RowBox[{"model", ",", " ", "ratio", ",", " ", "opts", ",", " ", "info"}], 
    "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{
  3.894356408950877*^9},ExpressionUUID->"90f03c45-3f56-43cf-9e65-\
4e4dc637e653"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Activate", "[", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"cs", "/.", 
       RowBox[{
       "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", 
        "2"}]}], "//.", "parameters"}], "//.", "wcSol"}], ",", 
    RowBox[{
    "Simplify", "|", "Cases", "|", "Flatten", "|", "If", " ", "|", " ", 
     "SameQ"}]}], "]"}], "//", "Activate"}]], "Input",
 CellChangeTimes->{
  3.89410136952337*^9, {3.894101503786635*^9, 3.8941015060480013`*^9}, {
   3.894103808913631*^9, 3.894103815426818*^9}, 3.8941038854265423`*^9, 
   3.894103925945657*^9, 3.894104129600506*^9},
 CellLabel->
  "In[159]:=",ExpressionUUID->"cf1d3cc4-6bb1-40c3-8e66-3a773137f574"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Activate", "[", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"cs", "/.", 
       RowBox[{
       "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", "->", 
        "3"}]}], "//.", "wcSol"}], "//.", "parameters"}], " ", ",", 
    RowBox[{
    "Simplify", "|", "Cases", "|", "Flatten", "|", "If", " ", "|", " ", 
     "SameQ"}]}], "]"}], " ", "//", "Activate"}]], "Input",
 CellChangeTimes->{{3.8940816113703623`*^9, 3.894081620927136*^9}, {
   3.894082115673398*^9, 3.894082117881608*^9}, 3.894083487503528*^9, {
   3.8940841028071003`*^9, 3.894084104766984*^9}, {3.894084397105206*^9, 
   3.894084431315198*^9}, {3.894084694736926*^9, 3.894084699921072*^9}, {
   3.894084738732387*^9, 3.8940847418247423`*^9}, {3.8940848285141487`*^9, 
   3.894084832096921*^9}, {3.89408486415267*^9, 3.894084943227211*^9}, {
   3.894085189029193*^9, 3.894085190812723*^9}, {3.894085552290955*^9, 
   3.894085553211735*^9}, {3.894097841723971*^9, 3.894097871347006*^9}, {
   3.894097921940611*^9, 3.894097923884261*^9}, 3.894101434498221*^9, {
   3.89410227412932*^9, 3.894102283349688*^9}, {3.894103822362895*^9, 
   3.8941038380795383`*^9}, 3.894103891850379*^9, 3.894103936265594*^9, 
   3.894104132435848*^9},
 CellLabel->
  "In[160]:=",ExpressionUUID->"25ef7d3c-a585-4e4f-831b-6d81c30274a9"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.8946581460918283`*^9, 
  3.894658153057611*^9}},ExpressionUUID->"5d754f18-ac96-46ed-ba72-\
a0ddcbd9d823"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Quit", "[", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.894658154123294*^9, 3.8946581554658613`*^9}},
 CellLabel->"In[22]:=",ExpressionUUID->"03dd2ce0-73e6-4b3f-9e78-fa46109ccd9d"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"testFileName", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"DirectoryName", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "1"}], "]"}], ",", 
      RowBox[{
       RowBox[{"FileBaseName", "[", 
        RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", 
       "\"\<.wlt\>\""}]}], "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pacletDir", "=", 
   RowBox[{"DirectoryName", "[", 
    RowBox[{"testFileName", ",", "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"PacletDirectoryLoad", "[", "pacletDir", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"testContextBase", "=", 
   RowBox[{"FileBaseName", "[", "testFileName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$ContextPath", "=", 
   RowBox[{"Cases", "[", 
    RowBox[{"$ContextPath", ",", 
     RowBox[{"Except", "[", "\"\<PacletizedResourceFunctions`\>\"", "]"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"packageFileName", "=", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"DirectoryName", "[", 
      RowBox[{
       RowBox[{"NotebookDirectory", "[", "]"}], ",", "2"}], "]"}], ",", 
     "\"\<Kernel\>\"", ",", "\"\<Model\>\"", ",", 
     RowBox[{
      RowBox[{"FileBaseName", "[", 
       RowBox[{"NotebookFileName", "[", "]"}], "]"}], "<>", "\"\<.wl\>\""}]}],
     "}"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsSubset", "=", 
   RowBox[{"KeySelect", "[", 
    RowBox[{"models", ",", 
     RowBox[{
      RowBox[{"MatchQ", "[", 
       RowBox[{"#", ",", 
        RowBox[{"\"\<BY\>\"", "|", "\"\<NRC\>\"", " ", "|", "\"\<DES\>\""}]}],
        "]"}], "&"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.8946581460918283`*^9, 3.894658162604699*^9}, {
   3.8946591760003*^9, 3.894659189088613*^9}, {3.894659282005488*^9, 
   3.8946593016333513`*^9}, {3.89470045632733*^9, 3.8947004585172863`*^9}, 
   3.8947019379296303`*^9, {3.894702768769576*^9, 3.894702791803917*^9}, {
   3.894702871023864*^9, 3.894702871234603*^9}, 3.8947038904446793`*^9, 
   3.89470959079554*^9, {3.894713165602701*^9, 3.894713183840783*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"a2f6be13-36ab-4a25-be12-10e70febf4b0"],

Cell[BoxData["\<\"/Users/fernandoduarte/Dropbox \
(Personal)/MyPackages/LongRunRisk/Kernel/Model/ProcessModels.wl\"\>"], \
"Output",
 CellChangeTimes->{3.8948806724491043`*^9},
 CellLabel->"Out[6]=",ExpressionUUID->"ec58d54f-216b-45fc-8dbe-042fa29d7fba"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"infoSubset", "=", 
   RowBox[{"KeySelect", "[", 
    RowBox[{"modelsExtraInfo", ",", 
     RowBox[{
      RowBox[{"MatchQ", "[", 
       RowBox[{"#", ",", 
        RowBox[{"\"\<BY\>\"", "|", "\"\<NRC\>\"", " ", "|", "\"\<DES\>\""}]}],
        "]"}], "&"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"modelsP", "=", 
   RowBox[{"processModels", "[", 
    RowBox[{"modelsSubset", ",", "infoSubset"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`ProcessModels`\>\"", 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", "\"\<FernandoDuarte`LongRunRisk`Model`Catalog`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`SolveEulerEq`\>\"", 
   "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.8946581460918283`*^9, 3.894658162604699*^9}, {
   3.8946591760003*^9, 3.894659189088613*^9}, {3.894659282005488*^9, 
   3.8946593016333513`*^9}, {3.89470045632733*^9, 3.8947004585172863`*^9}, 
   3.8947019379296303`*^9, {3.894702768769576*^9, 3.894702791803917*^9}, {
   3.894702871023864*^9, 3.894702871234603*^9}, 3.8947038904446793`*^9, 
   3.894709584009365*^9, {3.8947131730877647`*^9, 3.894713180159429*^9}},
 CellLabel->"In[11]:=",ExpressionUUID->"321c93ed-8964-4f5a-97fa-f9e1efbb09c9"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"modelName", "=", "\"\<DES\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"model", "=", 
   RowBox[{"modelsP", "[", "modelName", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ratio", " ", "=", " ", "\"\<wc\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<NRC\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "4.6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", "5.5", "}"}], ",", 
          RowBox[{"{", "6.3", "}"}], ",", 
          RowBox[{"{", "5.6", "}"}]}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<BY\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"{", "4.7", "}"}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"modelOpts", "[", "\"\<BS\>\"", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<initialGuess\>\"", "\[Rule]", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<Ewc\>\"", "\[Rule]", 
        RowBox[{"{", "6", "}"}]}], ",", 
       RowBox[{"\"\<Epd\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"{", "4.7", "}"}], "}"}]}]}], "\[RightAssociation]"}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts", " ", "=", " ", 
   RowBox[{"modelOpts", "[", "modelName", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"parameters", " ", "=", " ", 
   RowBox[{"model", "[", "\"\<parameters\>\"", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.8946581460918283`*^9, 3.894658162604699*^9}, 
   3.8946582026057158`*^9, {3.894658244668841*^9, 3.8946582565172873`*^9}, {
   3.894658849533533*^9, 3.894658873245639*^9}, {3.8946592038292923`*^9, 
   3.894659217348526*^9}, 3.894659247957254*^9, 3.894659324990808*^9, {
   3.894659790918779*^9, 3.89465983680857*^9}, 3.89470046987648*^9, 
   3.894700950822713*^9, 3.8947095963141623`*^9, 3.8947131870981503`*^9},
 CellLabel->"In[16]:=",ExpressionUUID->"96cbc19e-b72c-4c6d-bc7b-66f2320ed1b3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", "wc", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"variable", " ", "=", " ", "\"\<wc\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"coeffSol", " ", "=", 
     RowBox[{
      RowBox[{"model", "[", "\"\<coeffsSolution\>\"", "]"}], "[", "variable", 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirst", ",", "solRest"}], "}"}], "=", 
     RowBox[{
      RowBox[{
       RowBox[{"Activate", "[", 
        RowBox[{
         RowBox[{"coeffSol", "//.", "parameters"}], " ", ",", 
         RowBox[{
         "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
          "|", "TrueQ", "|", "SameQ", " ", "|", "Map"}]}], "]"}], " ", "//.", 
       "parameters"}], "//", "Activate"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"solWc", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"Join", "[", 
      RowBox[{"solFirst", ",", 
       RowBox[{"solRest", "/.", "solFirst"}], ",", "2"}], "]"}]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"Subtract", "@@@", 
       RowBox[{"(", 
        RowBox[{"First", "@", 
         RowBox[{
          RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
          "variable", "]"}]}], ")"}]}], "//.", "parameters"}], "//.", 
     "solWc"}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894658206968316*^9, 3.894658379966874*^9}, {
   3.894658461678125*^9, 3.894658497322329*^9}, {3.8946585568152637`*^9, 
   3.894658558383206*^9}, 3.894658838865458*^9, {3.894659215557377*^9, 
   3.894659218987893*^9}},
 CellLabel->"In[25]:=",ExpressionUUID->"38ad49ee-908f-4806-991c-c9f4eed6520b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", "pd", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"variable", " ", "=", " ", "\"\<pd\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"coeffSolStocks", " ", "=", 
     RowBox[{
      RowBox[{"model", "[", "\"\<coeffsSolution\>\"", "]"}], "[", "variable", 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}], "=", 
     RowBox[{
      RowBox[{"Activate", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"coeffSolStocks", "//.", "parameters"}], "/.", 
         RowBox[{"(", 
          RowBox[{"Flatten", "@", "solWc"}], ")"}]}], " ", ",", 
        RowBox[{
        "Reduce", "|", "Simplify", "|", "Cases", "|", "Flatten", "|", "If", 
         "|", "TrueQ", "|", "SameQ", " ", "|", "Map", " ", "|", " ", 
         "MapThread"}]}], "]"}], "//", "Activate"}]}], ";"}], "\n", 
   RowBox[{"solStocks", "=", 
    RowBox[{"Sort", "/@", 
     RowBox[{"MapThread", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"#1", ",", 
           RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
       RowBox[{"{", 
        RowBox[{"solFirstStocks", ",", "solRestStocks"}], "}"}]}], "]"}]}]}], 
   "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"Subtract", "@@@", 
          RowBox[{"(", 
           RowBox[{"First", "@", 
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "variable", "]"}]}], ")"}]}], ",", 
         RowBox[{"{", 
          RowBox[{
          "FernandoDuarte`LongRunRisk`Model`ProcessModels`Private`j", ",", 
           "1", ",", 
           RowBox[{"model", "[", "\"\<numStocks\>\"", "]"}]}], "}"}]}], "]"}],
        "//.", "parameters"}], "//.", 
      RowBox[{"Flatten", "@", "solStocks"}]}], "/.", 
     RowBox[{"(", 
      RowBox[{"Flatten", "@", "solWc"}], ")"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.89465839037298*^9, 3.894658390449774*^9}, 
   3.8946584459578447`*^9, {3.894658484264146*^9, 3.894658547928117*^9}, 
   3.8946588282494173`*^9},
 CellLabel->"In[31]:=",ExpressionUUID->"1506090f-0d47-45d3-95d7-82d3a06100f8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"real", " ", "bonds"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"variable", " ", "=", " ", "\"\<bond\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"maxMaturity", "=", "12"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"coeffSolNomBonds", " ", "=", 
     RowBox[{
      RowBox[{"model", "[", "\"\<coeffsSolution\>\"", "]"}], "[", "variable", 
      "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}], "=", 
     RowBox[{"Activate", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", "maxMaturity", "]"}], "&"}], "/@", 
          "coeffSolNomBonds"}], ")"}], "//.", "parameters"}], "/.", 
       RowBox[{"(", 
        RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"solNomBonds", "=", 
     RowBox[{"Sort", "/@", 
      RowBox[{"MapThread", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"#1", ",", 
            RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
        RowBox[{"{", 
         RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}]}], 
       "]"}]}]}], ";"}], "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Subtract", "@@@", 
           RowBox[{"(", 
            RowBox[{"First", "@", 
             RowBox[{
              RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
              "variable", "]"}]}], ")"}]}], "/.", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "variable", "]"}], "[", 
            RowBox[{"[", "4", "]"}], "]"}], "->", "n"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"n", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], "//.", 
       "parameters"}], "/.", 
      RowBox[{"(", 
       RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "/.", 
     RowBox[{"Flatten", "@", "solNomBonds"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}], "\[IndentingNewLine]", 
   RowBox[{"Short", "[", 
    RowBox[{"solNomBonds", ",", "10"}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894658778116146*^9, 3.894658796712688*^9}},
 CellLabel->"In[37]:=",ExpressionUUID->"d85563da-5f4b-4255-b074-6c6832eb71ce"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"nominal", " ", "bonds"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"variable", " ", "=", " ", "\"\<nombond\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"maxMaturity", "=", "12"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"coeffSolNomBonds", " ", "=", 
     RowBox[{
      RowBox[{"model", "[", "\"\<coeffsSolution\>\"", "]"}], "[", "variable", 
      "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}], "=", 
     RowBox[{"Activate", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", "maxMaturity", "]"}], "&"}], "/@", 
          "coeffSolNomBonds"}], ")"}], "//.", "parameters"}], "/.", 
       RowBox[{"(", 
        RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "]"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{"solNomBonds", "=", 
     RowBox[{"Sort", "/@", 
      RowBox[{"MapThread", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"#1", ",", 
            RowBox[{"#2", "/.", "#1"}]}], "}"}]}], "&"}], ",", 
        RowBox[{"{", 
         RowBox[{"solFirstNomBonds", ",", "solRestNomBonds"}], "}"}]}], 
       "]"}]}]}], ";"}], "\n", 
   RowBox[{"residuals", "=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Subtract", "@@@", 
           RowBox[{"(", 
            RowBox[{"First", "@", 
             RowBox[{
              RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
              "variable", "]"}]}], ")"}]}], "/.", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"model", "[", "\"\<coeffsSystem\>\"", "]"}], "[", 
             "variable", "]"}], "[", 
            RowBox[{"[", "4", "]"}], "]"}], "->", "n"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"n", ",", "1", ",", "maxMaturity"}], "}"}]}], "]"}], "//.", 
       "parameters"}], "/.", 
      RowBox[{"(", 
       RowBox[{"Flatten", "@", "solWc"}], ")"}]}], "/.", 
     RowBox[{"Flatten", "@", "solNomBonds"}]}]}], "\[IndentingNewLine]", 
   RowBox[{"Norm", "[", "residuals", "]"}], "\[IndentingNewLine]", 
   RowBox[{"Short", "[", 
    RowBox[{"solNomBonds", ",", "10"}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.894633639063631*^9, 3.8946336438873873`*^9}, 
   3.894634007271862*^9, 3.8946559375425043`*^9, {3.8946586678451138`*^9, 
   3.894658694706664*^9}, {3.894658742448454*^9, 3.894658768398307*^9}, {
   3.8946588094708977`*^9, 3.894658813810192*^9}},
 CellLabel->"In[45]:=",ExpressionUUID->"e92630db-259f-452c-9db3-ae92a1d254b7"],

Cell[BoxData["solNomBonds"], "Input",
 CellLabel->"In[52]:=",ExpressionUUID->"6118c153-8d38-43a9-ab4d-36a99936f61f"],

Cell["\<\
\[LineSeparator]




\
\>", "Text",
 CellChangeTimes->{{3.8935109132575693`*^9, 3.893511123333776*^9}, {
  3.894039143329335*^9, 3.894039144113727*^9}, {3.894090632296957*^9, 
  3.8940906439740877`*^9}, {3.894333190177209*^9, 3.8943332058005466`*^9}, {
  3.894658858541191*^9, 
  3.894658862876964*^9}},ExpressionUUID->"b61a4fb6-cda7-491f-a0bf-\
1892feba7e36"],

Cell["\<\
next steps :
1) complete numerical solution DONE
2) put last few lines into a function in a package file DONE
3) repeat for pd, bonds DONE
4) allow for new parameters in all of them DONE
5) test that they work 
6) test yield curve Manipulate is faster for NRC DONE
7) consider case of not all equations solved by provided guess in \
modelsExtraInfo (use BKY example there) DONE
8) create convenience function for Manipulate yield curve
9) process models transparently to user DONE
10) split creation of Equler Eq in one file, solution in another, processing \
in processModels DONE
11) unit tests with numbers from papers
12) addCoeffsSolution into processed models for wc DONE
13) create convenience function for Activate[cs//.parameters \
,Simplify|Cases|Flatten|If | SameQ] //Activate DONE
14) pass options along to FindRoot, SolveRecursion, etc. Use startingValues \
in updateCoeffSol as a starting value.
15) go numerical as quickly as possible
 (*TO DO: issue error when solving for wc coefficients if state variables are \
wrong ones*)\
\>", "Text",
 CellChangeTimes->{{3.8935109132575693`*^9, 3.893511123333776*^9}, {
   3.894039143329335*^9, 3.894039144113727*^9}, {3.894090632296957*^9, 
   3.8940906439740877`*^9}, {3.894333190177209*^9, 3.8943332058005466`*^9}, {
   3.894658858541191*^9, 3.8946588603881083`*^9}, {3.894659019948493*^9, 
   3.894659081432766*^9}, {3.894904346546067*^9, 3.894904367046939*^9}, {
   3.89510880890757*^9, 3.8951088458639812`*^9}, 3.895364682647498*^9, {
   3.8954387058069344`*^9, 
   3.895438713865161*^9}},ExpressionUUID->"f25af14f-3538-4d25-8b50-\
7f3af623ec2b"],

Cell["\<\
done : add endogenousVarNames without eq at the end just for user
\tdone : add  exogenousVarNames without eq at the end just for user\
\>", "Text",
 CellChangeTimes->{{3.895438683296866*^9, 
  3.8954386958187017`*^9}},ExpressionUUID->"9477bfbd-b32b-4508-be9f-\
f9bb280b5687"],

Cell[BoxData[
 RowBox[{"(*", "\n", 
  RowBox[{
   RowBox[{
   "to", " ", "not", " ", "pollute", " ", "workspace", " ", "idea", "\n", 
    RowBox[{"something", "[", "]"}]}], " ", ":=", " ", "\n", "  ", 
   RowBox[{"(", "\n", "  ", 
    RowBox[{
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", "$ContextPath", "}"}], ",", " ", 
       RowBox[{
        RowBox[{
        "Needs", "[", 
         "\"\<FernandoDuarte`LongRunRisk`Model`EndogenousEq`\>\"", "]"}], 
        ";"}]}], "]"}], ";", "\n", "   ", 
     RowBox[{
     "FernandoDuarte`LongRunRisk`Model`EndogenousEq`fun", "[", "]"}]}], " ", 
    "\n", "   ", ")"}]}], "\n", "*)"}]], "Code",
 InitializationCell->
  False,ExpressionUUID->"aa7d5f7b-43e1-4f4b-afe8-e20097713b18"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Names", "[", "\"\<Global`*\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.8954389209255047`*^9, 3.89543892540318*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"769b2e35-8a22-4c19-abdd-b4aaa7d7e225"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellChangeTimes->{3.895438929042262*^9},
 CellLabel->"Out[1]=",ExpressionUUID->"f45f57cc-f7a5-4d9e-aa16-a4b5077a7873"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"unknowns", " ", "=", " ", 
  RowBox[{"Symbol", " ", "/@", " ", 
   RowBox[{"{", 
    RowBox[{"\"\<new1\>\"", ",", "\"\<new2\>\""}], "}"}]}]}]], "Input",
 CellChangeTimes->{{3.895438899020178*^9, 3.895438907507152*^9}},
 CellLabel->"In[2]:=",ExpressionUUID->"7f82ad5d-6237-433a-b8aa-d8a547b5f089"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"new1", ",", "new2"}], "}"}]], "Output",
 CellChangeTimes->{3.895438940075499*^9},
 CellLabel->"Out[2]=",ExpressionUUID->"cca4bb1d-c150-41c6-a0fe-cb676abb3832"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Names", "[", "\"\<Global`*\>\"", "]"}]], "Input",
 CellLabel->"In[3]:=",ExpressionUUID->"b144f3dd-dadd-4980-ab73-f19bbae1e29b"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"new1\"\>", ",", "\<\"new2\"\>", ",", "\<\"unknowns\"\>"}], 
  "}"}]], "Output",
 CellChangeTimes->{3.895438941642667*^9},
 CellLabel->"Out[3]=",ExpressionUUID->"fbc515d3-45c7-44b7-8ae3-3659766fe113"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Attributes", "[", "ContextModule", "]"}], " ", "=", " ", 
   RowBox[{"{", "HoldFirst", "}"}]}], "\n", " "}], "\n", 
 RowBox[{
  RowBox[{"ContextModule", "[", 
   RowBox[{"expr_", ",", "context_"}], "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "newContext", ",", " ", "oldContext", ",", " ", "oldContextPath"}], 
     "}"}], ",", " ", 
    RowBox[{"Internal`WithLocalSettings", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"oldContext", " ", "=", " ", "$Context"}], ";", " ", 
       RowBox[{"oldContextPath", " ", "=", " ", "$ContextPath"}], ";", " ", 
       RowBox[{"newContext", " ", "=", " ", "context"}], ";"}], " ", ",", " ", 
      RowBox[{
       RowBox[{"$Context", " ", "=", " ", "newContext"}], ";", " ", 
       RowBox[{"$ContextPath", " ", "=", " ", 
        RowBox[{"{", "newContext", "}"}]}], ";", " ", "expr"}], ",", " ", 
      RowBox[{
       RowBox[{"Scan", "[", 
        RowBox[{"Remove", ",", " ", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"StringJoin", "[", 
             RowBox[{"#1", ",", " ", "\"\<*\>\""}], "]"}], " ", "&"}], " ", 
           ")"}], " ", "/@", " ", 
          RowBox[{"Contexts", "[", 
           RowBox[{"StringJoin", "[", 
            RowBox[{"newContext", ",", " ", "\"\<*\>\""}], "]"}], "]"}]}]}], 
        "]"}], ";", " ", 
       RowBox[{"$Context", " ", "=", " ", "oldContext"}], ";", " ", 
       RowBox[{"$ContextPath", " ", "=", " ", "oldContextPath"}], ";"}]}], 
     " ", "]"}]}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.895438959754212*^9, 3.8954390354254017`*^9}, {
   3.895439095490727*^9, 3.895439111993675*^9}, {3.895439153179007*^9, 
   3.895439153767932*^9}, 3.8954392951171637`*^9, {3.895439335630348*^9, 
   3.89543934569263*^9}},ExpressionUUID->"f7f743e0-bc85-40c5-a72f-\
edced58c246a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{" ", 
  RowBox[{"StringJoin", "[", 
   RowBox[{"\"\<$\>\"", ",", " ", 
    RowBox[{"StringDelete", "[", 
     RowBox[{
      RowBox[{"CreateUUID", "[", "]"}], ",", " ", "\"\<-\>\""}], "]"}], ",", 
    " ", "\"\<`\>\""}], "]"}]}]], "Input",
 CellLabel->"In[9]:=",ExpressionUUID->"e483c0f3-ce1f-43ad-9d7a-a1eafa42373f"],

Cell[BoxData["\<\"$0fb4f46522a94860bef1cd444c63036e`\"\>"], "Output",
 CellChangeTimes->{3.895439318511776*^9},
 CellLabel->"Out[9]=",ExpressionUUID->"95c1e7c9-3964-45a1-a4b3-5639069260e2"]
}, Open  ]],

Cell[BoxData["Internal`WithLocalSettings"], "Input",ExpressionUUID->"e28c5cf1-6ab5-4913-be93-834c1d8d9e8f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"createInContext", "[", "\"\<Fer`\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.895439114940243*^9, 3.8954391192162943`*^9}},
 CellLabel->"In[6]:=",ExpressionUUID->"6d35e2f8-92b1-44a6-ac51-024eb4e37824"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"new1", ",", "new2"}], "}"}]], "Output",
 CellChangeTimes->{{3.895439123110955*^9, 3.895439156579822*^9}},
 CellLabel->"Out[6]=",ExpressionUUID->"0827ed25-2254-47e7-820d-47ec1ab26ed8"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Names", "[", "\"\<Fer`*\>\"", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Names", "[", "\"\<Global`*\>\"", "]"}]}], "Input",
 CellChangeTimes->{{3.895439050129937*^9, 3.895439077421887*^9}, {
  3.8954391262683983`*^9, 3.8954391322530622`*^9}},
 CellLabel->"In[7]:=",ExpressionUUID->"2d3c1848-cf4b-4179-a2e4-c9d16a8016ab"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellChangeTimes->{{3.895439052896957*^9, 3.8954390780669518`*^9}, {
  3.895439126927034*^9, 3.895439157558836*^9}},
 CellLabel->"Out[7]=",ExpressionUUID->"9025cf85-af2b-41a1-95a5-78b96616e3c2"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"context\"\>", ",", "\<\"context$\"\>", 
   ",", "\<\"createInContext\"\>", ",", "\<\"new1\"\>", ",", "\<\"new2\"\>", 
   ",", "\<\"un\"\>"}], "}"}]], "Output",
 CellChangeTimes->{{3.895439052896957*^9, 3.8954390780669518`*^9}, {
  3.895439126927034*^9, 3.895439157585417*^9}},
 CellLabel->"Out[8]=",ExpressionUUID->"8c072288-0730-446e-859c-a7feb3cc3239"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData["$ContextPath"], "Input",
 CellLabel->"In[9]:=",ExpressionUUID->"50b18d2d-d810-42a5-b75a-ab0d5daf8473"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"HighlightingCompatibility`\"\>", 
   ",", "\<\"PacletizedResourceFunctions`\"\>", ",", "\<\"System`\"\>", 
   ",", "\<\"Global`\"\>"}], "}"}]], "Output",
 CellChangeTimes->{3.895439089152931*^9},
 CellLabel->"Out[9]=",ExpressionUUID->"28245ec2-2854-4a9e-a081-5d368f9edfec"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.895439061560671*^9, 3.895439067360312*^9}, 
   3.895439130940568*^9},ExpressionUUID->"a8e14c75-110b-44b6-a6a8-\
5213fd40bd13"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"context\"\>", ",", "\<\"context$\"\>", 
   ",", "\<\"createInContext\"\>", ",", "\<\"new1\"\>", ",", "\<\"new2\"\>", 
   ",", "\<\"unknowns\"\>"}], "}"}]], "Output",
 CellChangeTimes->{{3.89543906225858*^9, 3.895439067732235*^9}},
 CellLabel->"Out[7]=",ExpressionUUID->"e3425544-ce65-465b-95f5-5666d39a5e95"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
  "Get", "[", 
   "\"\<FernandoDuarte`LongRunRisk`ComputationalEngine`\
ComputeUnconditionalExpectations`\>\"", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.895439589493425*^9, 3.895439589740786*^9}},
 CellLabel->"In[15]:=",ExpressionUUID->"2e994122-3e68-4847-ada6-0839faa036d0"],

Cell[BoxData[
 RowBox[{"FernandoDuarte`LongRunRisk`ComputationalEngine`\
ComputeUnconditionalExpectations`Private`createSystem", "[", 
  RowBox[{"1", ","}], "]"}]], "Input",
 CellChangeTimes->{{3.89543960333672*^9, 
  3.89543960917309*^9}},ExpressionUUID->"3cf1ef8d-6e4e-4dd3-ac3f-\
0a574c26fc9a"]
}, Open  ]]
},
WindowSize->{1408, 932},
WindowMargins->{{-1716, Automatic}, {-103, Automatic}},
WindowStatusArea->"",
DockedCells->{
  Cell[
   BoxData[
    DynamicModuleBox[{LinterUIDockedCell`Private`notebook$$}, 
     GraphicsBox[{
       InsetBox[
        TemplateBox[{
          PaneBox[
           StyleBox[
           "\"Code Analysis\"", FontColor -> GrayLevel[0.4], FontFamily -> 
            "Source Sans Pro", FontWeight -> Plain, FontSize -> 13, 
            StripOnInput -> False], 
           BaselinePosition -> (Baseline -> Scaled[0.65])], 
          TemplateBox[{8}, "Spacer1"], 
          PaneBox[
           
           PaneSelectorBox[{{False, False} -> 
             TemplateBox[{0}, "Spacer1"], {True, False} -> 
             TemplateBox[{0}, "Spacer1"], {True, True} -> PaneBox[
               InterpretationBox[
                DynamicBox[
                 FEPrivate`FrontEndResource[
                 "FEExpressions", "PercolateAnimator"][Medium]], 
                ProgressIndicator[Appearance -> "Percolate"], 
                BaseStyle -> {"Deploy"}], BaselinePosition -> Scaled[0.05]], {
              False, True} -> 
             DynamicModuleBox[{
               CodeInspector`LinterUI`Private`tracker$$ = 
                CodeInspector`LinterUI`Private`DynamicTriggers`\
dockedCellLintCounts}, 
               DynamicWrapperBox[
                DynamicBox[
                 ToBoxes[
                 CodeInspector`LinterUI`Private`tracker$$; 
                  LinterUIDockedCell`Private`dockedCellSeverityCountsButton[
                   LinterUIDockedCell`Private`notebook$$], TraditionalForm], 
                 TrackedSymbols :> {
                  CodeInspector`LinterUI`Private`tracker$$}], 
                If[
                CodeInspector`LinterUI`Private`tracker$$ =!= 
                 CodeInspector`LinterUI`Private`DynamicTriggers`\
dockedCellLintCounts, CodeInspector`LinterUI`Private`tracker$$ = 
                 CodeInspector`LinterUI`Private`DynamicTriggers`\
dockedCellLintCounts]], DynamicModuleValues :> {}]}, 
            Dynamic[FEPrivate`EvaluatorStatus["Local"]; {
               CodeInspector`LinterUI`Private`varValue[
               LinterUIDockedCell`Private`notebook$$, "AnalysisInProgressQ"], 
               
               TrueQ[
                CodeInspector`LinterUI`Private`varValue[
                LinterUIDockedCell`Private`notebook$$, 
                 "DockedCellPresentQ"]]}], ImageSize -> Automatic], 
           BaselinePosition -> Scaled[0.15]]}, "Row", 
         DisplayFunction -> (PaneBox[
           RowBox[{
             TemplateSlotSequence[1, "\[InvisibleSpace]"]}], Alignment -> 
           Baseline]& ), InterpretationFunction -> (RowBox[{"Row", "[", 
            RowBox[{
              RowBox[{"{", 
                TemplateSlotSequence[1, ","], "}"}], ",", 
              RowBox[{"Alignment", "\[Rule]", "Baseline"}]}], "]"}]& )], 
        Offset[{8, 0}, {-1, 0}], {-1, 0}], 
       InsetBox[
        PaneSelectorBox[{
         True -> DynamicModuleBox[{
            CodeInspector`LinterUI`Private`hoverQ$$ = False, 
             CodeInspector`LinterUI`Private`mouseDownQ$$ = False, 
             CodeInspector`LinterUI`Private`fontColor$$}, 
            ButtonBox[
             DynamicWrapperBox[
              TemplateBox[{
                DynamicWrapperBox[
                 StyleBox[
                  PaneBox[
                  "\"Reanalyze Notebook\"", ContentPadding -> True, 
                   FrameMargins -> None, BaselinePosition -> Baseline], 
                  FontColor -> 
                  Dynamic[CodeInspector`LinterUI`Private`fontColor$$], 
                  FontColor -> GrayLevel[0.2], FontFamily -> 
                  "Source Sans Pro", FontWeight -> Plain, FontSize -> 14, 
                  StripOnInput -> False], 
                 CodeInspector`LinterUI`Private`fontColor$$ = Which[
                   TrueQ[
                    Not[
                    
                    OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "ActiveQ"]]], 
                   
                   OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "TextInactiveColor"], 
                   CodeInspector`LinterUI`Private`hoverQ$$, 
                   
                   OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "TextHoverColor"], True, 
                   
                   OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "TextColor"]]], ContentPadding -> False, 
                FrameMargins -> {{9, 9}, {0, 0}}, 
                Alignment -> {Center, Center}, ImageSize -> {Automatic, 19}, 
                RoundingRadius -> 3, FrameStyle -> Dynamic[
                  Directive[
                   AbsoluteThickness[0.5], 
                   Which[
                    TrueQ[
                    Not[
                    
                    OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "ActiveQ"]]], 
                    
                    OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "EdgeInactiveColor"], 
                    CodeInspector`LinterUI`Private`hoverQ$$, 
                    
                    OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "EdgeHoverColor"], True, 
                    
                    OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "EdgeColor"]]]], Background -> Dynamic[
                  Which[
                   TrueQ[
                    Not[
                    
                    OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "ActiveQ"]]], 
                   
                   OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "BackInactiveColor"], 
                   And[
                   CodeInspector`LinterUI`Private`hoverQ$$, 
                    CodeInspector`LinterUI`Private`mouseDownQ$$], 
                   
                   OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "BackMouseDownColor"], 
                   CodeInspector`LinterUI`Private`hoverQ$$, 
                   
                   OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "BackHoverColor"], True, 
                   
                   OptionValue[{
                    ImageSize -> {Automatic, 19}, 
                    FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                    Baseline, Alignment -> {Center, Center}, Method -> 
                    "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                    "TextHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                    "BackHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                    CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                    "EdgeHoverColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                    CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, 
                    "BackColor"]]]}, "Highlighted"], 
              CodeInspector`LinterUI`Private`hoverQ$$ = 
               CurrentValue["MouseOver"]; 
              CodeInspector`LinterUI`Private`mouseDownQ$$ = 
               CurrentValue["MouseButtonTest"]], 
             Appearance -> {
              "Default" -> 
               Image[RawArray["UnsignedInteger8",{{{255, 255, 255, 255}, {0, 
                  0, 0, 255}, {255, 255, 255, 255}}, {{0, 0, 0, 255}, {0, 0, 
                  0, 0}, {0, 0, 0, 255}}, {{255, 255, 255, 255}, {0, 0, 0, 
                  255}, {255, 255, 255, 255}}}], "Byte", ColorSpace -> "RGB", 
                 ImageResolution -> {72, 72}, Interleaving -> True], "Hover" -> 
               Image[RawArray["UnsignedInteger8",{{{255, 255, 255, 255}, {0, 
                  0, 0, 255}, {255, 255, 255, 255}}, {{0, 0, 0, 255}, {0, 0, 
                  0, 0}, {0, 0, 0, 255}}, {{255, 255, 255, 255}, {0, 0, 0, 
                  255}, {255, 255, 255, 255}}}], "Byte", ColorSpace -> "RGB", 
                 ImageResolution -> {72, 72}, Interleaving -> True], 
               "Pressed" -> 
               Image[RawArray["UnsignedInteger8",{{{255, 255, 255, 255}, {0, 
                  0, 0, 255}, {255, 255, 255, 255}}, {{0, 0, 0, 255}, {0, 0, 
                  0, 0}, {0, 0, 0, 255}}, {{255, 255, 255, 255}, {0, 0, 0, 
                  255}, {255, 255, 255, 255}}}], "Byte", ColorSpace -> "RGB", 
                 ImageResolution -> {72, 72}, Interleaving -> True]}, 
             BaselinePosition -> Baseline, 
             ButtonFunction :> (
              If[OptionValue[{
                  ImageSize -> {Automatic, 19}, 
                   FrameMargins -> {9 {1, 1}, 0 {1, 1}}, BaselinePosition -> 
                   Baseline, Alignment -> {Center, Center}, Method -> 
                   "Preemptive", "ActiveQ" -> True, "TextColor" -> 
                   CodeInspector`LinterUI`Private`colorData["ButtonText"], 
                   "TextHoverColor" -> 
                   CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextHover"], "TextInactiveColor" -> 
                   CodeInspector`LinterUI`Private`colorData[
                    "ButtonTextInactive"], "BackColor" -> 
                   CodeInspector`LinterUI`Private`colorData["ButtonBack"], 
                   "BackHoverColor" -> 
                   CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackHover"], "BackMouseDownColor" -> 
                   CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackMouseDown"], "BackInactiveColor" -> 
                   CodeInspector`LinterUI`Private`colorData[
                    "ButtonBackInactive"], "EdgeColor" -> 
                   CodeInspector`LinterUI`Private`colorData["ButtonEdge"], 
                   "EdgeHoverColor" -> 
                   CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeHover"], "EdgeInactiveColor" -> 
                   CodeInspector`LinterUI`Private`colorData[
                    "ButtonEdgeInactive"]}, {Method -> "Queued"}, "ActiveQ"] =!= 
                False, 
                CodeInspector`LinterUI`Private`attachAnalysisAction[
                 EvaluationNotebook[]]]; 
              CodeInspector`LinterUI`Private`mouseDownQ$$ = False), 
             ContentPadding -> False, Evaluator -> Automatic, Method -> 
             "Queued"], DynamicModuleValues :> {}], False -> ButtonBox[
            TemplateBox[{
              StyleBox[
              "\"Analyze Notebook\"", FontColor -> GrayLevel[0.2], FontFamily -> 
               "Source Sans Pro", FontWeight -> Plain, FontSize -> 14, 
               StripOnInput -> False], ImageSize -> {Automatic, 19}, 
              FrameMargins -> {{9, 9}, {0, 0}}, BaselinePosition -> Baseline, 
              Alignment -> {Center, Center}, Background -> GrayLevel[1], 
              FrameStyle -> Dynamic[
                If[
                 CurrentValue["MouseOver"], 
                 Hue[0.55, 0.82, 0.87], 
                 GrayLevel[0.8]]]}, "Highlighted"], 
            Appearance -> {
             "Default" -> 
              Image[RawArray["UnsignedInteger8",{{{255, 255, 255, 255}, {0, 0,
                  0, 255}, {255, 255, 255, 255}}, {{0, 0, 0, 255}, {0, 0, 0, 
                 0}, {0, 0, 0, 255}}, {{255, 255, 255, 255}, {0, 0, 0, 255}, {
                 255, 255, 255, 255}}}], "Byte", ColorSpace -> "RGB", 
                ImageResolution -> {72, 72}, Interleaving -> True], "Hover" -> 
              Image[RawArray["UnsignedInteger8",{{{255, 255, 255, 255}, {0, 0,
                  0, 255}, {255, 255, 255, 255}}, {{0, 0, 0, 255}, {0, 0, 0, 
                 0}, {0, 0, 0, 255}}, {{255, 255, 255, 255}, {0, 0, 0, 255}, {
                 255, 255, 255, 255}}}], "Byte", ColorSpace -> "RGB", 
                ImageResolution -> {72, 72}, Interleaving -> True], "Pressed" -> 
              Image[RawArray["UnsignedInteger8",{{{255, 255, 255, 255}, {0, 0,
                  0, 255}, {255, 255, 255, 255}}, {{0, 0, 0, 255}, {0, 0, 0, 
                 0}, {0, 0, 0, 255}}, {{255, 255, 255, 255}, {0, 0, 0, 255}, {
                 255, 255, 255, 255}}}], "Byte", ColorSpace -> "RGB", 
                ImageResolution -> {72, 72}, Interleaving -> True]}, 
            ButtonFunction :> (CurrentValue[
                EvaluationNotebook[], DockedCells] = 
              With[{LinterUIDockedCell`Private`dockedCells = CurrentValue[
                   EvaluationNotebook[], DockedCells]}, 
                Pick[LinterUIDockedCell`Private`dockedCells, 
                 Map[Quiet[
                    Options[#, CellTags]] =!= {
                   CellTags -> "CodeAnalysisDockedCell"}& , 
                  LinterUIDockedCell`Private`dockedCells]]]; 
             Needs["CodeInspector`"]; 
             CodeInspector`AttachAnalysis[
              LinterUIDockedCell`Private`notebook$$]), Evaluator -> Automatic,
             Method -> "Queued"]}, 
         Dynamic[FEPrivate`EvaluatorStatus["Local"]; TrueQ[
            CodeInspector`LinterUI`Private`varValue[
            LinterUIDockedCell`Private`notebook$$, "DockedCellPresentQ"]]], 
         ImageSize -> Automatic], 
        Offset[{-26, 0}, {1, 0}], {1, 0}], 
       TagBox[
        TagBox[
         TooltipBox[{{
            GrayLevel[0.6], 
            DiskBox[
             Offset[{-11, 0}, {1, 0}], 
             Offset[6]]}, {
            GrayLevel[0.97], 
            AbsoluteThickness[1.5], 
            CapForm["Round"], 
            LineBox[{{
               Offset[{-13, 2}, {1, 0}], 
               Offset[{-9, -2}, {1, 0}]}, {
               Offset[{-13, -2}, {1, 0}], 
               Offset[{-9, 2}, {1, 0}]}}]}}, "\"Close analysis\"", 
          TooltipDelay -> 0, TooltipStyle -> "TextStyling"], 
         Annotation[#, "Close analysis", "Tooltip"]& ], 
        EventHandlerTag[{"MouseClicked" :> (Map[NotebookDelete, 
             Flatten[
              CodeInspector`LinterUI`Private`varValue[
              LinterUIDockedCell`Private`notebook$$, All, 
               "UIAttachedCells"]]]; Map[NotebookDelete, 
             Flatten[
              CodeInspector`LinterUI`Private`varValue[
              LinterUIDockedCell`Private`notebook$$, All, 
               "CleanCellBracketMarker"]]]; CurrentValue[
              EvaluationNotebook[], DockedCells] = 
            With[{LinterUIDockedCell`Private`dockedCells = CurrentValue[
                 EvaluationNotebook[], DockedCells]}, 
              Pick[LinterUIDockedCell`Private`dockedCells, 
               Map[Quiet[
                  Options[#, CellTags]] =!= {
                 CellTags -> "CodeAnalysisDockedCell"}& , 
                LinterUIDockedCell`Private`dockedCells]]]; 
           CodeInspector`LinterUI`Private`applyToVar[Remove, {
              EvaluationNotebook[], All}]; 
           CodeInspector`LinterUI`Private`varSet[{
             LinterUIDockedCell`Private`notebook$$, "DockedCellPresentQ"}, 
             False]), Method -> "Preemptive", PassEventsDown -> Automatic, 
          PassEventsUp -> True}]]}, AspectRatio -> Full, 
      ImageSize -> {Full, 23}, PlotRange -> {{-1, 1}, {-1, 1}}], 
     Deinitialization :> 
     CodeInspector`LinterUI`Private`varSet[{
       LinterUIDockedCell`Private`notebook$$, "DockedCellPresentQ"}, False], 
     DynamicModuleValues :> {}, 
     Initialization :> ({
       LinterUIDockedCell`Private`dockedCellSeverityCountsButton[
          Pattern[LinterUIDockedCell`Private`notebook, 
           Blank[NotebookObject]]] := 
        With[{LinterUIDockedCell`Private`formatIcon = 
           Show[#, ImageSize -> {13, 9}, BaselinePosition -> Scaled[-0.2]]& }, 
          ActionMenu[
           Highlighted[
            Row[{
              CodeInspector`LinterUI`Private`lintSeverityCountsIconRow[
              LinterUIDockedCell`Private`notebook, "exclamSize" -> 12, 
               FontSize -> 14, FontWeight -> Plain], 
              Spacer[2], 
              LinterUIDockedCell`Private`formatIcon[
               CodeInspector`LinterUI`Private`iconData["DownChevron"][
                CodeInspector`LinterUI`Private`colorData["UIDark"]]]}], 
            ImageSize -> {Automatic, 19}, BaselinePosition -> Baseline, 
            Background -> White, Frame -> True, FrameStyle -> Dynamic[
              If[
               CurrentValue["MouseOver"], 
               Hue[0.55, 0.82, 0.87], 
               GrayLevel[0.8]]], FrameMargins -> {6 {1, 1}, {1, 1}}, 
            Alignment -> {Center, Baseline}], 
           Map[
           LinterUIDockedCell`Private`dockedCellMenuItem[
            LinterUIDockedCell`Private`notebook, #]& , 
            CodeInspector`LinterUI`Private`varValue[
            LinterUIDockedCell`Private`notebook, All, "Cell"]], Appearance -> 
           None]], LinterUIDockedCell`Private`dockedCellMenuItem[
          Pattern[LinterUIDockedCell`Private`notebook, 
           Blank[NotebookObject]], 
          Pattern[LinterUIDockedCell`Private`cell, 
           Blank[CellObject]]] := With[{}, Graphics[{
             Inset[
              With[{LinterUIDockedCell`Private`expressionString = First[
                  FrontEndExecute[
                   FrontEnd`ExportPacket[
                    First[
                    CodeInspector`LinterUI`Private`varValue[
                    LinterUIDockedCell`Private`notebook, 
                    LinterUIDockedCell`Private`cell, "CellContents"]], 
                    "InputText"]]]}, {
               LinterUIDockedCell`Private`noLineBreaks = 
                StringReplace[
                 LinterUIDockedCell`Private`expressionString, "\n" -> " "]}, {
               LinterUIDockedCell`Private`previewString = 
                StringTake[LinterUIDockedCell`Private`noLineBreaks, {1, 
                   UpTo[LinterUIDockedCell`Private`$previewLength]}]}, 
               CodeInspector`LinterUI`Private`styleData["FixedWidth"][
                If[
                StringLength[LinterUIDockedCell`Private`expressionString] > 
                 LinterUIDockedCell`Private`$previewLength, 
                 StringDrop[LinterUIDockedCell`Private`previewString, -1] <> 
                 "\[Ellipsis]", 
                 LinterUIDockedCell`Private`previewString]]], {-1, 0}, {-1, 
              0}], 
             Inset[
              CodeInspector`LinterUI`Private`lintSeverityCountsIconRow[
              LinterUIDockedCell`Private`cell], {1, 0}, {1, 0}]}, 
            ImageSize -> {300, 25}, AspectRatio -> Full, 
            PlotRange -> {{-1, 1}, {-1, 1}}, ImagePadding -> None] :> (
           SelectionMove[LinterUIDockedCell`Private`cell, All, Cell]; 
           With[{LinterUIDockedCell`Private`nb = 
              ParentNotebook[LinterUIDockedCell`Private`cell]}, 
             FrontEndExecute[
              FrontEnd`FrontEndToken[
              LinterUIDockedCell`Private`nb, "OpenSelectionParents"]]]; 
           SelectionMove[LinterUIDockedCell`Private`cell, After, Cell])], 
        LinterUIDockedCell`Private`$previewLength = 28, 
        CodeInspector`LinterUI`Private`applyToVar[
          Pattern[CodeInspector`LinterUI`Private`function, 
           Blank[]], {
           Pattern[CodeInspector`LinterUI`Private`notebook, 
            Blank[NotebookObject]], All, 
           Pattern[CodeInspector`LinterUI`Private`name, 
            Blank[String]]}, 
          Pattern[CodeInspector`LinterUI`Private`args, 
           BlankNullSequence[]]] := 
        Map[Apply[CodeInspector`LinterUI`Private`function, 
           Join[
            ToHeldExpression[#], 
            Hold[CodeInspector`LinterUI`Private`args]]]& , 
          
          Names[(CodeInspector`LinterUI`Private`varNameString[
             CodeInspector`LinterUI`Private`notebook] <> "*") <> 
           CodeInspector`LinterUI`Private`name]], Null, 
        CodeInspector`LinterUI`Private`applyToVar[
          Pattern[CodeInspector`LinterUI`Private`function, 
           Blank[]], {
           Pattern[CodeInspector`LinterUI`Private`nameArguments, 
            BlankSequence[]], 
           Pattern[CodeInspector`LinterUI`Private`name, 
            Blank[String]]}, 
          Pattern[CodeInspector`LinterUI`Private`args, 
           BlankNullSequence[]]] := 
        Apply[CodeInspector`LinterUI`Private`function, 
          Join[
           ToHeldExpression[
            CodeInspector`LinterUI`Private`varNameString[
            CodeInspector`LinterUI`Private`nameArguments]], 
           Hold[CodeInspector`LinterUI`Private`args]]], Null, 
        CodeInspector`LinterUI`Private`applyToVar[
          Pattern[CodeInspector`LinterUI`Private`function, 
           Blank[]], {
           Pattern[CodeInspector`LinterUI`Private`nameArguments, 
            BlankSequence[]], All}, 
          Pattern[CodeInspector`LinterUI`Private`args, 
           BlankNullSequence[]]] := 
        Map[Apply[CodeInspector`LinterUI`Private`function, 
           Join[
            ToHeldExpression[#], 
            Hold[CodeInspector`LinterUI`Private`args]]]& , 
          Names[
          CodeInspector`LinterUI`Private`varNameString[
            CodeInspector`LinterUI`Private`nameArguments] <> "*"]], 
        CodeInspector`LinterUI`Private`varValue[
          Pattern[CodeInspector`LinterUI`Private`notebook, 
           Blank[NotebookObject]], All, 
          Pattern[CodeInspector`LinterUI`Private`name, 
           Blank[String]]] := Map[Symbol, 
          
          Names[(CodeInspector`LinterUI`Private`varNameString[
             CodeInspector`LinterUI`Private`notebook] <> "*") <> 
           CodeInspector`LinterUI`Private`name]], Null, 
        CodeInspector`LinterUI`Private`varValue[
          Pattern[CodeInspector`LinterUI`Private`nameArguments, 
           BlankSequence[]], 
          Pattern[CodeInspector`LinterUI`Private`name, 
           Blank[String]]] := Symbol[
          CodeInspector`LinterUI`Private`varNameString[
          CodeInspector`LinterUI`Private`nameArguments, 
           CodeInspector`LinterUI`Private`name]], Null, 
        CodeInspector`LinterUI`Private`varValue[
          Pattern[CodeInspector`LinterUI`Private`nameArguments, 
           BlankSequence[]], All] := Map[Symbol, 
          Names[
          CodeInspector`LinterUI`Private`varNameString[
            CodeInspector`LinterUI`Private`nameArguments] <> "*"]], 
        CodeInspector`LinterUI`Private`varSet[{
           Pattern[CodeInspector`LinterUI`Private`nameArguments, 
            BlankSequence[]]}, 
          Pattern[CodeInspector`LinterUI`Private`value, 
           Blank[]]] := Apply[Set, 
          Append[
           ToHeldExpression[
            CodeInspector`LinterUI`Private`varNameString[
            CodeInspector`LinterUI`Private`nameArguments]], 
           CodeInspector`LinterUI`Private`value]], 
        CodeInspector`LinterUI`Private`varNameString[
          Pattern[CodeInspector`LinterUI`Private`notebook, 
           Blank[NotebookObject]]] := ((
           "CodeInspector`LinterUI`Private`Vars`" <> "$$") <> 
          With[{CodeInspector`LinterUI`Private`nbID = 
             Last[CodeInspector`LinterUI`Private`notebook]}, 
            If[
             StringQ[CodeInspector`LinterUI`Private`nbID], 
             StringReplace[CodeInspector`LinterUI`Private`nbID, "-" -> "$"], 
             ToString[CodeInspector`LinterUI`Private`nbID]]]) <> "$$", Null, 
        CodeInspector`LinterUI`Private`varNameString[
          Pattern[CodeInspector`LinterUI`Private`cell, 
           Blank[CellObject]]] := (
          CodeInspector`LinterUI`Private`varNameString[
            Replace[
             ParentNotebook[CodeInspector`LinterUI`Private`cell], $Failed -> 
             EvaluationNotebook[]]] <> 
          With[{CodeInspector`LinterUI`Private`cellID = 
             First[CodeInspector`LinterUI`Private`cell]}, 
            If[
             StringQ[CodeInspector`LinterUI`Private`cellID], 
             StringReplace[CodeInspector`LinterUI`Private`cellID, "-" -> "$"], 
             ToString[CodeInspector`LinterUI`Private`cellID]]]) <> "$$", Null,
         CodeInspector`LinterUI`Private`varNameString[
          Pattern[CodeInspector`LinterUI`Private`notebook, 
           Blank[NotebookObject]], 
          Pattern[CodeInspector`LinterUI`Private`cell, 
           Blank[CellObject]]] := (
          CodeInspector`LinterUI`Private`varNameString[
           CodeInspector`LinterUI`Private`notebook] <> 
          With[{CodeInspector`LinterUI`Private`cellID = 
             First[CodeInspector`LinterUI`Private`cell]}, 
            If[
             StringQ[CodeInspector`LinterUI`Private`cellID], 
             StringReplace[CodeInspector`LinterUI`Private`cellID, "-" -> "$"], 
             ToString[CodeInspector`LinterUI`Private`cellID]]]) <> "$$", Null,
         CodeInspector`LinterUI`Private`varNameString[
          Pattern[CodeInspector`LinterUI`Private`notebook, 
           Blank[NotebookObject]], 
          Pattern[CodeInspector`LinterUI`Private`name, 
           Blank[String]]] := 
        CodeInspector`LinterUI`Private`varNameString[
          CodeInspector`LinterUI`Private`notebook] <> 
         CodeInspector`LinterUI`Private`name, Null, 
        CodeInspector`LinterUI`Private`varNameString[
          Pattern[CodeInspector`LinterUI`Private`cell, 
           Blank[CellObject]], 
          Pattern[CodeInspector`LinterUI`Private`name, 
           Blank[String]]] := 
        CodeInspector`LinterUI`Private`varNameString[
          CodeInspector`LinterUI`Private`cell] <> 
         CodeInspector`LinterUI`Private`name, Null, 
        CodeInspector`LinterUI`Private`varNameString[
          Pattern[CodeInspector`LinterUI`Private`notebook, 
           Blank[NotebookObject]], 
          Pattern[CodeInspector`LinterUI`Private`cell, 
           Blank[CellObject]], 
          Pattern[CodeInspector`LinterUI`Private`name, 
           Blank[String]]] := 
        CodeInspector`LinterUI`Private`varNameString[
          CodeInspector`LinterUI`Private`notebook, 
           CodeInspector`LinterUI`Private`cell] <> 
         CodeInspector`LinterUI`Private`name, Null, 
        CodeInspector`LinterUI`Private`varNameString[
          Pattern[CodeInspector`LinterUI`Private`nameArguments, 
           BlankSequence[]], 
          Pattern[CodeInspector`LinterUI`Private`lint, 
           Blank[CodeInspector`InspectionObject]], 
          Pattern[CodeInspector`LinterUI`Private`name, 
           Blank[String]]] := ((
           CodeInspector`LinterUI`Private`varNameString[
            CodeInspector`LinterUI`Private`nameArguments] <> Apply[Sequence, 
             Riffle[
              Map[StringDelete[
                ToString[#], 
                Alternatives["[", "]", "{", "}", ",", " "]]& , 
               CodeInspector`LinterUI`Private`extractFirstList[
                Last[CodeInspector`LinterUI`Private`lint][
                CodeParser`Source]]], "$"]]) <> "$$") <> 
         CodeInspector`LinterUI`Private`name, 
        CodeInspector`LinterUI`Private`extractFirstList[
          Pattern[CodeInspector`LinterUI`Private`expr, 
           Blank[]]] := FirstCase[CodeInspector`LinterUI`Private`expr, 
          Blank[List], {}, {0, Infinity}]}; 
      LinterUIDockedCell`Private`notebook$$ = EvaluationNotebook[]), 
     UnsavedVariables :> {LinterUIDockedCell`Private`notebook$$}]], 
   CellFrame -> {{0, 0}, {1, 1}}, CellFrameMargins -> {{0, 0}, {0, 0}}, 
   CellFrameColor -> GrayLevel[0.85], Background -> GrayLevel[0.97], CellTags -> 
   "CodeAnalysisDockedCell"]},
TaggingRules-><|"TryRealOnly" -> False|>,
Magnification:>1.25 Inherited,
FrontEndVersion->"13.2 for Mac OS X ARM (64-bit) (January 30, 2023)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"8c85f702-113c-487a-8dec-6eaf60825603"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 219, 5, 37, "Input",ExpressionUUID->"2d530782-807c-4677-ac15-0a1524d3eb66"],
Cell[780, 27, 1925, 41, 142, "Input",ExpressionUUID->"0360f784-d335-43f3-8e4d-2bba830763e2"],
Cell[CellGroupData[{
Cell[2730, 72, 255, 4, 67, "Subsection",ExpressionUUID->"31e1b2df-6c38-4738-ae7d-157759dc5a90"],
Cell[2988, 78, 341, 9, 37, "Input",ExpressionUUID->"464119fe-5b46-4abb-930f-1de6d0c0c7ec"],
Cell[3332, 89, 895, 15, 64, "Input",ExpressionUUID->"c66ba99e-d8d1-4f03-a4ff-e02a4a612fbe"],
Cell[4230, 106, 251, 4, 37, "Input",ExpressionUUID->"e0c56802-23a4-4683-930d-2f72f95927a4"],
Cell[4484, 112, 2011, 33, 116, "Input",ExpressionUUID->"df3441c2-82a3-4dc6-ae55-72fe028a7826"],
Cell[6498, 147, 1480, 30, 116, "Input",ExpressionUUID->"37a69960-4a4b-47f2-bed8-e68905e00bd9"],
Cell[7981, 179, 1313, 29, 116, "Input",ExpressionUUID->"78efcfa0-e9fa-47a2-9b51-782cbea2e41b"],
Cell[9297, 210, 447, 12, 40, "Input",ExpressionUUID->"cb607e00-5967-477a-8aac-14f80aff48c4"],
Cell[9747, 224, 1197, 28, 143, "Input",ExpressionUUID->"0c1d9ae2-0329-4b69-96aa-5f6aff9fa9f6"],
Cell[10947, 254, 849, 19, 116, "Input",ExpressionUUID->"d64570f0-6c89-4079-b190-d3b7918e15ff"],
Cell[11799, 275, 1794, 42, 194, "Input",ExpressionUUID->"2c5d8084-fdbc-4107-ac9f-d8d95c9c2236"],
Cell[13596, 319, 2506, 57, 194, "Input",ExpressionUUID->"ce8ab224-5505-4d6e-9748-27f603f00530"],
Cell[16105, 378, 1583, 37, 194, "Input",ExpressionUUID->"2b15a034-f304-4f7e-9d25-63e3f1ab5487"],
Cell[17691, 417, 2000, 46, 272, "Input",ExpressionUUID->"19926fe5-c4d1-4650-9995-919a3c44044f"],
Cell[19694, 465, 7772, 187, 792, "Input",ExpressionUUID->"1e140797-a692-49c2-9b2b-5f4c15874357"],
Cell[27469, 654, 6682, 164, 636, "Input",ExpressionUUID->"87988790-43a9-4e61-8178-c645affb741e"],
Cell[34154, 820, 8057, 196, 896, "Input",ExpressionUUID->"5ba1a080-37af-4559-8675-5356610aa871"],
Cell[42214, 1018, 4267, 102, 506, "Input",ExpressionUUID->"ef80abef-2c56-4f05-b149-7ef948f31da2"],
Cell[46484, 1122, 2956, 76, 325, "Input",ExpressionUUID->"81f0314f-983a-4f35-94ac-9304a10f36a3"],
Cell[49443, 1200, 3830, 90, 480, "Input",ExpressionUUID->"725929c0-e672-42a1-adf0-1f1427f6f63b"],
Cell[53276, 1292, 1429, 35, 220, "Input",ExpressionUUID->"a20999be-298b-4767-9b2b-66ebc0f4bed8"],
Cell[54708, 1329, 4582, 117, 298, "Input",ExpressionUUID->"a3f64af9-a0ab-44c4-b3b2-109b0dd55536"],
Cell[59293, 1448, 916, 23, 116, "Input",ExpressionUUID->"d936375e-497e-40de-957c-ccbe13fec420"],
Cell[60212, 1473, 12807, 321, 1689, "Input",ExpressionUUID->"140d7fd9-ef09-440e-be4b-3d323ff6adc5"],
Cell[73022, 1796, 8003, 191, 792, "Input",ExpressionUUID->"48b7a866-608c-4752-acf2-21754b711ce9"],
Cell[81028, 1989, 8189, 195, 818, "Input",ExpressionUUID->"3974f54a-f4f6-42cb-a52a-c3f69fc48e4c"],
Cell[89220, 2186, 1644, 38, 194, "Input",ExpressionUUID->"41b1f503-97ce-4425-bb64-d6b2f0385419"],
Cell[90867, 2226, 6154, 150, 402, "Input",ExpressionUUID->"30c4d933-59ab-4c6f-ac91-fbe51a928bb5"],
Cell[97024, 2378, 1741, 40, 168, "Input",ExpressionUUID->"5c1e30d2-8195-4e5b-9a64-378acb156acd"],
Cell[98768, 2420, 2922, 64, 506, "Input",ExpressionUUID->"623eb9c8-8fa8-49b6-8326-e888251e5b62"],
Cell[101693, 2486, 195, 3, 37, "Input",ExpressionUUID->"33ebf65e-6034-462e-bfb9-1324117a5073"],
Cell[101891, 2491, 5049, 118, 1208, "Input",ExpressionUUID->"54483af6-5a40-4f54-bac7-293214472e69"]
}, Closed]],
Cell[CellGroupData[{
Cell[106977, 2614, 214, 4, 46, "Subsection",ExpressionUUID->"2c4a83cf-8af5-4d19-89ae-a864a258310f"],
Cell[107194, 2620, 1142, 25, 90, "Input",ExpressionUUID->"f275bdc7-d1c5-4b14-9c2f-42b3fa65a747"],
Cell[108339, 2647, 1489, 38, 143, "Input",ExpressionUUID->"2ad7219b-0cf9-4a4f-82a4-9b5a76ca6e33"],
Cell[109831, 2687, 394, 8, 37, "Input",ExpressionUUID->"2d6258ca-ae99-44db-b189-16e9533eadb5"],
Cell[110228, 2697, 691, 17, 64, "Input",ExpressionUUID->"f59b0dd0-467a-4ed9-ad45-f903dc1925e0"],
Cell[110922, 2716, 214, 3, 37, "Input",ExpressionUUID->"2db9a6e7-7e97-45f5-bcdc-1f403091d556"],
Cell[111139, 2721, 613, 14, 64, "Input",ExpressionUUID->"a8de0466-aece-4fa6-b2a1-e2234051bf73"],
Cell[111755, 2737, 224, 4, 37, "Input",ExpressionUUID->"6e268e4a-1ab1-4fa4-abc9-bc85f3bb8fa1"],
Cell[111982, 2743, 507, 12, 64, "Input",ExpressionUUID->"78177850-499e-456b-b442-fad780dafdf0"],
Cell[112492, 2757, 1463, 37, 168, "Input",ExpressionUUID->"a17059c2-5416-45b1-b84e-0c2f842f7fb5"],
Cell[113958, 2796, 1952, 50, 90, "Input",ExpressionUUID->"61202b86-4708-4e03-aa51-3fcb0e388f46"],
Cell[115913, 2848, 1104, 29, 90, "Input",ExpressionUUID->"78983d07-8f42-43d9-a50f-d26a03b2ee5c"],
Cell[117020, 2879, 1475, 36, 168, "Input",ExpressionUUID->"33533fdf-b808-460b-a76c-9a554476db8f"],
Cell[118498, 2917, 7401, 188, 792, "Input",ExpressionUUID->"534ec6f3-3445-4373-873f-bcdfb93d1e96"],
Cell[125902, 3107, 6297, 162, 688, "Input",ExpressionUUID->"0345d276-1ede-4d49-bc84-8f6ffb7b45d1"],
Cell[132202, 3271, 7648, 194, 974, "Input",ExpressionUUID->"c15b2752-0fa5-4e0d-b1ab-0c8175dd4505"],
Cell[139853, 3467, 3946, 100, 454, "Input",ExpressionUUID->"7b9a7110-6fcf-4036-b444-4addeb8c2186"],
Cell[143802, 3569, 2656, 73, 325, "Input",ExpressionUUID->"1ab266c5-0090-45e7-9943-52d59a261191"],
Cell[146461, 3644, 3498, 86, 480, "Input",ExpressionUUID->"15557545-9517-4d8e-be17-18fad593c1c8"],
Cell[149962, 3732, 1158, 32, 168, "Input",ExpressionUUID->"cd064082-f805-44ec-a045-aa1fa3aceeba"],
Cell[151123, 3766, 4210, 115, 272, "Input",ExpressionUUID->"5ef11f51-f78f-4db1-8add-279c869573f2"],
Cell[155336, 3883, 632, 19, 64, "Input",ExpressionUUID->"488002c0-cddc-467b-bc55-ab11b4063392"],
Cell[155971, 3904, 12228, 316, 1807, "Input",ExpressionUUID->"1e137b4c-2ecb-4bf4-991e-502dc176baf0"],
Cell[168202, 4222, 7576, 187, 870, "Input",ExpressionUUID->"9228741c-bdf9-4027-a094-b007a53b75d5"],
Cell[175781, 4411, 7756, 191, 870, "Input",ExpressionUUID->"f26d2032-c2da-40bd-bfb1-8e2c7187a48f"],
Cell[183540, 4604, 1029, 28, 64, "Input",ExpressionUUID->"cd8b1760-536a-488f-9246-597cbd161a39"],
Cell[184572, 4634, 5740, 146, 610, "Input",ExpressionUUID->"b0ba81ee-3f3e-4642-a9d2-b012835fd8f5"],
Cell[190315, 4782, 1441, 37, 142, "Input",ExpressionUUID->"9400811d-ec42-4264-98c2-5f9d866e0a9d"],
Cell[191759, 4821, 152, 3, 37, "Input",ExpressionUUID->"7c0079fa-1efb-4944-84f4-72b72617407c"],
Cell[CellGroupData[{
Cell[191936, 4828, 4628, 117, 506, "Input",ExpressionUUID->"876ead52-65a8-42a3-aa99-574711040d84"],
Cell[196567, 4947, 202, 4, 42, "Output",ExpressionUUID->"6bbed1e3-7d1f-4b94-b79d-3495387279b7"]
}, Open  ]],
Cell[196784, 4954, 628, 11, 37, "Input",ExpressionUUID->"307e98a6-0cd9-4fdf-b610-1c7b7718be91"],
Cell[197415, 4967, 702, 12, 37, "Input",ExpressionUUID->"e1b25bdb-2841-4819-8a93-34cef84c4bec"],
Cell[198120, 4981, 865, 17, 38, "Input",ExpressionUUID->"2896a464-3e06-42f6-b9a6-03450d15da09"],
Cell[198988, 5000, 970, 21, 90, "Input",ExpressionUUID->"8f57d6c0-230e-4209-8c4b-d1d582f6c207"],
Cell[199961, 5023, 234, 5, 116, "Input",ExpressionUUID->"dc4c9ed5-5dc6-4c88-aca6-8e217d7a99a1"],
Cell[200198, 5030, 261, 5, 90, "Input",ExpressionUUID->"7bcdb49f-93ae-44b4-88dc-2183d321197c"],
Cell[200462, 5037, 153, 4, 37, "Input",ExpressionUUID->"90cb02f9-9de5-445c-bc50-894b8b4c4b24"],
Cell[200618, 5043, 2632, 70, 325, "Input",ExpressionUUID->"cdc629b6-fbd6-4208-95b9-d0d6adcf2f45"],
Cell[203253, 5115, 342, 7, 64, "Input",ExpressionUUID->"620a8a25-4285-4a72-83fb-a24b1297e31f"],
Cell[203598, 5124, 1966, 40, 142, "Input",ExpressionUUID->"13fc04e9-6ece-443e-a69b-196c320ee2e6"],
Cell[205567, 5166, 3145, 77, 492, "Input",ExpressionUUID->"8bc5d04b-847b-4d6a-a8c8-1851951a7046"],
Cell[208715, 5245, 645, 15, 90, "Input",ExpressionUUID->"3b49784f-714a-4918-8fbf-ebf54debb929"],
Cell[209363, 5262, 1469, 37, 168, "Input",ExpressionUUID->"91ebc554-3000-4ebb-9357-0ba3928cd721"],
Cell[210835, 5301, 605, 11, 64, "Input",ExpressionUUID->"43b399a0-da79-4547-bccb-d060c2f536d3"],
Cell[211443, 5314, 11533, 305, 1286, "Input",ExpressionUUID->"e027fc68-f327-4075-8edb-fed9012963fd"],
Cell[222979, 5621, 631, 12, 64, "Input",ExpressionUUID->"84f8ea75-e165-4751-8d9d-f994ad103a88"],
Cell[223613, 5635, 455, 9, 64, "Input",ExpressionUUID->"026336d9-458b-4853-a367-c04aaaf51047"],
Cell[224071, 5646, 1043, 25, 116, "Input",ExpressionUUID->"db4b1090-4088-423c-ad5a-ab85282fe2d0"],
Cell[225117, 5673, 1237, 24, 64, "Input",ExpressionUUID->"d034d391-0bcb-4920-bfa7-0c652d20be49"],
Cell[226357, 5699, 872, 19, 64, "Input",ExpressionUUID->"da7d5618-e9a1-4078-92fe-76117811d93e"],
Cell[227232, 5720, 870, 19, 64, "Input",ExpressionUUID->"9d9b4283-847a-44de-b4b0-230ab309b86d"],
Cell[228105, 5741, 869, 19, 64, "Input",ExpressionUUID->"d6746999-76d8-4480-97b5-31f9b50e88b8"],
Cell[228977, 5762, 941, 20, 64, "Input",ExpressionUUID->"fe53db50-fc9a-4702-8f21-fb71f50f7d85"],
Cell[229921, 5784, 968, 21, 90, "Input",ExpressionUUID->"5c43fe11-077e-4ebf-bd07-abd16bc32e98"],
Cell[230892, 5807, 868, 20, 64, "Input",ExpressionUUID->"2179c704-4b27-4152-a0ca-351ef9db1f8c"],
Cell[231763, 5829, 995, 22, 37, "Input",ExpressionUUID->"025a82e1-2b38-46b5-911b-b6f574488a74"],
Cell[232761, 5853, 1000, 23, 64, "Input",ExpressionUUID->"ce8b37ec-1863-4ca9-b168-2f7a6ae09fa8"],
Cell[233764, 5878, 976, 23, 64, "Input",ExpressionUUID->"e089f5f0-b0ec-4494-be23-76d733018465"],
Cell[234743, 5903, 553, 14, 90, "Input",ExpressionUUID->"a7a9b407-15a1-49bf-a313-cb95527c1724"],
Cell[235299, 5919, 231, 6, 37, "Input",ExpressionUUID->"b59f5c25-98a1-4c0e-9696-8e737e6d2046"],
Cell[235533, 5927, 852, 19, 90, "Input",ExpressionUUID->"75817842-25b6-4977-b8b4-09f844564024"],
Cell[236388, 5948, 987, 23, 90, "Input",ExpressionUUID->"4585b255-7a30-4d9b-a82e-dd46f8fb0649"],
Cell[237378, 5973, 1211, 26, 90, "Input",ExpressionUUID->"775deee8-665d-499b-a62d-c3101ed56dd0"],
Cell[238592, 6001, 1132, 26, 90, "Input",ExpressionUUID->"1439f17e-e517-4e91-981f-8114b120b9b0"],
Cell[239727, 6029, 278, 5, 168, "Input",ExpressionUUID->"a4e1decc-8fa6-4bf3-bac3-455339d151ab"],
Cell[240008, 6036, 153, 4, 37, "Input",ExpressionUUID->"01176d12-5fa4-499f-8122-5204dbb92597"],
Cell[240164, 6042, 2557, 69, 325, "Input",ExpressionUUID->"f4b7fea1-4130-4d94-8545-e13f9ac3d962"],
Cell[242724, 6113, 710, 17, 90, "Input",ExpressionUUID->"04c7def4-f05c-44e5-94e8-6bab0de5e061"],
Cell[243437, 6132, 4655, 98, 272, "Input",ExpressionUUID->"7c7e8e19-e8e7-4f88-926e-55e2dfbd0efc"],
Cell[248095, 6232, 3010, 62, 195, "Input",ExpressionUUID->"455014bd-b8ba-49e8-86c7-b951fd6ce8a4"],
Cell[251108, 6296, 3635, 76, 247, "Input",ExpressionUUID->"3af9600f-dd7c-42da-90f7-f76edc0d5e55"],
Cell[254746, 6374, 3005, 61, 169, "Input",ExpressionUUID->"52b66b70-56ca-42b0-acce-2505a75f2a03"],
Cell[257754, 6437, 2975, 61, 169, "Input",ExpressionUUID->"a1285526-9bec-405a-8d41-d8f53982839a"],
Cell[260732, 6500, 2070, 34, 116, "Input",ExpressionUUID->"33c03bca-2ae7-4a5b-a01a-a4f31cb6f5c1"],
Cell[262805, 6536, 3821, 82, 299, "Input",ExpressionUUID->"ba8dfb62-94cf-46f2-80f4-e98ff11d4771"],
Cell[266629, 6620, 4135, 90, 299, "Input",ExpressionUUID->"72979c80-e5bf-4b4b-a333-2b002a8a903d"],
Cell[270767, 6712, 3945, 85, 299, "Input",ExpressionUUID->"877366ba-d10f-4091-8268-8260410384d3"],
Cell[274715, 6799, 3966, 85, 299, "Input",ExpressionUUID->"5c160fc7-aa9d-4fea-886d-5c22b6ed2f74"],
Cell[278684, 6886, 886, 18, 116, "Input",ExpressionUUID->"93a8594d-1fec-4c6a-8114-eace2c228b6d"],
Cell[279573, 6906, 2354, 67, 246, "Input",ExpressionUUID->"f78c474e-8ea2-42d0-9531-7370bb4dc96f"],
Cell[281930, 6975, 2932, 78, 246, "Input",ExpressionUUID->"778b0f2f-813d-4aae-8eaf-ea0a67942a89"],
Cell[284865, 7055, 994, 22, 142, "Input",ExpressionUUID->"bb4aea19-3b96-4697-9511-3d88aa2f4e77"],
Cell[285862, 7079, 2380, 66, 220, "Input",ExpressionUUID->"d8411fd6-00ae-4674-ac67-e724ca796fcf"],
Cell[288245, 7147, 2907, 75, 220, "Input",ExpressionUUID->"dc7088f0-a5d1-46ce-91e4-0e89225def64"],
Cell[291155, 7224, 228, 4, 37, "Input",ExpressionUUID->"4e4e645f-5a43-4b6f-adb9-814d318607e1"],
Cell[291386, 7230, 234, 5, 116, "Input",ExpressionUUID->"e547b3ec-2971-4691-9bb2-1718c9b10428"],
Cell[291623, 7237, 639, 17, 90, "Input",ExpressionUUID->"13e7ea58-87fd-43a6-be22-d179add0d32e"],
Cell[292265, 7256, 2438, 66, 220, "Input",ExpressionUUID->"1ed221f9-970a-4c78-8a62-144fbf11cd04"],
Cell[294706, 7324, 436, 10, 90, "Input",ExpressionUUID->"7a2c2b33-893e-4555-824d-5b59af48983c"],
Cell[295145, 7336, 280, 5, 37, "Input",ExpressionUUID->"956a2b66-9039-4458-9cad-413832765d83"],
Cell[295428, 7343, 233, 5, 37, "Input",ExpressionUUID->"8868cb95-0408-4564-a9cb-8075d078a224"],
Cell[295664, 7350, 2727, 66, 351, "Input",ExpressionUUID->"eba9c01f-6325-4f37-ab64-301fcd3a0727"],
Cell[298394, 7418, 775, 15, 37, "Input",ExpressionUUID->"bc1c4374-e362-48d5-814a-01e9f2241dc3"],
Cell[299172, 7435, 1161, 33, 90, "Input",ExpressionUUID->"49db00ba-58d2-42de-b7e5-1eb36e0f7134"],
Cell[300336, 7470, 203, 5, 37, "Input",ExpressionUUID->"0a2cd0fd-2f03-4026-ba4f-c234323d46aa"],
Cell[300542, 7477, 1796, 39, 169, "Input",ExpressionUUID->"da8c04d0-0076-4fac-8e21-42d88ac5dcc9"],
Cell[302341, 7518, 2493, 70, 195, "Input",ExpressionUUID->"26e20992-5c13-46b2-8120-c2c3516ef517"],
Cell[304837, 7590, 2124, 61, 168, "Input",ExpressionUUID->"9abe5354-c989-4cfa-bcba-d1b851636191"],
Cell[306964, 7653, 2741, 71, 142, "Input",ExpressionUUID->"d092c217-6243-48dc-bf95-86bf1b6e1b85"],
Cell[309708, 7726, 948, 27, 64, "Input",ExpressionUUID->"5a4275c6-3321-45be-b0c4-62eed72b5721"],
Cell[310659, 7755, 4183, 109, 636, "Input",ExpressionUUID->"fd334b28-5188-417b-97fb-28161f024895"],
Cell[314845, 7866, 4418, 112, 662, "Input",ExpressionUUID->"b1f12365-326c-48bf-a09d-58cb24407e81"],
Cell[319266, 7980, 324, 7, 37, "Input",ExpressionUUID->"5bfca7e4-1b95-425e-9904-1fbd2dcc6315"],
Cell[319593, 7989, 1191, 35, 90, "Input",ExpressionUUID->"393cd33a-9f3e-4e31-aee1-01433ca51735"],
Cell[320787, 8026, 1258, 35, 64, "Input",ExpressionUUID->"8c26bf13-cd03-472e-97b5-7865a8c732ca"],
Cell[322048, 8063, 2998, 83, 350, "Input",ExpressionUUID->"db9ad039-2ef3-42e1-9dde-37debd1b1503"],
Cell[325049, 8148, 232, 5, 116, "Input",ExpressionUUID->"acd41f47-2062-40d4-9e2e-f4b5df23af15"],
Cell[325284, 8155, 423, 8, 37, "Input",ExpressionUUID->"bf59c116-bafc-489b-8026-72a40328afe7"],
Cell[325710, 8165, 5751, 171, 584, "Input",ExpressionUUID->"9ad31716-c7df-443e-978c-c55d6c939962"],
Cell[331464, 8338, 6999, 190, 400, "Input",ExpressionUUID->"e3f10d85-014c-42ba-9119-bd93968e6bce"],
Cell[338466, 8530, 4516, 136, 402, "Input",ExpressionUUID->"8296c7b3-bf24-4a3b-9624-dc0e31b4a32e"],
Cell[342985, 8668, 5971, 161, 336, "Input",ExpressionUUID->"27e8edfc-ce86-4a21-b0e4-c24606fba6a7"],
Cell[348959, 8831, 149, 3, 37, "Input",ExpressionUUID->"89564c80-533c-4c62-be70-ad3c9b3c6efb"],
Cell[349111, 8836, 2808, 78, 377, "Input",ExpressionUUID->"d923c1f1-0d8a-4b8e-8662-aae4dc1e9a3b"],
Cell[351922, 8916, 231, 6, 37, "Input",ExpressionUUID->"18a31a48-10e5-4b8b-b342-b80e86a813a3"],
Cell[352156, 8924, 3344, 82, 492, "Input",ExpressionUUID->"30ddab9c-449f-4217-ae93-d1aa4e834a74"],
Cell[355503, 9008, 372, 8, 64, "Input",ExpressionUUID->"b92965b7-0461-4acd-b36c-33f570a42c55"],
Cell[355878, 9018, 1089, 29, 142, "Input",ExpressionUUID->"55110e50-adef-48e6-853c-9eb29680a2bc"],
Cell[356970, 9049, 758, 18, 90, "Input",ExpressionUUID->"eab674ae-a25c-4acb-b30f-d4863848c493"],
Cell[357731, 9069, 469, 9, 64, "Input",ExpressionUUID->"5a5b5e3e-5e54-4078-a370-edd42cad066b"],
Cell[358203, 9080, 471, 9, 64, "Input",ExpressionUUID->"b4985407-bacd-4941-9142-3a6b63ecadc5"],
Cell[358677, 9091, 469, 9, 64, "Input",ExpressionUUID->"636e0c56-ddd0-4525-9977-9a4fef8f30a2"],
Cell[359149, 9102, 6254, 178, 636, "Input",ExpressionUUID->"4b35fab2-bbec-43c8-ada7-e9c75ae0b52f"],
Cell[CellGroupData[{
Cell[365428, 9284, 223, 4, 37, "Input",ExpressionUUID->"0c888d9c-08db-46f8-866f-c874fe838440"],
Cell[365654, 9290, 873, 26, 42, "Output",ExpressionUUID->"13c77d6a-8c4a-4aef-8edb-ae00790b1730"]
}, Open  ]],
Cell[366542, 9319, 1511, 35, 142, "Input",ExpressionUUID->"f0a311ef-b6d9-4468-b1ba-f9577c3f0893"],
Cell[368056, 9356, 1286, 33, 116, "Input",ExpressionUUID->"02c22b5b-6be6-4944-81b9-783261541009"],
Cell[369345, 9391, 1286, 33, 116, "Input",ExpressionUUID->"d6014e48-9f32-4869-9603-6a951de5ed7d"],
Cell[370634, 9426, 1307, 33, 116, "Input",ExpressionUUID->"71d75fd2-9085-4c5a-af91-a0b2e7587827"],
Cell[371944, 9461, 378, 7, 272, "Input",ExpressionUUID->"5a052180-7ff4-4c75-b5b7-118e575aad9c"],
Cell[372325, 9470, 217, 4, 37, "Input",ExpressionUUID->"c469cb0c-ef09-401c-8ab5-623e69c45983"],
Cell[372545, 9476, 2809, 78, 377, "Input",ExpressionUUID->"713e050b-5507-47fb-b66a-68061c504349"],
Cell[375357, 9556, 615, 16, 90, "Input",ExpressionUUID->"5d06a45c-d940-4dcb-877d-6af3a4ac9b0a"],
Cell[375975, 9574, 930, 21, 142, "Input",ExpressionUUID->"b1407aba-9b58-4470-baf5-d1205e06018c"],
Cell[376908, 9597, 1749, 45, 220, "Input",ExpressionUUID->"4c0aa746-9c71-40c4-bba6-d93d6491a8d9"],
Cell[378660, 9644, 19668, 544, 2404, "Input",ExpressionUUID->"eb4da439-774c-415e-a229-52c9296fcb02"],
Cell[CellGroupData[{
Cell[398353, 10192, 226, 4, 37, "Input",ExpressionUUID->"6a3f2ce4-d3e9-445c-9a39-659c9dc73438"],
Cell[398582, 10198, 1023, 33, 42, "Output",ExpressionUUID->"a2a8a975-c622-4ab2-a165-5b9bc362b1be"]
}, Open  ]],
Cell[399620, 10234, 1525, 37, 142, "Input",ExpressionUUID->"071b422e-aae4-404c-bfb0-2fb68dac8cf2"],
Cell[401148, 10273, 1526, 37, 142, "Input",ExpressionUUID->"e59aacaa-3d02-45f5-abe6-54f0c9a60cf0"],
Cell[402677, 10312, 1625, 38, 142, "Input",ExpressionUUID->"33bf0b4d-c240-4b08-aec8-228bd4bf2d68"],
Cell[404305, 10352, 4893, 142, 584, "Input",ExpressionUUID->"fabc18da-098e-4489-9a0a-379770b6c86e"],
Cell[409201, 10496, 2704, 60, 350, "Input",ExpressionUUID->"5d400c9c-f7b2-4572-a607-12dcb3804bc0"],
Cell[411908, 10558, 1411, 30, 116, "Input",ExpressionUUID->"6cfe9089-553b-487a-b226-bb530bbd9a2a"],
Cell[413322, 10590, 1342, 30, 116, "Input",ExpressionUUID->"4724a018-03de-4bfb-ae9f-3414c0eafb5f"],
Cell[414667, 10622, 231, 6, 37, "Input",ExpressionUUID->"e3682652-3ba1-452e-9157-d5529bca8b62"],
Cell[414901, 10630, 1289, 29, 116, "Input",ExpressionUUID->"3c263bf0-1f08-49af-ab9a-6697ee49ffd0"],
Cell[416193, 10661, 354, 6, 168, "Input",ExpressionUUID->"552613d0-51d4-4aee-bafa-f035609e09d8"],
Cell[416550, 10669, 153, 4, 37, "Input",ExpressionUUID->"602aeb4a-a3cb-4785-b1a7-4e72243e0a52"],
Cell[416706, 10675, 2909, 80, 377, "Input",ExpressionUUID->"e59a5e6f-e5c9-406e-b372-f51ad4806cdf"],
Cell[419618, 10757, 619, 17, 90, "Input",ExpressionUUID->"6060da8b-08ff-47f2-9214-7879f51ac185"],
Cell[420240, 10776, 1664, 46, 272, "Input",ExpressionUUID->"90e173e4-16cb-4bed-960b-9da685123238"],
Cell[421907, 10824, 129, 3, 37, "Input",ExpressionUUID->"9d7563c6-d8fe-4d9d-a778-dfba569e4119"],
Cell[422039, 10829, 545, 13, 38, "Input",ExpressionUUID->"7ace87b6-5ee5-40a6-a7e4-0958581ac4ee"],
Cell[422587, 10844, 2304, 55, 272, "Input",ExpressionUUID->"87943b3f-8660-4c80-9f9b-ffc9ea2f6d5e"],
Cell[424894, 10901, 927, 20, 64, "Input",ExpressionUUID->"37e7bd74-ab0b-4937-bf5d-daf7375407cf"],
Cell[425824, 10923, 1591, 45, 272, "Input",ExpressionUUID->"90f03c45-3f56-43cf-9e65-4e4dc637e653"],
Cell[427418, 10970, 709, 18, 64, "Input",ExpressionUUID->"cf1d3cc4-6bb1-40c3-8e66-3a773137f574"],
Cell[428130, 10990, 1331, 26, 64, "Input",ExpressionUUID->"25ef7d3c-a585-4e4f-831b-6d81c30274a9"],
Cell[429464, 11018, 329, 6, 220, "Input",ExpressionUUID->"5d754f18-ac96-46ed-ba72-a0ddcbd9d823"],
Cell[429796, 11026, 217, 4, 37, "Input",ExpressionUUID->"03dd2ce0-73e6-4b3f-9e78-fa46109ccd9d"],
Cell[CellGroupData[{
Cell[430038, 11034, 2726, 70, 298, "Input",ExpressionUUID->"a2f6be13-36ab-4a25-be12-10e70febf4b0"],
Cell[432767, 11106, 254, 4, 42, "Output",ExpressionUUID->"ec58d54f-216b-45fc-8dbe-042fa29d7fba"]
}, Open  ]],
Cell[433036, 11113, 1398, 33, 143, "Input",ExpressionUUID->"321c93ed-8964-4f5a-97fa-f9e1efbb09c9"],
Cell[434437, 11148, 2562, 64, 220, "Input",ExpressionUUID->"96cbc19e-b72c-4c6d-bc7b-66f2320ed1b3"],
Cell[437002, 11214, 1805, 46, 247, "Input",ExpressionUUID->"38ad49ee-908f-4806-991c-c9f4eed6520b"],
Cell[438810, 11262, 2429, 64, 351, "Input",ExpressionUUID->"1506090f-0d47-45d3-95d7-82d3a06100f8"],
Cell[441242, 11328, 2596, 72, 324, "Input",ExpressionUUID->"d85563da-5f4b-4255-b074-6c6832eb71ce"],
Cell[443841, 11402, 2777, 74, 298, "Input",ExpressionUUID->"e92630db-259f-452c-9db3-ae92a1d254b7"],
Cell[446621, 11478, 116, 1, 37, "Input",ExpressionUUID->"6118c153-8d38-43a9-ab4d-36a99936f61f"],
Cell[446740, 11481, 370, 13, 217, "Text",ExpressionUUID->"b61a4fb6-cda7-491f-a0bf-1892feba7e36"],
Cell[447113, 11496, 1618, 32, 504, "Text",ExpressionUUID->"f25af14f-3538-4d25-8b50-7f3af623ec2b"],
Cell[448734, 11530, 285, 6, 73, "Text",ExpressionUUID->"9477bfbd-b32b-4508-be9f-f9bb280b5687"],
Cell[449022, 11538, 741, 20, 221, "Code",ExpressionUUID->"aa7d5f7b-43e1-4f4b-afe8-e20097713b18",
 InitializationCell->False],
Cell[CellGroupData[{
Cell[449788, 11562, 218, 3, 37, "Input",ExpressionUUID->"769b2e35-8a22-4c19-abdd-b4aaa7d7e225"],
Cell[450009, 11567, 165, 3, 42, "Output",ExpressionUUID->"f45f57cc-f7a5-4d9e-aa16-a4b5077a7873"]
}, Open  ]],
Cell[CellGroupData[{
Cell[450211, 11575, 320, 6, 37, "Input",ExpressionUUID->"7f82ad5d-6237-433a-b8aa-d8a547b5f089"],
Cell[450534, 11583, 199, 4, 42, "Output",ExpressionUUID->"cca4bb1d-c150-41c6-a0fe-cb676abb3832"]
}, Open  ]],
Cell[CellGroupData[{
Cell[450770, 11592, 151, 2, 37, "Input",ExpressionUUID->"b144f3dd-dadd-4980-ab73-f19bbae1e29b"],
Cell[450924, 11596, 243, 5, 42, "Output",ExpressionUUID->"fbc515d3-45c7-44b7-8ae3-3659766fe113"]
}, Open  ]],
Cell[451182, 11604, 1901, 44, 194, "Input",ExpressionUUID->"f7f743e0-bc85-40c5-a72f-edced58c246a"],
Cell[CellGroupData[{
Cell[453108, 11652, 340, 8, 37, "Input",ExpressionUUID->"e483c0f3-ce1f-43ad-9d7a-a1eafa42373f"],
Cell[453451, 11662, 189, 2, 42, "Output",ExpressionUUID->"95c1e7c9-3964-45a1-a4b3-5639069260e2"]
}, Open  ]],
Cell[453655, 11667, 107, 0, 37, "Input",ExpressionUUID->"e28c5cf1-6ab5-4913-be93-834c1d8d9e8f"],
Cell[CellGroupData[{
Cell[453787, 11671, 225, 3, 37, "Input",ExpressionUUID->"6d35e2f8-92b1-44a6-ac51-024eb4e37824"],
Cell[454015, 11676, 223, 4, 42, "Output",ExpressionUUID->"0827ed25-2254-47e7-820d-47ec1ab26ed8"]
}, Open  ]],
Cell[CellGroupData[{
Cell[454275, 11685, 343, 5, 64, "Input",ExpressionUUID->"2d3c1848-cf4b-4179-a2e4-c9d16a8016ab"],
Cell[454621, 11692, 240, 4, 42, "Output",ExpressionUUID->"9025cf85-af2b-41a1-95a5-78b96616e3c2"],
Cell[454864, 11698, 398, 7, 45, "Output",ExpressionUUID->"8c072288-0730-446e-859c-a7feb3cc3239"]
}, Open  ]],
Cell[CellGroupData[{
Cell[455299, 11710, 116, 1, 37, "Input",ExpressionUUID->"50b18d2d-d810-42a5-b75a-ab0d5daf8473"],
Cell[455418, 11713, 317, 6, 42, "Output",ExpressionUUID->"28245ec2-2854-4a9e-a081-5d368f9edfec"]
}, Open  ]],
Cell[CellGroupData[{
Cell[455772, 11724, 175, 3, 37, "Input",ExpressionUUID->"a8e14c75-110b-44b6-a6a8-5213fd40bd13"],
Cell[455950, 11729, 352, 6, 45, "Output",ExpressionUUID->"e3425544-ce65-465b-95f5-5666d39a5e95"]
}, Open  ]],
Cell[456317, 11738, 315, 7, 37, "Input",ExpressionUUID->"2e994122-3e68-4847-ada6-0839faa036d0"],
Cell[456635, 11747, 297, 6, 37, "Input",ExpressionUUID->"3cf1ef8d-6e4e-4dd3-ac3f-0a574c26fc9a"]
}, Open  ]]
}
]
*)

